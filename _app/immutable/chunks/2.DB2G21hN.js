import{s as ht,e as q,a as ye,c as Z,b as re,f as j,g as _e,O as Ze,P as Fn,p as K,i as ve,h as W,Q as Ln,n as Oe,R as Wi,S as rr,q as Sn,r as ua,l as En,t as $t,d as Rt,j as ca,w as Hi,T as Li,x as Ui,y as Gi,z as Ji,U as fa,V as Ye,W as ft,X as da,Y as Ir,Z as Dr,_ as jr,$ as Vr,a0 as Lt,a1 as ha}from"./scheduler.Dn62UnTG.js";import{S as pt,i as mt,a as be,g as On,t as Pe,c as Bn,b as Ne,d as We,m as He,e as Ue}from"./index.D5Kd3Ymm.js";import{_ as Ht}from"./preload-helper.D6kgxu3v.js";function Mn(p){return(p==null?void 0:p.length)!==void 0?p:Array.from(p)}function Nr(p,s){const d={},g={},_={$$scope:1};let u=p.length;for(;u--;){const v=p[u],P=s[u];if(P){for(const C in v)C in P||(g[C]=1);for(const C in P)_[C]||(d[C]=P[C],_[C]=1);p[u]=P}else for(const C in v)_[C]=1}for(const v in g)v in d||(d[v]=void 0);return d}function Oi(p,s,d){const g=p.slice();return g[5]=s[d],g}function Bi(p){let s,d,g,_,u,v;function P(){return p[4](p[5])}return{c(){s=q("button"),d=q("img"),_=ye(),this.h()},l(C){s=Z(C,"BUTTON",{class:!0});var $=re(s);d=Z($,"IMG",{src:!0,alt:!0,class:!0}),_=_e($),$.forEach(j),this.h()},h(){Fn(d.src,g=p[5].thumbnail)||K(d,"src",g),K(d,"alt",p[5].thumbnail),K(d,"class","w-full h-full"),K(s,"class","transition border-2 border-solid md:w-24 md:h-24 w-20 h-20 p-2 rounded-md m-2 cursor-pointer"),rr(s,"border-gray-300",p[0]!==p[5]),rr(s,"hover:border-gray-500",p[0]!==p[5]),rr(s,"border-blue-500",p[0]===p[5]),rr(s,"hover:border-blue-500",p[0]===p[5]),rr(s,"nice-shadow",p[0]===p[5])},m(C,$){ve(C,s,$),W(s,d),W(s,_),u||(v=Ln(s,"click",P),u=!0)},p(C,$){p=C,$&5&&rr(s,"border-gray-300",p[0]!==p[5]),$&5&&rr(s,"hover:border-gray-500",p[0]!==p[5]),$&5&&rr(s,"border-blue-500",p[0]===p[5]),$&5&&rr(s,"hover:border-blue-500",p[0]===p[5]),$&5&&rr(s,"nice-shadow",p[0]===p[5])},d(C){C&&j(s),u=!1,v()}}}function pa(p){let s,d,g,_,u,v="(Select A Sketch Below)",P,C,$,k,H=Mn(p[2]),G=[];for(let Y=0;Y<H.length;Y+=1)G[Y]=Bi(Oi(p,H,Y));return{c(){s=q("div"),d=q("video"),_=ye(),u=q("div"),u.textContent=v,P=ye(),C=q("div");for(let Y=0;Y<G.length;Y+=1)G[Y].c();this.h()},l(Y){s=Z(Y,"DIV",{class:!0});var ie=re(s);d=Z(ie,"VIDEO",{src:!0,class:!0}),re(d).forEach(j),ie.forEach(j),_=_e(Y),u=Z(Y,"DIV",{class:!0,"data-svelte-h":!0}),Ze(u)!=="svelte-1n824es"&&(u.textContent=v),P=_e(Y),C=Z(Y,"DIV",{class:!0});var J=re(C);for(let oe=0;oe<G.length;oe+=1)G[oe].l(J);J.forEach(j),this.h()},h(){Fn(d.src,g=p[0].video)||K(d,"src",g),d.autoplay=!0,d.loop=!0,d.muted=!0,d.playsInline=!0,K(d,"class","max-w-xl w-full"),K(s,"class","border-2 border-gray-300 border-solid inline-block p-8 rounded-md"),K(u,"class","mt-4 italic"),K(C,"class","md:flex md:flex-row md:justify-center md:items-center grid grid-flow-row-dense grid-cols-3 mt-2")},m(Y,ie){ve(Y,s,ie),W(s,d),isNaN(p[1])||(d.playbackRate=p[1]),ve(Y,_,ie),ve(Y,u,ie),ve(Y,P,ie),ve(Y,C,ie);for(let J=0;J<G.length;J+=1)G[J]&&G[J].m(C,null);$||(k=Ln(d,"ratechange",p[3]),$=!0)},p(Y,[ie]){if(ie&1&&!Fn(d.src,g=Y[0].video)&&K(d,"src",g),ie&2&&!isNaN(Y[1])&&(d.playbackRate=Y[1]),ie&5){H=Mn(Y[2]);let J;for(J=0;J<H.length;J+=1){const oe=Oi(Y,H,J);G[J]?G[J].p(oe,ie):(G[J]=Bi(oe),G[J].c(),G[J].m(C,null))}for(;J<G.length;J+=1)G[J].d(1);G.length=H.length}},i:Oe,o:Oe,d(Y){Y&&(j(s),j(_),j(u),j(P),j(C)),Wi(G,Y),$=!1,k()}}}function ma(p,s,d){let g=[{video:"/videos/sketch4.mp4",title:"Sketch 4",thumbnail:"/videos/sketch4.png"},{video:"/videos/sketch1.mp4",title:"Sketch 1",thumbnail:"/videos/sketch1.png"},{video:"/videos/sketch5.mp4",title:"Sketch 5",thumbnail:"/videos/sketch5.png"},{video:"/videos/sketch3.mp4",title:"Sketch 3",thumbnail:"/videos/sketch3.png"},{video:"/videos/sketch2.mp4",title:"Sketch 2",thumbnail:"/videos/sketch2.png"}],_=g[0],u=1;setInterval(()=>{d(1,u=1)},200);function v(){u=this.playbackRate,d(1,u)}return[_,u,g,v,C=>d(0,_=C)]}class va extends pt{constructor(s){super(),mt(this,s,ma,pa,ht,{})}}var ga=Object.create,ti=Object.defineProperty,ya=Object.getOwnPropertyDescriptor,_a=Object.getOwnPropertyNames,wa=Object.getPrototypeOf,ba=Object.prototype.hasOwnProperty,we=(p,s)=>ti(p,"name",{value:s,configurable:!0}),Yi=(p=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(p,{get:(s,d)=>(typeof require<"u"?require:s)[d]}):p)(function(p){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+p+'" is not supported')}),Ki=(p,s)=>()=>(s||p((s={exports:{}}).exports,s),s.exports),xa=(p,s,d,g)=>{if(s&&typeof s=="object"||typeof s=="function")for(let _ of _a(s))!ba.call(p,_)&&_!==d&&ti(p,_,{get:()=>s[_],enumerable:!(g=ya(s,_))||g.enumerable});return p},Aa=(p,s,d)=>(d=p!=null?ga(wa(p)):{},xa(!p||!p.__esModule?ti(d,"default",{value:p,enumerable:!0}):d,p)),Pa=Ki((p,s)=>{(function(d,g){typeof define=="function"&&define.amd?define("stackframe",[],g):typeof p=="object"?s.exports=g():d.StackFrame=g()})(p,function(){function d(J){return!isNaN(parseFloat(J))&&isFinite(J)}we(d,"_isNumber");function g(J){return J.charAt(0).toUpperCase()+J.substring(1)}we(g,"_capitalize");function _(J){return function(){return this[J]}}we(_,"_getter");var u=["isConstructor","isEval","isNative","isToplevel"],v=["columnNumber","lineNumber"],P=["fileName","functionName","source"],C=["args"],$=["evalOrigin"],k=u.concat(v,P,C,$);function H(J){if(J)for(var oe=0;oe<k.length;oe++)J[k[oe]]!==void 0&&this["set"+g(k[oe])](J[k[oe]])}we(H,"StackFrame"),H.prototype={getArgs:function(){return this.args},setArgs:function(J){if(Object.prototype.toString.call(J)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=J},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(J){if(J instanceof H)this.evalOrigin=J;else if(J instanceof Object)this.evalOrigin=new H(J);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var J=this.getFileName()||"",oe=this.getLineNumber()||"",Se=this.getColumnNumber()||"",Re=this.getFunctionName()||"";return this.getIsEval()?J?"[eval] ("+J+":"+oe+":"+Se+")":"[eval]:"+oe+":"+Se:Re?Re+" ("+J+":"+oe+":"+Se+")":J+":"+oe+":"+Se}},H.fromString=we(function(J){var oe=J.indexOf("("),Se=J.lastIndexOf(")"),Re=J.substring(0,oe),fe=J.substring(oe+1,Se).split(","),rt=J.substring(Se+1);if(rt.indexOf("@")===0)var U=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(rt,""),ee=U[1],Me=U[2],Ce=U[3];return new H({functionName:Re,args:fe||void 0,fileName:ee,lineNumber:Me||void 0,columnNumber:Ce||void 0})},"StackFrame$$fromString");for(var G=0;G<u.length;G++)H.prototype["get"+g(u[G])]=_(u[G]),H.prototype["set"+g(u[G])]=function(J){return function(oe){this[J]=!!oe}}(u[G]);for(var Y=0;Y<v.length;Y++)H.prototype["get"+g(v[Y])]=_(v[Y]),H.prototype["set"+g(v[Y])]=function(J){return function(oe){if(!d(oe))throw new TypeError(J+" must be a Number");this[J]=Number(oe)}}(v[Y]);for(var ie=0;ie<P.length;ie++)H.prototype["get"+g(P[ie])]=_(P[ie]),H.prototype["set"+g(P[ie])]=function(J){return function(oe){this[J]=String(oe)}}(P[ie]);return H})}),Sa=Ki((p,s)=>{(function(d,g){typeof define=="function"&&define.amd?define("error-stack-parser",["stackframe"],g):typeof p=="object"?s.exports=g(Pa()):d.ErrorStackParser=g(d.StackFrame)})(p,we(function(d){var g=/(^|@)\S+:\d+/,_=/^\s*at .*(\S+:\d+|\(native\))/m,u=/^(eval@)?(\[native code])?$/;return{parse:we(function(v){if(typeof v.stacktrace<"u"||typeof v["opera#sourceloc"]<"u")return this.parseOpera(v);if(v.stack&&v.stack.match(_))return this.parseV8OrIE(v);if(v.stack)return this.parseFFOrSafari(v);throw new Error("Cannot parse given Error object")},"ErrorStackParser$$parse"),extractLocation:we(function(v){if(v.indexOf(":")===-1)return[v];var P=/(.+?)(?::(\d+))?(?::(\d+))?$/,C=P.exec(v.replace(/[()]/g,""));return[C[1],C[2]||void 0,C[3]||void 0]},"ErrorStackParser$$extractLocation"),parseV8OrIE:we(function(v){var P=v.stack.split(`
`).filter(function(C){return!!C.match(_)},this);return P.map(function(C){C.indexOf("(eval ")>-1&&(C=C.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var $=C.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),k=$.match(/ (\(.+\)$)/);$=k?$.replace(k[0],""):$;var H=this.extractLocation(k?k[1]:$),G=k&&$||void 0,Y=["eval","<anonymous>"].indexOf(H[0])>-1?void 0:H[0];return new d({functionName:G,fileName:Y,lineNumber:H[1],columnNumber:H[2],source:C})},this)},"ErrorStackParser$$parseV8OrIE"),parseFFOrSafari:we(function(v){var P=v.stack.split(`
`).filter(function(C){return!C.match(u)},this);return P.map(function(C){if(C.indexOf(" > eval")>-1&&(C=C.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),C.indexOf("@")===-1&&C.indexOf(":")===-1)return new d({functionName:C});var $=/((.*".+"[^@]*)?[^@]*)(?:@)/,k=C.match($),H=k&&k[1]?k[1]:void 0,G=this.extractLocation(C.replace($,""));return new d({functionName:H,fileName:G[0],lineNumber:G[1],columnNumber:G[2],source:C})},this)},"ErrorStackParser$$parseFFOrSafari"),parseOpera:we(function(v){return!v.stacktrace||v.message.indexOf(`
`)>-1&&v.message.split(`
`).length>v.stacktrace.split(`
`).length?this.parseOpera9(v):v.stack?this.parseOpera11(v):this.parseOpera10(v)},"ErrorStackParser$$parseOpera"),parseOpera9:we(function(v){for(var P=/Line (\d+).*script (?:in )?(\S+)/i,C=v.message.split(`
`),$=[],k=2,H=C.length;k<H;k+=2){var G=P.exec(C[k]);G&&$.push(new d({fileName:G[2],lineNumber:G[1],source:C[k]}))}return $},"ErrorStackParser$$parseOpera9"),parseOpera10:we(function(v){for(var P=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,C=v.stacktrace.split(`
`),$=[],k=0,H=C.length;k<H;k+=2){var G=P.exec(C[k]);G&&$.push(new d({functionName:G[3]||void 0,fileName:G[2],lineNumber:G[1],source:C[k]}))}return $},"ErrorStackParser$$parseOpera10"),parseOpera11:we(function(v){var P=v.stack.split(`
`).filter(function(C){return!!C.match(g)&&!C.match(/^Error created at/)},this);return P.map(function(C){var $=C.split("@"),k=this.extractLocation($.pop()),H=$.shift()||"",G=H.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,Y;H.match(/\(([^)]*)\)/)&&(Y=H.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var ie=Y===void 0||Y==="[arguments not available]"?void 0:Y.split(",");return new d({functionName:G,args:ie,fileName:k[0],lineNumber:k[1],columnNumber:k[2],source:C})},this)},"ErrorStackParser$$parseOpera11")}},"ErrorStackParser"))}),Ca=Aa(Sa()),lr=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&typeof process.browser>"u",zi=lr&&typeof module<"u"&&typeof module.exports<"u"&&typeof Yi<"u"&&typeof __dirname<"u",Ta=lr&&!zi,Fa=typeof Deno<"u",Xi=!lr&&!Fa,Ea=Xi&&typeof window<"u"&&typeof document<"u"&&typeof document.createElement<"u"&&typeof sessionStorage<"u",Ma=Xi&&typeof importScripts<"u"&&typeof self<"u",Qi,kn,Zn,qi,ri,ka=`"fetch" is not defined, maybe you're using node < 18? From Pyodide >= 0.25.0, node >= 18 is required. Older versions of Node.js may work, but it is not guaranteed or supported. Falling back to "node-fetch".`;async function ni(){if(!lr||(Qi=(await Ht(()=>Promise.resolve().then(()=>Ut),void 0,import.meta.url)).default,ri=await Ht(()=>Promise.resolve().then(()=>Ut),void 0,import.meta.url),globalThis.fetch?kn=fetch:(console.warn(ka),kn=(await Ht(()=>import("./fetch-npm-browserify.BhyxL_SS.js").then(u=>u.f),[],import.meta.url)).default),qi=(await Ht(()=>Promise.resolve().then(()=>Ut),void 0,import.meta.url)).default,Zn=await Ht(()=>Promise.resolve().then(()=>Ut),void 0,import.meta.url),ii=Zn.sep,typeof Yi<"u"))return;let p=await Ht(()=>Promise.resolve().then(()=>Ut),void 0,import.meta.url),s=await Ht(()=>Promise.resolve().then(()=>Ut),void 0,import.meta.url),d=await Ht(()=>Promise.resolve().then(()=>Ut),void 0,import.meta.url),g=await Ht(()=>Promise.resolve().then(()=>Ut),void 0,import.meta.url),_={fs:p,crypto:s,ws:d,child_process:g};globalThis.require=function(u){return _[u]}}we(ni,"initNodeModules");function Zi(p,s){return Zn.resolve(s||".",p)}we(Zi,"node_resolvePath");function eo(p,s){return s===void 0&&(s=location),new URL(p,s).toString()}we(eo,"browser_resolvePath");var ei;lr?ei=Zi:ei=eo;var ii;lr||(ii="/");function to(p,s){return p.startsWith("file://")&&(p=p.slice(7)),p.includes("://")?{response:kn(p)}:{binary:ri.readFile(p).then(d=>new Uint8Array(d.buffer,d.byteOffset,d.byteLength))}}we(to,"node_getBinaryResponse");function ro(p,s){let d=new URL(p,location);return{response:fetch(d,s?{integrity:s}:{})}}we(ro,"browser_getBinaryResponse");var $n;lr?$n=to:$n=ro;async function no(p,s){let{response:d,binary:g}=$n(p,s);if(g)return g;let _=await d;if(!_.ok)throw new Error(`Failed to load '${p}': request failed.`);return new Uint8Array(await _.arrayBuffer())}we(no,"loadBinaryFile");var Tn;if(Ea)Tn=we(async p=>await import(p),"loadScript");else if(Ma)Tn=we(async p=>{try{globalThis.importScripts(p)}catch(s){if(s instanceof TypeError)await import(p);else throw s}},"loadScript");else if(lr)Tn=io;else throw new Error("Cannot determine runtime environment");async function io(p){p.startsWith("file://")&&(p=p.slice(7)),p.includes("://")?qi.runInThisContext(await(await kn(p)).text()):await import(Qi.pathToFileURL(p).href)}we(io,"nodeLoadScript");async function oo(p){if(lr){await ni();let s=await ri.readFile(p);return JSON.parse(s)}else return await(await fetch(p)).json()}we(oo,"loadLockFile");async function ao(){if(zi)return __dirname;let p;try{throw new Error}catch(g){p=g}let s=Ca.default.parse(p)[0].fileName;if(Ta){let g=await Ht(()=>Promise.resolve().then(()=>Ut),[],import.meta.url);return(await Ht(()=>Promise.resolve().then(()=>Ut),void 0,import.meta.url)).fileURLToPath(g.dirname(s))}let d=s.lastIndexOf(ii);if(d===-1)throw new Error("Could not extract indexURL path from pyodide module location");return s.slice(0,d)}we(ao,"calculateDirname");function so(p){let s=p.FS,d=p.FS.filesystems.MEMFS,g=p.PATH,_={DIR_MODE:16895,FILE_MODE:33279,mount:function(u){if(!u.opts.fileSystemHandle)throw new Error("opts.fileSystemHandle is required");return d.mount.apply(null,arguments)},syncfs:async(u,v,P)=>{try{let C=_.getLocalSet(u),$=await _.getRemoteSet(u),k=v?$:C,H=v?C:$;await _.reconcile(u,k,H),P(null)}catch(C){P(C)}},getLocalSet:u=>{let v=Object.create(null);function P(k){return k!=="."&&k!==".."}we(P,"isRealDir");function C(k){return H=>g.join2(k,H)}we(C,"toAbsolute");let $=s.readdir(u.mountpoint).filter(P).map(C(u.mountpoint));for(;$.length;){let k=$.pop(),H=s.stat(k);s.isDir(H.mode)&&$.push.apply($,s.readdir(k).filter(P).map(C(k))),v[k]={timestamp:H.mtime,mode:H.mode}}return{type:"local",entries:v}},getRemoteSet:async u=>{let v=Object.create(null),P=await $a(u.opts.fileSystemHandle);for(let[C,$]of P)C!=="."&&(v[g.join2(u.mountpoint,C)]={timestamp:$.kind==="file"?(await $.getFile()).lastModifiedDate:new Date,mode:$.kind==="file"?_.FILE_MODE:_.DIR_MODE});return{type:"remote",entries:v,handles:P}},loadLocalEntry:u=>{let v=s.lookupPath(u).node,P=s.stat(u);if(s.isDir(P.mode))return{timestamp:P.mtime,mode:P.mode};if(s.isFile(P.mode))return v.contents=d.getFileDataAsTypedArray(v),{timestamp:P.mtime,mode:P.mode,contents:v.contents};throw new Error("node type not supported")},storeLocalEntry:(u,v)=>{if(s.isDir(v.mode))s.mkdirTree(u,v.mode);else if(s.isFile(v.mode))s.writeFile(u,v.contents,{canOwn:!0});else throw new Error("node type not supported");s.chmod(u,v.mode),s.utime(u,v.timestamp,v.timestamp)},removeLocalEntry:u=>{var v=s.stat(u);s.isDir(v.mode)?s.rmdir(u):s.isFile(v.mode)&&s.unlink(u)},loadRemoteEntry:async u=>{if(u.kind==="file"){let v=await u.getFile();return{contents:new Uint8Array(await v.arrayBuffer()),mode:_.FILE_MODE,timestamp:v.lastModifiedDate}}else{if(u.kind==="directory")return{mode:_.DIR_MODE,timestamp:new Date};throw new Error("unknown kind: "+u.kind)}},storeRemoteEntry:async(u,v,P)=>{let C=u.get(g.dirname(v)),$=s.isFile(P.mode)?await C.getFileHandle(g.basename(v),{create:!0}):await C.getDirectoryHandle(g.basename(v),{create:!0});if($.kind==="file"){let k=await $.createWritable();await k.write(P.contents),await k.close()}u.set(v,$)},removeRemoteEntry:async(u,v)=>{await u.get(g.dirname(v)).removeEntry(g.basename(v)),u.delete(v)},reconcile:async(u,v,P)=>{let C=0,$=[];Object.keys(v.entries).forEach(function(G){let Y=v.entries[G],ie=P.entries[G];(!ie||s.isFile(Y.mode)&&Y.timestamp.getTime()>ie.timestamp.getTime())&&($.push(G),C++)}),$.sort();let k=[];if(Object.keys(P.entries).forEach(function(G){v.entries[G]||(k.push(G),C++)}),k.sort().reverse(),!C)return;let H=v.type==="remote"?v.handles:P.handles;for(let G of $){let Y=g.normalize(G.replace(u.mountpoint,"/")).substring(1);if(P.type==="local"){let ie=H.get(Y),J=await _.loadRemoteEntry(ie);_.storeLocalEntry(G,J)}else{let ie=_.loadLocalEntry(G);await _.storeRemoteEntry(H,Y,ie)}}for(let G of k)if(P.type==="local")_.removeLocalEntry(G);else{let Y=g.normalize(G.replace(u.mountpoint,"/")).substring(1);await _.removeRemoteEntry(H,Y)}}};p.FS.filesystems.NATIVEFS_ASYNC=_}we(so,"initializeNativeFS");var $a=we(async p=>{let s=[];async function d(_){for await(let u of _.values())s.push(u),u.kind==="directory"&&await d(u)}we(d,"collect"),await d(p);let g=new Map;g.set(".",p);for(let _ of s){let u=(await p.resolve(_)).join("/");g.set(u,_)}return g},"getFsHandles");function lo(){let p={};return p.noImageDecoding=!0,p.noAudioDecoding=!0,p.noWasmDecoding=!1,p.preRun=[],p.quit=(s,d)=>{throw p.exited={status:s,toThrow:d},d},p}we(lo,"createModule");function uo(p,s){p.preRun.push(function(){let d="/";try{p.FS.mkdirTree(s)}catch(g){console.error(`Error occurred while making a home directory '${s}':`),console.error(g),console.error(`Using '${d}' for a home directory instead`),s=d}p.FS.chdir(s)})}we(uo,"createHomeDirectory");function co(p,s){p.preRun.push(function(){Object.assign(p.ENV,s)})}we(co,"setEnvironment");function fo(p,s){p.preRun.push(()=>{for(let d of s)p.FS.mkdirTree(d),p.FS.mount(p.FS.filesystems.NODEFS,{root:d},d)})}we(fo,"mountLocalDirectories");function ho(p,s){let d=no(s);p.preRun.push(()=>{let g=p._py_version_major(),_=p._py_version_minor();p.FS.mkdirTree("/lib"),p.FS.mkdirTree(`/lib/python${g}.${_}/site-packages`),p.addRunDependency("install-stdlib"),d.then(u=>{p.FS.writeFile(`/lib/python${g}${_}.zip`,u)}).catch(u=>{console.error("Error occurred while installing the standard library:"),console.error(u)}).finally(()=>{p.removeRunDependency("install-stdlib")})})}we(ho,"installStdlib");function po(p,s){let d;s.stdLibURL!=null?d=s.stdLibURL:d=s.indexURL+"python_stdlib.zip",ho(p,d),uo(p,s.env.HOME),co(p,s.env),fo(p,s._node_mounts),p.preRun.push(()=>so(p))}we(po,"initializeFileSystem");function mo(p,s){let{binary:d,response:g}=$n(s+"pyodide.asm.wasm");p.instantiateWasm=function(_,u){return async function(){try{let v;g?v=await WebAssembly.instantiateStreaming(g,_):v=await WebAssembly.instantiate(await d,_);let{instance:P,module:C}=v;typeof WasmOffsetConverter<"u"&&(wasmOffsetConverter=new WasmOffsetConverter(wasmBinary,C)),u(P,C)}catch(v){console.warn("wasm instantiation failed!"),console.warn(v)}}(),{}}}we(mo,"preloadWasm");var Kn="0.25.1";async function vo(p={}){await ni();let s=p.indexURL||await ao();s=ei(s),s.endsWith("/")||(s+="/"),p.indexURL=s;let d={fullStdLib:!1,jsglobals:globalThis,stdin:globalThis.prompt?globalThis.prompt:void 0,lockFileURL:s+"pyodide-lock.json",args:[],_node_mounts:[],env:{},packageCacheDir:s,packages:[]},g=Object.assign(d,p);g.env.HOME||(g.env.HOME="/home/pyodide");let _=lo();_.print=g.stdout,_.printErr=g.stderr,_.arguments=g.args;let u={config:g};_.API=u,u.lockFilePromise=oo(g.lockFileURL),mo(_,s),po(_,g);let v=new Promise(C=>_.postRun=C);if(_.locateFile=C=>g.indexURL+C,typeof _createPyodideModule!="function"){let C=`${g.indexURL}pyodide.asm.js`;await Tn(C)}if(await _createPyodideModule(_),await v,_.exited)throw _.exited.toThrow;if(p.pyproxyToStringRepr&&u.setPyProxyToStringMethod(!0),u.version!==Kn)throw new Error(`Pyodide version does not match: '${Kn}' <==> '${u.version}'. If you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.`);_.locateFile=C=>{throw new Error("Didn't expect to load any more file_packager files!")};let P=u.finalizeBootstrap();if(P.version.includes("dev")||u.setCdnUrl(`https://cdn.jsdelivr.net/pyodide/v${P.version}/full/`),await u.packageIndexReady,u._pyodide._importhook.register_module_not_found_hook(u._import_name_to_package_name,u.lockfile_unvendored_stdlibs_and_test),u.lockfile_info.version!==Kn)throw new Error("Lock file version doesn't match Pyodide version");return u.package_loader.init_loaded_packages(),g.fullStdLib&&await P.loadPackage(u.lockfile_unvendored_stdlibs),u.initializeStreams(g.stdin,g.stdout,g.stderr),P}we(vo,"loadPyodide");const Ra=`import math\r
import random\r
from abc import ABC, abstractclassmethod, abstractmethod, abstractproperty\r
from dataclasses import dataclass\r
from typing import Dict, List, Tuple\r
\r
from lark import Lark, Transformer, Tree, Visitor\r
from lark.grammar import NonTerminal, Terminal\r
from lark.tree_matcher import TreeMatcher\r
\r
\r
class Compiler(ABC):\r
    @abstractmethod\r
    def compile(\r
        self,\r
        expression: Tree,\r
    ):\r
        raise NotImplementedError\r
\r
\r
class Grammar(object):\r
    def __init__(\r
        self,\r
        grammar_spec: str,\r
        start: str = None,\r
        sampling_weights: Dict[str, List[float]] = None,\r
        primitives: List[str] = None,\r
    ):\r
        self._grammar_spec = grammar_spec\r
        self._start_name = start\r
        self._sampling_weights = sampling_weights or {}\r
        self._primitives = set(primitives) if primitives else None\r
\r
        self._lark_parser = Lark(\r
            grammar_spec,\r
            start=start,\r
            propagate_positions=True,\r
            parser="lalr",\r
            maybe_placeholders=False,\r
            lexer="contextual",\r
        )\r
\r
        self._tree_matcher = TreeMatcher(self._lark_parser)\r
\r
        self._initialize_sampler_constants()\r
\r
        self._lark_parser_for_start = {\r
            k.value: Lark(\r
                grammar_spec,\r
                start=k.value,\r
                propagate_positions=True,\r
                parser="lalr",\r
                maybe_placeholders=False,\r
                lexer="contextual",\r
            )\r
            for k in self._nonterminals.keys()\r
        }\r
\r
    def _initialize_sampler_constants(self):\r
        start = self.lark_parser.options.start\r
        terminals, rules, ignore_names = self.lark_parser.grammar.compile(start, ())\r
        ignore_names_set = set(ignore_names)\r
\r
        names_to_symbols = {}\r
        for r in rules:\r
            t = r.origin\r
            names_to_symbols[t.name] = t\r
\r
        terminal_map = {}\r
        for t in terminals:\r
            names_to_symbols[t.name] = Terminal(t.name)\r
            if t.name in ignore_names_set:\r
                continue\r
            s = t.pattern.value\r
            terminal_map[t.name] = s\r
\r
        nonterminals = {}\r
\r
        for rule in rules:\r
            nonterminals.setdefault(rule.origin.name, []).append(tuple(rule.expansion))\r
\r
        allowed_rules = {*terminal_map, *nonterminals}\r
        while dict(nonterminals) != (\r
            nonterminals := {\r
                k: clean\r
                for k, v in nonterminals.items()\r
                if (clean := [x for x in v if all(r.name in allowed_rules for r in x)])\r
            }\r
        ):\r
            allowed_rules = {*terminal_map, *nonterminals}\r
\r
        self._terminal_map = terminal_map\r
        self._rev_terminal_map = {v: k for k, v in terminal_map.items()}\r
        self._nonterminals = nonterminals\r
        self._names_to_symbols = names_to_symbols\r
\r
        self._vocabulary = sorted(list(set(terminal_map.values())))\r
\r
        def _compute_min_primitives(x, path=None):\r
            if path is None:\r
                path = []\r
            path_lookup = set(path)\r
\r
            if x.name in path_lookup:\r
                return float("inf")\r
\r
            if x.name in self._primitives:\r
                return 1\r
\r
            if isinstance(x, Terminal):\r
                return 0\r
\r
            productions = self._nonterminals.get(x.name, [])\r
            new_path = path + [x.name]\r
\r
            sub_min_primitives = [\r
                sum(_compute_min_primitives(x_, new_path) for x_ in p)\r
                for p in productions\r
            ]\r
\r
            rv = min(\r
                sub_min_primitives,\r
                default=float("inf"),\r
            )\r
\r
            return rv\r
\r
        all_terminals_and_nonterminals = set()\r
        for k, v in nonterminals.items():\r
            for p in v:\r
                for s in p:\r
                    all_terminals_and_nonterminals.add(s)\r
\r
        self._min_primitives = {}\r
        for x in all_terminals_and_nonterminals:\r
            self._min_primitives[x] = _compute_min_primitives(x)\r
\r
        self._min_primitives_choices = {}\r
        for x in all_terminals_and_nonterminals:\r
            if isinstance(x, Terminal):\r
                continue\r
\r
            choices = self._nonterminals[x.name]\r
            self._min_primitives_choices[x] = [\r
                sum(self._min_primitives[y] for y in p) for p in choices\r
            ]\r
\r
        self._start_symbol = self._names_to_symbols[self._start_name]\r
\r
    @property\r
    def vocabulary(self):\r
        return self._vocabulary\r
\r
    @property\r
    def vocabulary_map(self):\r
        return self._terminal_map\r
\r
    @property\r
    def rev_vocabulary_map(self):\r
        return self._rev_terminal_map\r
\r
    def parse(self, expression: str):\r
        return self.lark_parser.parse(expression)\r
\r
    @property\r
    def lark_parser(self):\r
        return self._lark_parser\r
\r
    @property\r
    def tree_matcher(self):\r
        return self._tree_matcher\r
\r
    @property\r
    def start_symbol(self):\r
        return self._start_symbol\r
\r
    @property\r
    def primitives(self):\r
        return self._primitives\r
\r
    @property\r
    def names_to_symbols(self):\r
        return self._names_to_symbols\r
\r
    @property\r
    def nonterminals(self):\r
        return self._nonterminals\r
\r
\r
class Environment(ABC):\r
    @abstractproperty\r
    def grammar(self) -> Grammar:\r
        raise NotImplementedError\r
\r
    @abstractproperty\r
    def compiler(self) -> Compiler:\r
        raise NotImplementedError\r
\r
    @property\r
    def observation_compiler(self) -> Compiler:\r
        return self.compiler\r
\r
    @abstractclassmethod\r
    def name(self) -> str:\r
        raise NotImplementedError\r
\r
    @abstractproperty\r
    def compiled_shape(self) -> Tuple[int, ...]:\r
        raise NotImplementedError\r
\r
\r
_grammar_spec = r"""\r
s: binop | circle | quad\r
\r
// Number quantized 0 to 16.\r
number: "0" -> zero | "1" -> one | "2" -> two | "3" -> three | "4" -> four | "5" -> five | "6" -> six | "7" -> seven | "8" -> eight | "9" -> nine | "A" -> ten | "B" -> eleven | "C" -> twelve | "D" -> thirteen | "E" -> fourteen | "F" -> fifteen\r
\r
// angles [0, 45, 90, 135, 180, 225, 270, 315]\r
angle: "G" -> zerodeg | "H" -> onedeg | "I" -> twodeg | "J" -> threedeg | "K" -> fourdeg | "L" -> fivedeg | "M" -> sixdeg | "N" -> sevendeg\r
\r
// (Circle radius x y)\r
circle: "(" "Circle" " " number " " number " " number ")"\r
\r
// (Quad x0 y0 x1 y1 x2 y2 x3 y3)\r
// quad: "(" "Quad" " " number " " number " " number " " number " " number " " number " " number " " number ")"\r
\r
// (Quad x y w h angle)\r
quad: "(" "Quad" " " number " " number " " number " " number " " angle ")"\r
\r
binop: "(" op " " s " " s ")"\r
\r
op: "+" -> add | "-" -> subtract\r
\r
%ignore /[\\t\\n\\f\\r]+/ \r
"""\r
\r
\r
_CANVAS_WIDTH = 128\r
_CANVAS_HEIGHT = 128\r
\r
_SCALE_X = _CANVAS_WIDTH / 32\r
_SCALE_Y = _CANVAS_HEIGHT / 32\r
\r
\r
class CSG2DAtoPath(Transformer):\r
    def __init__(\r
        self,\r
        visit_tokens: bool = True,\r
    ) -> None:\r
        super().__init__(visit_tokens)\r
\r
    def quad(self, children):\r
        x, y, w, h, angle_degrees = children\r
\r
        x *= 2\r
        y *= 2\r
        w *= 2\r
        h *= 2\r
\r
        # Coordinates of the four corners of the quad.\r
        # (x, y) is the center of the quad.\r
        x0 = x - w / 2\r
        y0 = y - h / 2\r
        x1 = x + w / 2\r
        y1 = y - h / 2\r
        x2 = x + w / 2\r
        y2 = y + h / 2\r
        x3 = x - w / 2\r
        y3 = y + h / 2\r
\r
        # Rotate the quad.\r
        angle = math.radians(angle_degrees)\r
        cos_angle = math.cos(angle)\r
        sin_angle = math.sin(angle)\r
\r
        x0, y0 = (\r
            x + (x0 - x) * cos_angle - (y0 - y) * sin_angle,\r
            y + (x0 - x) * sin_angle + (y0 - y) * cos_angle,\r
        )\r
        x1, y1 = (\r
            x + (x1 - x) * cos_angle - (y1 - y) * sin_angle,\r
            y + (x1 - x) * sin_angle + (y1 - y) * cos_angle,\r
        )\r
        x2, y2 = (\r
            x + (x2 - x) * cos_angle - (y2 - y) * sin_angle,\r
            y + (x2 - x) * sin_angle + (y2 - y) * cos_angle,\r
        )\r
        x3, y3 = (\r
            x + (x3 - x) * cos_angle - (y3 - y) * sin_angle,\r
            y + (x3 - x) * sin_angle + (y3 - y) * cos_angle,\r
        )\r
\r
        return f"quad {x0} {y0} {x1} {y1} {x2} {y2} {x3} {y3}"\r
\r
    def circle(self, children):\r
        r, x, y = children\r
        r *= 2\r
        x *= 2\r
        y *= 2\r
        return f"circle {r} {x} {y}"\r
\r
    def binop(self, children):\r
        op, left, right = children\r
\r
        res = []\r
\r
        if isinstance(left, list):\r
            res.extend(left)\r
        else:\r
            res.append(left)\r
\r
        res.append(op)\r
\r
        if isinstance(right, list):\r
            res.extend(right)\r
        else:\r
            res.append(right)\r
\r
        return res\r
\r
    def add(self, children):\r
        return "+"\r
\r
    def subtract(self, children):\r
        return "-"\r
\r
    def s(self, children):\r
        return children[0]\r
\r
    def zero(self, _):\r
        return 0\r
\r
    def one(self, _):\r
        return 1\r
\r
    def two(self, _):\r
        return 2\r
\r
    def three(self, _):\r
        return 3\r
\r
    def four(self, _):\r
        return 4\r
\r
    def five(self, _):\r
        return 5\r
\r
    def six(self, _):\r
        return 6\r
\r
    def seven(self, _):\r
        return 7\r
\r
    def eight(self, _):\r
        return 8\r
\r
    def nine(self, _):\r
        return 9\r
\r
    def ten(self, _):\r
        return 10\r
\r
    def eleven(self, _):\r
        return 11\r
\r
    def twelve(self, _):\r
        return 12\r
\r
    def thirteen(self, _):\r
        return 13\r
\r
    def fourteen(self, _):\r
        return 14\r
\r
    def fifteen(self, _):\r
        return 15\r
\r
    def zerodeg(self, _):\r
        return 0\r
\r
    def onedeg(self, _):\r
        return 45\r
\r
    def twodeg(self, _):\r
        return 90\r
\r
    def threedeg(self, _):\r
        return 135\r
\r
    def fourdeg(self, _):\r
        return 180\r
\r
    def fivedeg(self, _):\r
        return 225\r
\r
    def sixdeg(self, _):\r
        return 270\r
\r
    def sevendeg(self, _):\r
        return 315\r
\r
\r
class CSG2DACompiler(Compiler):\r
    def __init__(self) -> None:\r
        super().__init__()\r
        self._expression_to_path = CSG2DAtoPath()\r
\r
    def _get_path(self, expression: Tree):\r
        paths_and_ops = self._expression_to_path.transform(expression)\r
        return paths_and_ops\r
\r
    def compile(self, expression: Tree):\r
        return self._get_path(expression)\r
\r
\r
class CSG2DA(Environment):\r
    def __init__(self) -> None:\r
        super().__init__()\r
\r
        self._grammar = Grammar(\r
            _grammar_spec,\r
            start="s",\r
            primitives=["circle", "quad"],\r
        )\r
\r
        self._compiler = CSG2DACompiler()\r
        # self._observation_compiler = CSG2DASketchCompiler()\r
        # self._goal_checker = BinaryIOUGoalChecker()\r
\r
    @property\r
    def grammar(self) -> Grammar:\r
        return self._grammar\r
\r
    @property\r
    def compiler(self) -> Compiler:\r
        return self._compiler\r
\r
    @property\r
    def observation_compiler(self) -> Compiler:\r
        return self._observation_compiler\r
\r
    @property\r
    def compiled_shape(self) -> Tuple[int, ...]:\r
        return None\r
\r
    @classmethod\r
    def name(self) -> str:\r
        return "csg2da"\r
\r
    def goal_reached(self, compiledA, compiledB) -> bool:\r
        return self._goal_checker.goal_reached(compiledA, compiledB)\r
\r
\r
class GrammarSampler(ABC):\r
    def __init__(self, grammar: Grammar):\r
        self._grammar = grammar\r
\r
    @property\r
    def grammar(self) -> Grammar:\r
        return self._grammar\r
\r
    @abstractmethod\r
    def sample(self, start, **kwargs) -> str:\r
        raise NotImplementedError\r
\r
\r
class NaiveRandomSampler(GrammarSampler):\r
    def sample(self, start) -> str:\r
        def _sample_inner(current):\r
            if isinstance(current, Terminal):\r
                return self.grammar._terminal_map[current.name]\r
\r
            choices = self.grammar._nonterminals[current.name]\r
            weights = self.grammar._sampling_weights.get(current.name)\r
\r
            choice = random.choices(choices, weights=weights)[0]\r
\r
            return "".join(self.sample(x) for x in choice)\r
\r
        return _sample_inner(start)\r
\r
\r
@dataclass\r
class DerivationChoice:\r
    partial_expression: str\r
    unexpanded_start: int\r
    unexpanded_end: int\r
    expansion_choices: list\r
    expansion_index: int\r
    unexpanded_rule_name: str\r
\r
    @property\r
    def pretty(self) -> str:\r
        rv = self.partial_expression + "\\n"\r
        rv += " " * self.unexpanded_start + "^" * (\r
            self.unexpanded_end - self.unexpanded_start\r
        )\r
        rv += f" -> {self.expansion_choices[self.expansion_index]}"\r
        return rv\r
\r
\r
class ConstrainedRandomSampler(GrammarSampler):\r
    def sample(\r
        self,\r
        start,\r
        min_primitives=4,\r
        max_primitives=10,\r
        return_steps=False,\r
    ):\r
        num_primitives = random.randint(min_primitives, max_primitives)\r
        min_primitives = num_primitives\r
        max_primitives = num_primitives\r
\r
        assert (\r
            min_primitives <= max_primitives\r
        ), "min_primitives must be <= max_primitives"\r
\r
        tree = Tree(start, [])\r
        choice_history = []\r
\r
        def tree_to_string(tree: Tree) -> str:\r
            if not tree.children:\r
                if isinstance(tree.data, Terminal):\r
                    return self.grammar._terminal_map[tree.data.name]\r
                return ""\r
            return "".join(tree_to_string(child) for child in tree.children)\r
\r
        def tree_to_string_node_position(tree: Tree, search_node: Tree):\r
            def _f(tree: Tree, search_node: Tree, current_start=0) -> tuple[str, int]:\r
                found = -1\r
\r
                if tree is search_node:\r
                    found = current_start\r
\r
                if not tree.children:\r
                    if isinstance(tree.data, Terminal):\r
                        return self.grammar._terminal_map[tree.data.name], found\r
                    return f"<{tree.data.name}>", found\r
\r
                current = current_start\r
                current_rv = ""\r
                for child in tree.children:\r
                    stringified, c_found = _f(child, search_node, current)\r
                    if c_found != -1:\r
                        found = c_found\r
                    current_rv += stringified\r
                    current += len(stringified)\r
\r
                return current_rv, found\r
\r
            rv, start = _f(tree, search_node)\r
            end = start + len(f"<{search_node.data.name}>")\r
            return rv, start, end\r
\r
        def pick_expansion(nt, choose_fn=None):\r
            if return_steps:\r
                tree_string, start, end = tree_to_string_node_position(tree, nt)\r
\r
            choices = self.grammar._nonterminals[nt.data.name]\r
            choice_costs = self.grammar._min_primitives_choices[nt.data]\r
\r
            if choose_fn is None:\r
                selected_choices = choices\r
            else:\r
                chosen_cost = choose_fn(choice_costs)\r
                selected_choices = [\r
                    choice\r
                    for choice, cost in zip(choices, choice_costs)\r
                    if cost == chosen_cost\r
                ]\r
\r
            chosen = random.choice(selected_choices)\r
\r
            if return_steps:\r
                choice_history.append(\r
                    DerivationChoice(\r
                        partial_expression=tree_string,\r
                        unexpanded_start=start,\r
                        unexpanded_end=end,\r
                        expansion_choices=choices,\r
                        expansion_index=choices.index(chosen),\r
                        unexpanded_rule_name=nt.data.name,\r
                    )\r
                )\r
\r
            return chosen\r
\r
        def num_primitives_in_tree(tree):\r
            return sum(num_primitives_in_tree(child) for child in tree.children) + int(\r
                tree.data.name in self.grammar._primitives\r
            )\r
\r
        def get_unexpanded(tree):\r
            if not len(tree.children):\r
                if isinstance(tree.data, NonTerminal):\r
                    return [tree]\r
                return []\r
\r
            rv = []\r
            for child in tree.children:\r
                rv.extend(get_unexpanded(child))\r
            return rv\r
\r
        current_primitives = 0\r
        unexpanded_min_primitives = self.grammar._min_primitives[start]\r
        queue = [tree]\r
\r
        while queue:\r
            tree_potential = current_primitives + unexpanded_min_primitives\r
\r
            if tree_potential < min_primitives:\r
                choice_fn = max\r
            elif tree_potential > min_primitives and tree_potential < max_primitives:\r
                choice_fn = None\r
            else:\r
                choice_fn = min\r
\r
            current_unexpanded = random.choice(queue)\r
\r
            expansion = pick_expansion(current_unexpanded, choice_fn)\r
            current_primitives += sum(\r
                item.name in self.grammar._primitives for item in expansion\r
            )\r
            unexpanded_min_primitives -= self.grammar._min_primitives[\r
                current_unexpanded.data\r
            ]\r
            unexpanded_min_primitives += sum(\r
                self.grammar._min_primitives[item] for item in expansion\r
            )\r
            current_unexpanded.children = [Tree(item, []) for item in expansion]\r
            queue.remove(current_unexpanded)\r
            queue.extend(\r
                [\r
                    child\r
                    for child in current_unexpanded.children\r
                    if isinstance(child.data, NonTerminal)\r
                ]\r
            )\r
\r
        expression = tree_to_string(tree)\r
\r
        if return_steps:\r
            return expression, choice_history\r
\r
        return expression\r
\r
\r
@dataclass(frozen=True)\r
class Mutation(object):\r
    start: int\r
    end: int\r
    replacement: str\r
    edit_probs: List[Tuple[int, int, float]] = None\r
\r
    def apply(self, expression: str) -> str:\r
        return expression[: self.start] + self.replacement + expression[self.end :]\r
\r
    def reverse(self, expression: str) -> "Mutation":\r
        new_start = self.start\r
        new_end = self.start + len(self.replacement)\r
        return Mutation(new_start, new_end, expression[self.start : self.end])\r
\r
    def pretty(self, expression: str) -> str:\r
        pointer = (\r
            " " * self.start\r
            + "^" * (self.end - self.start)\r
            + " --> "\r
            + self.replacement\r
        )\r
        return expression + "\\n" + pointer\r
\r
    def shift_other(self, other: "Mutation") -> "Mutation":\r
        """How should another mutation be shifted when this mutation is applied?"""\r
\r
        if other.start < self.start:\r
            return other\r
\r
        if other.start >= self.end:\r
            return Mutation(\r
                other.start + len(self.replacement) - (self.end - self.start),\r
                other.end + len(self.replacement) - (self.end - self.start),\r
                other.replacement,\r
            )\r
\r
        raise ValueError("Mutations overlap!")\r
\r
\r
class AddParents(Visitor):\r
    def __default__(self, tree):\r
        for subtree in tree.children:\r
            if isinstance(subtree, Tree):\r
                subtree.parent = tree\r
\r
\r
class CountPrimitives(Visitor):\r
    def __init__(self, primitives) -> None:\r
        super().__init__()\r
        self._primitives = primitives\r
\r
    def __default__(self, tree):\r
        self_count = tree.data in self._primitives\r
        count = sum(child.primitive_count for child in tree.children) + self_count\r
        tree.primitive_count = count\r
\r
\r
def nodes_with_max_primitives(tree: Tree, primitive_set, max_primitives):\r
    CountPrimitives(primitive_set).visit(tree)\r
    return [x for x in tree.iter_subtrees() if x.primitive_count <= max_primitives]\r
\r
\r
def random_mutation(\r
    expression: str,\r
    grammar: Grammar,\r
    sampler: ConstrainedRandomSampler,\r
    selection_max_primitives: int = 2,\r
    replacement_max_primitives: int = 2,\r
    max_attempts_difference: int = 100,\r
) -> Mutation:\r
    tree = grammar.parse(expression)\r
    AddParents().visit(tree)\r
\r
    candidates = nodes_with_max_primitives(\r
        tree, grammar.primitives, selection_max_primitives\r
    )\r
\r
    candidate_primitive_counts = [x.primitive_count for x in candidates]\r
    unique_primitive_counts = list(set(candidate_primitive_counts))\r
    candidate_primitive_count = random.choice(unique_primitive_counts)\r
    candidates_with_count = [\r
        x for x in candidates if x.primitive_count == candidate_primitive_count\r
    ]\r
    candidates = candidates_with_count\r
\r
    while True:\r
        if not candidates:\r
            return None\r
\r
        candidate = random.choice(candidates)\r
\r
        if not hasattr(candidate, "parent"):\r
            # We have the root, sample a new expression.\r
            start = 0\r
            end = len(expression)\r
            sub_expression = expression[start:end]\r
            start_symbol = grammar.start_symbol\r
        else:\r
            parent = candidate.parent\r
            start = candidate.meta.start_pos\r
            end = candidate.meta.end_pos\r
\r
            sub_expression = expression[start:end]\r
            self_child_index = parent.children.index(candidate)\r
\r
            matched = grammar.tree_matcher.match_tree(parent, parent.data)\r
            rule_name = matched.children[self_child_index].data\r
            options = grammar.nonterminals[rule_name]\r
\r
            if len(options) <= 1:\r
                candidates.remove(candidate)\r
                continue\r
\r
            start_symbol = grammar.names_to_symbols[rule_name]\r
\r
        attempts = 0\r
        while True:\r
            replacement_expression = sampler.sample(\r
                start_symbol,\r
                min_primitives=0,\r
                max_primitives=replacement_max_primitives,\r
            )\r
            attempts += 1\r
\r
            if replacement_expression != sub_expression:\r
                break\r
\r
            if attempts > max_attempts_difference:\r
                candidates.remove(candidate)\r
                break\r
\r
        mutation = Mutation(start, end, replacement_expression)\r
        return mutation\r
\r
\r
env = CSG2DA()\r
sampler = ConstrainedRandomSampler(env.grammar)\r
\r
\r
def sample():\r
    expr = sampler.sample(env.grammar.start_symbol, 4, 4)\r
    return expr\r
\r
\r
def expression_to_ops(expr):\r
    rv = env.compiler.compile(env.grammar.parse(expr))\r
\r
    if isinstance(rv, str):\r
        return [rv]\r
    return rv\r
\r
\r
def get_mutated(expr):\r
    m = random_mutation(expr, env.grammar, sampler)\r
    return m.apply(expr)\r
\r
\r
def parse_expression(expr):\r
    return env.grammar.parse(expr)\r
`;var zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function La(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}function Oa(p){if(p.__esModule)return p;var s=p.default;if(typeof s=="function"){var d=function g(){return this instanceof g?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};d.prototype=s.prototype}else d={};return Object.defineProperty(d,"__esModule",{value:!0}),Object.keys(p).forEach(function(g){var _=Object.getOwnPropertyDescriptor(p,g);Object.defineProperty(d,g,_.get?_:{enumerable:!0,get:function(){return p[g]}})}),d}var go={exports:{}};const Ba={},Ut=Object.freeze(Object.defineProperty({__proto__:null,default:Ba},Symbol.toStringTag,{value:"Module"})),Ii=Oa(Ut);(function(p,s){var d=(()=>{var g=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(g=g||__filename),function(_={}){var u=_,v,P;u.ready=new Promise((e,t)=>{v=e,P=t}),function(e){e.Td=e.Td||[],e.Td.push(function(){e.MakeSWCanvasSurface=function(t){var r=t,o=typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas;if(!(typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||o||(r=document.getElementById(t),r)))throw"Canvas with id "+t+" was not found";return(t=e.MakeSurface(r.width,r.height))&&(t.Ld=r),t},e.MakeCanvasSurface||(e.MakeCanvasSurface=e.MakeSWCanvasSurface),e.MakeSurface=function(t,r){var o={width:t,height:r,colorType:e.ColorType.RGBA_8888,alphaType:e.AlphaType.Unpremul,colorSpace:e.ColorSpace.SRGB},l=t*r*4,h=e._malloc(l);return(o=e.Surface._makeRasterDirect(o,h,4*t))&&(o.Ld=null,o.Hf=t,o.Df=r,o.Ff=l,o.bf=h,o.getCanvas().clear(e.TRANSPARENT)),o},e.MakeRasterDirectSurface=function(t,r,o){return e.Surface._makeRasterDirect(t,r.byteOffset,o)},e.Surface.prototype.flush=function(t){if(e.Md(this.Kd),this._flush(),this.Ld){var r=new Uint8ClampedArray(e.HEAPU8.buffer,this.bf,this.Ff);r=new ImageData(r,this.Hf,this.Df),t?this.Ld.getContext("2d").putImageData(r,0,0,t[0],t[1],t[2]-t[0],t[3]-t[1]):this.Ld.getContext("2d").putImageData(r,0,0)}},e.Surface.prototype.dispose=function(){this.bf&&e._free(this.bf),this.delete()},e.Md=e.Md||function(){},e.Te=e.Te||function(){return null}})}(u),function(e){e.Td=e.Td||[],e.Td.push(function(){function t(m,y,S){return m&&m.hasOwnProperty(y)?m[y]:S}function r(m){var y=Lr(Et);return Et[y]=m,y}function o(m){return m.naturalHeight||m.videoHeight||m.displayHeight||m.height}function l(m){return m.naturalWidth||m.videoWidth||m.displayWidth||m.width}function h(m,y,S,B){return m.bindTexture(m.TEXTURE_2D,y),B||S.alphaType!==e.AlphaType.Premul||m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),y}function A(m,y,S){S||y.alphaType!==e.AlphaType.Premul||m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),m.bindTexture(m.TEXTURE_2D,null)}e.GetWebGLContext=function(m,y){if(!m)throw"null canvas passed into makeWebGLContext";var S={alpha:t(y,"alpha",1),depth:t(y,"depth",1),stencil:t(y,"stencil",8),antialias:t(y,"antialias",0),premultipliedAlpha:t(y,"premultipliedAlpha",1),preserveDrawingBuffer:t(y,"preserveDrawingBuffer",0),preferLowPowerToHighPerformance:t(y,"preferLowPowerToHighPerformance",0),failIfMajorPerformanceCaveat:t(y,"failIfMajorPerformanceCaveat",0),enableExtensionsByDefault:t(y,"enableExtensionsByDefault",1),explicitSwapControl:t(y,"explicitSwapControl",0),renderViaOffscreenBackBuffer:t(y,"renderViaOffscreenBackBuffer",0)};if(S.majorVersion=y&&y.majorVersion?y.majorVersion:typeof WebGL2RenderingContext<"u"?2:1,S.explicitSwapControl)throw"explicitSwapControl is not supported";return m=Io(m,S),m?(mi(m),de.fe.getExtension("WEBGL_debug_renderer_info"),m):0},e.deleteContext=function(m){de===er[m]&&(de=null),typeof JSEvents=="object"&&JSEvents.ug(er[m].fe.canvas),er[m]&&er[m].fe.canvas&&(er[m].fe.canvas.zf=void 0),er[m]=null},e._setTextureCleanup({deleteTexture:function(m,y){var S=Et[y];S&&er[m].fe.deleteTexture(S),Et[y]=null}}),e.MakeWebGLContext=function(m){if(!this.Md(m))return null;var y=this._MakeGrContext();if(!y)return null;y.Kd=m;var S=y.delete.bind(y);return y.delete=(function(){e.Md(this.Kd),S()}).bind(y),de.ff=y},e.MakeGrContext=e.MakeWebGLContext,e.GrDirectContext.prototype.getResourceCacheLimitBytes=function(){e.Md(this.Kd),this._getResourceCacheLimitBytes()},e.GrDirectContext.prototype.getResourceCacheUsageBytes=function(){e.Md(this.Kd),this._getResourceCacheUsageBytes()},e.GrDirectContext.prototype.releaseResourcesAndAbandonContext=function(){e.Md(this.Kd),this._releaseResourcesAndAbandonContext()},e.GrDirectContext.prototype.setResourceCacheLimitBytes=function(m){e.Md(this.Kd),this._setResourceCacheLimitBytes(m)},e.MakeOnScreenGLSurface=function(m,y,S,B,V,te){return!this.Md(m.Kd)||(y=V===void 0||te===void 0?this._MakeOnScreenGLSurface(m,y,S,B):this._MakeOnScreenGLSurface(m,y,S,B,V,te),!y)?null:(y.Kd=m.Kd,y)},e.MakeRenderTarget=function(){var m=arguments[0];if(!this.Md(m.Kd))return null;if(arguments.length===3){var y=this._MakeRenderTargetWH(m,arguments[1],arguments[2]);if(!y)return null}else if(arguments.length===2){if(y=this._MakeRenderTargetII(m,arguments[1]),!y)return null}else return null;return y.Kd=m.Kd,y},e.MakeWebGLCanvasSurface=function(m,y,S){y=y||null;var B=m,V=typeof OffscreenCanvas<"u"&&B instanceof OffscreenCanvas;if(!(typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||V||(B=document.getElementById(m),B)))throw"Canvas with id "+m+" was not found";if(m=this.GetWebGLContext(B,S),!m||0>m)throw"failed to create webgl context: err "+m;return m=this.MakeWebGLContext(m),y=this.MakeOnScreenGLSurface(m,B.width,B.height,y),y||(y=B.cloneNode(!0),B.parentNode.replaceChild(y,B),y.classList.add("ck-replaced"),e.MakeSWCanvasSurface(y))},e.MakeCanvasSurface=e.MakeWebGLCanvasSurface,e.Surface.prototype.makeImageFromTexture=function(m,y){return e.Md(this.Kd),m=r(m),(y=this._makeImageFromTexture(this.Kd,m,y))&&(y.Le=m),y},e.Surface.prototype.makeImageFromTextureSource=function(m,y,S){y||(y={height:o(m),width:l(m),colorType:e.ColorType.RGBA_8888,alphaType:S?e.AlphaType.Premul:e.AlphaType.Unpremul}),y.colorSpace||(y.colorSpace=e.ColorSpace.SRGB),e.Md(this.Kd);var B=de.fe;return S=h(B,B.createTexture(),y,S),de.version===2?B.texImage2D(B.TEXTURE_2D,0,B.RGBA,y.width,y.height,0,B.RGBA,B.UNSIGNED_BYTE,m):B.texImage2D(B.TEXTURE_2D,0,B.RGBA,B.RGBA,B.UNSIGNED_BYTE,m),A(B,y),this._resetContext(),this.makeImageFromTexture(S,y)},e.Surface.prototype.updateTextureFromSource=function(m,y,S){if(m.Le){e.Md(this.Kd);var B=m.getImageInfo(),V=de.fe,te=h(V,Et[m.Le],B,S);de.version===2?V.texImage2D(V.TEXTURE_2D,0,V.RGBA,l(y),o(y),0,V.RGBA,V.UNSIGNED_BYTE,y):V.texImage2D(V.TEXTURE_2D,0,V.RGBA,V.RGBA,V.UNSIGNED_BYTE,y),A(V,B,S),this._resetContext(),Et[m.Le]=null,m.Le=r(te),B.colorSpace=m.getColorSpace(),y=this._makeImageFromTexture(this.Kd,m.Le,B),S=m.Jd.Rd,V=m.Jd.Yd,m.Jd.Rd=y.Jd.Rd,m.Jd.Yd=y.Jd.Yd,y.Jd.Rd=S,y.Jd.Yd=V,y.delete(),B.colorSpace.delete()}},e.MakeLazyImageFromTextureSource=function(m,y,S){y||(y={height:o(m),width:l(m),colorType:e.ColorType.RGBA_8888,alphaType:S?e.AlphaType.Premul:e.AlphaType.Unpremul}),y.colorSpace||(y.colorSpace=e.ColorSpace.SRGB);var B={makeTexture:function(){var V=de,te=V.fe,E=h(te,te.createTexture(),y,S);return V.version===2?te.texImage2D(te.TEXTURE_2D,0,te.RGBA,y.width,y.height,0,te.RGBA,te.UNSIGNED_BYTE,m):te.texImage2D(te.TEXTURE_2D,0,te.RGBA,te.RGBA,te.UNSIGNED_BYTE,m),A(te,y,S),r(E)},freeSrc:function(){}};return m.constructor.name==="VideoFrame"&&(B.freeSrc=function(){m.close()}),e.Image._makeFromGenerator(y,B)},e.Md=function(m){return m?mi(m):!1},e.Te=function(){return de&&de.ff&&!de.ff.isDeleted()?de.ff:null}})}(u),function(e){function t(i,n,a,f,x){for(var F=0;F<i.length;F++)n[F*a+(F*x+f+a)%a]=i[F];return n}function r(i){for(var n=i*i,a=Array(n);n--;)a[n]=n%(i+1)===0?1:0;return a}function o(i){return i?i.constructor===Float32Array&&i.length===4:!1}function l(i){return(m(255*i[3])<<24|m(255*i[0])<<16|m(255*i[1])<<8|m(255*i[2])<<0)>>>0}function h(i){if(i&&i._ck)return i;if(i instanceof Float32Array){for(var n=Math.floor(i.length/4),a=new Uint32Array(n),f=0;f<n;f++)a[f]=l(i.slice(4*f,4*(f+1)));return a}if(i instanceof Uint32Array)return i;if(i instanceof Array&&i[0]instanceof Float32Array)return i.map(l)}function A(i){if(i===void 0)return 1;var n=parseFloat(i);return i&&i.indexOf("%")!==-1?n/100:n}function m(i){return Math.round(Math.max(0,Math.min(i||0,255)))}function y(i,n){n&&n._ck||e._free(i)}function S(i,n,a){if(!i||!i.length)return xe;if(i&&i._ck)return i.byteOffset;var f=e[n].BYTES_PER_ELEMENT;return a||(a=e._malloc(i.length*f)),e[n].set(i,a/f),a}function B(i){var n={be:xe,count:i.length,colorType:e.ColorType.RGBA_F32};if(i instanceof Float32Array)n.be=S(i,"HEAPF32"),n.count=i.length/4;else if(i instanceof Uint32Array)n.be=S(i,"HEAPU32"),n.colorType=e.ColorType.RGBA_8888;else if(i instanceof Array){if(i&&i.length){for(var a=e._malloc(16*i.length),f=0,x=a/4,F=0;F<i.length;F++)for(var L=0;4>L;L++)e.HEAPF32[x+f]=i[F][L],f++;i=a}else i=xe;n.be=i}else throw"Invalid argument to copyFlexibleColorArray, Not a color array "+typeof i;return n}function V(i){if(!i)return xe;var n=Wn.toTypedArray();if(i.length){if(i.length===6||i.length===9)return S(i,"HEAPF32",mr),i.length===6&&e.HEAPF32.set(sa,6+mr/4),mr;if(i.length===16)return n[0]=i[0],n[1]=i[1],n[2]=i[3],n[3]=i[4],n[4]=i[5],n[5]=i[7],n[6]=i[12],n[7]=i[13],n[8]=i[15],mr;throw"invalid matrix size"}if(i.m11===void 0)throw"invalid matrix argument";return n[0]=i.m11,n[1]=i.m21,n[2]=i.m41,n[3]=i.m12,n[4]=i.m22,n[5]=i.m42,n[6]=i.m14,n[7]=i.m24,n[8]=i.m44,mr}function te(i){if(!i)return xe;var n=Hn.toTypedArray();if(i.length){if(i.length!==16&&i.length!==6&&i.length!==9)throw"invalid matrix size";return i.length===16?S(i,"HEAPF32",Br):(n.fill(0),n[0]=i[0],n[1]=i[1],n[3]=i[2],n[4]=i[3],n[5]=i[4],n[7]=i[5],n[10]=1,n[12]=i[6],n[13]=i[7],n[15]=i[8],i.length===6&&(n[12]=0,n[13]=0,n[15]=1),Br)}if(i.m11===void 0)throw"invalid matrix argument";return n[0]=i.m11,n[1]=i.m21,n[2]=i.m31,n[3]=i.m41,n[4]=i.m12,n[5]=i.m22,n[6]=i.m32,n[7]=i.m42,n[8]=i.m13,n[9]=i.m23,n[10]=i.m33,n[11]=i.m43,n[12]=i.m14,n[13]=i.m24,n[14]=i.m34,n[15]=i.m44,Br}function E(i,n){return S(i,"HEAPF32",n||Cr)}function ae(i,n,a,f){var x=Un.toTypedArray();return x[0]=i,x[1]=n,x[2]=a,x[3]=f,Cr}function me(i){for(var n=new Float32Array(4),a=0;4>a;a++)n[a]=e.HEAPF32[i/4+a];return n}function he(i,n){return S(i,"HEAPF32",n||Qe)}function gt(i,n){return S(i,"HEAPF32",n||Yn)}function ot(){for(var i=0,n=0;n<arguments.length-1;n+=2)i+=arguments[n]*arguments[n+1];return i}function nn(i,n,a){for(var f=Array(i.length),x=0;x<a;x++)for(var F=0;F<a;F++){for(var L=0,z=0;z<a;z++)L+=i[a*x+z]*n[a*z+F];f[x*a+F]=L}return f}function on(i,n){for(var a=nn(n[0],n[1],i),f=2;f<n.length;)a=nn(a,n[f],i),f++;return a}e.Color=function(i,n,a,f){return f===void 0&&(f=1),e.Color4f(m(i)/255,m(n)/255,m(a)/255,f)},e.ColorAsInt=function(i,n,a,f){return f===void 0&&(f=255),(m(f)<<24|m(i)<<16|m(n)<<8|m(a)<<0&268435455)>>>0},e.Color4f=function(i,n,a,f){return f===void 0&&(f=1),Float32Array.of(i,n,a,f)},Object.defineProperty(e,"TRANSPARENT",{get:function(){return e.Color4f(0,0,0,0)}}),Object.defineProperty(e,"BLACK",{get:function(){return e.Color4f(0,0,0,1)}}),Object.defineProperty(e,"WHITE",{get:function(){return e.Color4f(1,1,1,1)}}),Object.defineProperty(e,"RED",{get:function(){return e.Color4f(1,0,0,1)}}),Object.defineProperty(e,"GREEN",{get:function(){return e.Color4f(0,1,0,1)}}),Object.defineProperty(e,"BLUE",{get:function(){return e.Color4f(0,0,1,1)}}),Object.defineProperty(e,"YELLOW",{get:function(){return e.Color4f(1,1,0,1)}}),Object.defineProperty(e,"CYAN",{get:function(){return e.Color4f(0,1,1,1)}}),Object.defineProperty(e,"MAGENTA",{get:function(){return e.Color4f(1,0,1,1)}}),e.getColorComponents=function(i){return[Math.floor(255*i[0]),Math.floor(255*i[1]),Math.floor(255*i[2]),i[3]]},e.parseColorString=function(i,n){if(i=i.toLowerCase(),i.startsWith("#")){switch(n=255,i.length){case 9:n=parseInt(i.slice(7,9),16);case 7:var a=parseInt(i.slice(1,3),16),f=parseInt(i.slice(3,5),16),x=parseInt(i.slice(5,7),16);break;case 5:n=17*parseInt(i.slice(4,5),16);case 4:a=17*parseInt(i.slice(1,2),16),f=17*parseInt(i.slice(2,3),16),x=17*parseInt(i.slice(3,4),16)}return e.Color(a,f,x,n/255)}return i.startsWith("rgba")?(i=i.slice(5,-1),i=i.split(","),e.Color(+i[0],+i[1],+i[2],A(i[3]))):i.startsWith("rgb")?(i=i.slice(4,-1),i=i.split(","),e.Color(+i[0],+i[1],+i[2],A(i[3]))):i.startsWith("gray(")||i.startsWith("hsl")||!n||(i=n[i],i===void 0)?e.BLACK:i},e.multiplyByAlpha=function(i,n){return i=i.slice(),i[3]=Math.max(0,Math.min(i[3]*n,1)),i},e.Malloc=function(i,n){var a=e._malloc(n*i.BYTES_PER_ELEMENT);return{_ck:!0,length:n,byteOffset:a,qe:null,subarray:function(f,x){return f=this.toTypedArray().subarray(f,x),f._ck=!0,f},toTypedArray:function(){return this.qe&&this.qe.length?this.qe:(this.qe=new i(e.HEAPU8.buffer,a,n),this.qe._ck=!0,this.qe)}}},e.Free=function(i){e._free(i.byteOffset),i.byteOffset=xe,i.toTypedArray=null,i.qe=null};var mr=xe,Wn,Br=xe,Hn,Cr=xe,Un,Wt,Qe=xe,Fi,vr=xe,Ei,Gn=xe,Mi,Jn=xe,Pn,an=xe,ki,Yn=xe,$i,Ri=xe,sa=Float32Array.of(0,0,1),xe=0;e.onRuntimeInitialized=function(){function i(n,a,f,x,F,L,z){L||(L=4*x.width,x.colorType===e.ColorType.RGBA_F16?L*=2:x.colorType===e.ColorType.RGBA_F32&&(L*=4));var ce=L*x.height,ue=F?F.byteOffset:e._malloc(ce);if(z?!n._readPixels(x,ue,L,a,f,z):!n._readPixels(x,ue,L,a,f))return F||e._free(ue),null;if(F)return F.toTypedArray();switch(x.colorType){case e.ColorType.RGBA_8888:case e.ColorType.RGBA_F16:n=new Uint8Array(e.HEAPU8.buffer,ue,ce).slice();break;case e.ColorType.RGBA_F32:n=new Float32Array(e.HEAPU8.buffer,ue,ce).slice();break;default:return null}return e._free(ue),n}Un=e.Malloc(Float32Array,4),Cr=Un.byteOffset,Hn=e.Malloc(Float32Array,16),Br=Hn.byteOffset,Wn=e.Malloc(Float32Array,9),mr=Wn.byteOffset,ki=e.Malloc(Float32Array,12),Yn=ki.byteOffset,$i=e.Malloc(Float32Array,12),Ri=$i.byteOffset,Wt=e.Malloc(Float32Array,4),Qe=Wt.byteOffset,Fi=e.Malloc(Float32Array,4),vr=Fi.byteOffset,Ei=e.Malloc(Float32Array,3),Gn=Ei.byteOffset,Mi=e.Malloc(Float32Array,3),Jn=Mi.byteOffset,Pn=e.Malloc(Int32Array,4),an=Pn.byteOffset,e.ColorSpace.SRGB=e.ColorSpace._MakeSRGB(),e.ColorSpace.DISPLAY_P3=e.ColorSpace._MakeDisplayP3(),e.ColorSpace.ADOBE_RGB=e.ColorSpace._MakeAdobeRGB(),e.GlyphRunFlags={IsWhiteSpace:e._GlyphRunFlags_isWhiteSpace},e.Path.MakeFromCmds=function(n){var a=S(n,"HEAPF32"),f=e.Path._MakeFromCmds(a,n.length);return y(a,n),f},e.Path.MakeFromVerbsPointsWeights=function(n,a,f){var x=S(n,"HEAPU8"),F=S(a,"HEAPF32"),L=S(f,"HEAPF32"),z=e.Path._MakeFromVerbsPointsWeights(x,n.length,F,a.length,L,f&&f.length||0);return y(x,n),y(F,a),y(L,f),z},e.Path.prototype.addArc=function(n,a,f){return n=he(n),this._addArc(n,a,f),this},e.Path.prototype.addCircle=function(n,a,f,x){return this._addCircle(n,a,f,!!x),this},e.Path.prototype.addOval=function(n,a,f){return f===void 0&&(f=1),n=he(n),this._addOval(n,!!a,f),this},e.Path.prototype.addPath=function(){var n=Array.prototype.slice.call(arguments),a=n[0],f=!1;if(typeof n[n.length-1]=="boolean"&&(f=n.pop()),n.length===1)this._addPath(a,1,0,0,0,1,0,0,0,1,f);else if(n.length===2)n=n[1],this._addPath(a,n[0],n[1],n[2],n[3],n[4],n[5],n[6]||0,n[7]||0,n[8]||1,f);else if(n.length===7||n.length===10)this._addPath(a,n[1],n[2],n[3],n[4],n[5],n[6],n[7]||0,n[8]||0,n[9]||1,f);else return null;return this},e.Path.prototype.addPoly=function(n,a){var f=S(n,"HEAPF32");return this._addPoly(f,n.length/2,a),y(f,n),this},e.Path.prototype.addRect=function(n,a){return n=he(n),this._addRect(n,!!a),this},e.Path.prototype.addRRect=function(n,a){return n=gt(n),this._addRRect(n,!!a),this},e.Path.prototype.addVerbsPointsWeights=function(n,a,f){var x=S(n,"HEAPU8"),F=S(a,"HEAPF32"),L=S(f,"HEAPF32");this._addVerbsPointsWeights(x,n.length,F,a.length,L,f&&f.length||0),y(x,n),y(F,a),y(L,f)},e.Path.prototype.arc=function(n,a,f,x,F,L){return n=e.LTRBRect(n-f,a-f,n+f,a+f),F=(F-x)/Math.PI*180-360*!!L,L=new e.Path,L.addArc(n,x/Math.PI*180,F),this.addPath(L,!0),L.delete(),this},e.Path.prototype.arcToOval=function(n,a,f,x){return n=he(n),this._arcToOval(n,a,f,x),this},e.Path.prototype.arcToRotated=function(n,a,f,x,F,L,z){return this._arcToRotated(n,a,f,!!x,!!F,L,z),this},e.Path.prototype.arcToTangent=function(n,a,f,x,F){return this._arcToTangent(n,a,f,x,F),this},e.Path.prototype.close=function(){return this._close(),this},e.Path.prototype.conicTo=function(n,a,f,x,F){return this._conicTo(n,a,f,x,F),this},e.Path.prototype.computeTightBounds=function(n){this._computeTightBounds(Qe);var a=Wt.toTypedArray();return n?(n.set(a),n):a.slice()},e.Path.prototype.cubicTo=function(n,a,f,x,F,L){return this._cubicTo(n,a,f,x,F,L),this},e.Path.prototype.dash=function(n,a,f){return this._dash(n,a,f)?this:null},e.Path.prototype.getBounds=function(n){this._getBounds(Qe);var a=Wt.toTypedArray();return n?(n.set(a),n):a.slice()},e.Path.prototype.lineTo=function(n,a){return this._lineTo(n,a),this},e.Path.prototype.moveTo=function(n,a){return this._moveTo(n,a),this},e.Path.prototype.offset=function(n,a){return this._transform(1,0,n,0,1,a,0,0,1),this},e.Path.prototype.quadTo=function(n,a,f,x){return this._quadTo(n,a,f,x),this},e.Path.prototype.rArcTo=function(n,a,f,x,F,L,z){return this._rArcTo(n,a,f,x,F,L,z),this},e.Path.prototype.rConicTo=function(n,a,f,x,F){return this._rConicTo(n,a,f,x,F),this},e.Path.prototype.rCubicTo=function(n,a,f,x,F,L){return this._rCubicTo(n,a,f,x,F,L),this},e.Path.prototype.rLineTo=function(n,a){return this._rLineTo(n,a),this},e.Path.prototype.rMoveTo=function(n,a){return this._rMoveTo(n,a),this},e.Path.prototype.rQuadTo=function(n,a,f,x){return this._rQuadTo(n,a,f,x),this},e.Path.prototype.stroke=function(n){return n=n||{},n.width=n.width||1,n.miter_limit=n.miter_limit||4,n.cap=n.cap||e.StrokeCap.Butt,n.join=n.join||e.StrokeJoin.Miter,n.precision=n.precision||1,this._stroke(n)?this:null},e.Path.prototype.transform=function(){if(arguments.length===1){var n=arguments[0];this._transform(n[0],n[1],n[2],n[3],n[4],n[5],n[6]||0,n[7]||0,n[8]||1)}else if(arguments.length===6||arguments.length===9)n=arguments,this._transform(n[0],n[1],n[2],n[3],n[4],n[5],n[6]||0,n[7]||0,n[8]||1);else throw"transform expected to take 1 or 9 arguments. Got "+arguments.length;return this},e.Path.prototype.trim=function(n,a,f){return this._trim(n,a,!!f)?this:null},e.Image.prototype.encodeToBytes=function(n,a){var f=e.Te();return n=n||e.ImageFormat.PNG,a=a||100,f?this._encodeToBytes(n,a,f):this._encodeToBytes(n,a)},e.Image.prototype.makeShaderCubic=function(n,a,f,x,F){return F=V(F),this._makeShaderCubic(n,a,f,x,F)},e.Image.prototype.makeShaderOptions=function(n,a,f,x,F){return F=V(F),this._makeShaderOptions(n,a,f,x,F)},e.Image.prototype.readPixels=function(n,a,f,x,F){var L=e.Te();return i(this,n,a,f,x,F,L)},e.Canvas.prototype.clear=function(n){e.Md(this.Kd),n=E(n),this._clear(n)},e.Canvas.prototype.clipRRect=function(n,a,f){e.Md(this.Kd),n=gt(n),this._clipRRect(n,a,f)},e.Canvas.prototype.clipRect=function(n,a,f){e.Md(this.Kd),n=he(n),this._clipRect(n,a,f)},e.Canvas.prototype.concat=function(n){e.Md(this.Kd),n=te(n),this._concat(n)},e.Canvas.prototype.drawArc=function(n,a,f,x,F){e.Md(this.Kd),n=he(n),this._drawArc(n,a,f,x,F)},e.Canvas.prototype.drawAtlas=function(n,a,f,x,F,L,z){if(n&&x&&a&&f&&a.length===f.length){e.Md(this.Kd),F||(F=e.BlendMode.SrcOver);var ce=S(a,"HEAPF32"),ue=S(f,"HEAPF32"),Fe=f.length/4,Ee=S(h(L),"HEAPU32");if(z&&"B"in z&&"C"in z)this._drawAtlasCubic(n,ue,ce,Ee,Fe,F,z.B,z.C,x);else{let b=e.FilterMode.Linear,O=e.MipmapMode.None;z&&(b=z.filter,"mipmap"in z&&(O=z.mipmap)),this._drawAtlasOptions(n,ue,ce,Ee,Fe,F,b,O,x)}y(ce,a),y(ue,f),y(Ee,L)}},e.Canvas.prototype.drawCircle=function(n,a,f,x){e.Md(this.Kd),this._drawCircle(n,a,f,x)},e.Canvas.prototype.drawColor=function(n,a){e.Md(this.Kd),n=E(n),a!==void 0?this._drawColor(n,a):this._drawColor(n)},e.Canvas.prototype.drawColorInt=function(n,a){e.Md(this.Kd),this._drawColorInt(n,a||e.BlendMode.SrcOver)},e.Canvas.prototype.drawColorComponents=function(n,a,f,x,F){e.Md(this.Kd),n=ae(n,a,f,x),F!==void 0?this._drawColor(n,F):this._drawColor(n)},e.Canvas.prototype.drawDRRect=function(n,a,f){e.Md(this.Kd),n=gt(n,Yn),a=gt(a,Ri),this._drawDRRect(n,a,f)},e.Canvas.prototype.drawImage=function(n,a,f,x){e.Md(this.Kd),this._drawImage(n,a,f,x||null)},e.Canvas.prototype.drawImageCubic=function(n,a,f,x,F,L){e.Md(this.Kd),this._drawImageCubic(n,a,f,x,F,L||null)},e.Canvas.prototype.drawImageOptions=function(n,a,f,x,F,L){e.Md(this.Kd),this._drawImageOptions(n,a,f,x,F,L||null)},e.Canvas.prototype.drawImageNine=function(n,a,f,x,F){e.Md(this.Kd),a=S(a,"HEAP32",an),f=he(f),this._drawImageNine(n,a,f,x,F||null)},e.Canvas.prototype.drawImageRect=function(n,a,f,x,F){e.Md(this.Kd),he(a,Qe),he(f,vr),this._drawImageRect(n,Qe,vr,x,!!F)},e.Canvas.prototype.drawImageRectCubic=function(n,a,f,x,F,L){e.Md(this.Kd),he(a,Qe),he(f,vr),this._drawImageRectCubic(n,Qe,vr,x,F,L||null)},e.Canvas.prototype.drawImageRectOptions=function(n,a,f,x,F,L){e.Md(this.Kd),he(a,Qe),he(f,vr),this._drawImageRectOptions(n,Qe,vr,x,F,L||null)},e.Canvas.prototype.drawLine=function(n,a,f,x,F){e.Md(this.Kd),this._drawLine(n,a,f,x,F)},e.Canvas.prototype.drawOval=function(n,a){e.Md(this.Kd),n=he(n),this._drawOval(n,a)},e.Canvas.prototype.drawPaint=function(n){e.Md(this.Kd),this._drawPaint(n)},e.Canvas.prototype.drawParagraph=function(n,a,f){e.Md(this.Kd),this._drawParagraph(n,a,f)},e.Canvas.prototype.drawPatch=function(n,a,f,x,F){if(24>n.length)throw"Need 12 cubic points";if(a&&4>a.length)throw"Need 4 colors";if(f&&8>f.length)throw"Need 4 shader coordinates";e.Md(this.Kd);const L=S(n,"HEAPF32"),z=a?S(h(a),"HEAPU32"):xe,ce=f?S(f,"HEAPF32"):xe;x||(x=e.BlendMode.Modulate),this._drawPatch(L,z,ce,x,F),y(ce,f),y(z,a),y(L,n)},e.Canvas.prototype.drawPath=function(n,a){e.Md(this.Kd),this._drawPath(n,a)},e.Canvas.prototype.drawPicture=function(n){e.Md(this.Kd),this._drawPicture(n)},e.Canvas.prototype.drawPoints=function(n,a,f){e.Md(this.Kd);var x=S(a,"HEAPF32");this._drawPoints(n,x,a.length/2,f),y(x,a)},e.Canvas.prototype.drawRRect=function(n,a){e.Md(this.Kd),n=gt(n),this._drawRRect(n,a)},e.Canvas.prototype.drawRect=function(n,a){e.Md(this.Kd),n=he(n),this._drawRect(n,a)},e.Canvas.prototype.drawRect4f=function(n,a,f,x,F){e.Md(this.Kd),this._drawRect4f(n,a,f,x,F)},e.Canvas.prototype.drawShadow=function(n,a,f,x,F,L,z){e.Md(this.Kd);var ce=S(F,"HEAPF32"),ue=S(L,"HEAPF32");a=S(a,"HEAPF32",Gn),f=S(f,"HEAPF32",Jn),this._drawShadow(n,a,f,x,ce,ue,z),y(ce,F),y(ue,L)},e.getShadowLocalBounds=function(n,a,f,x,F,L,z){return n=V(n),f=S(f,"HEAPF32",Gn),x=S(x,"HEAPF32",Jn),this._getShadowLocalBounds(n,a,f,x,F,L,Qe)?(a=Wt.toTypedArray(),z?(z.set(a),z):a.slice()):null},e.Canvas.prototype.drawTextBlob=function(n,a,f,x){e.Md(this.Kd),this._drawTextBlob(n,a,f,x)},e.Canvas.prototype.drawVertices=function(n,a,f){e.Md(this.Kd),this._drawVertices(n,a,f)},e.Canvas.prototype.getDeviceClipBounds=function(n){this._getDeviceClipBounds(an);var a=Pn.toTypedArray();return n?n.set(a):n=a.slice(),n},e.Canvas.prototype.getLocalToDevice=function(){this._getLocalToDevice(Br);for(var n=Br,a=Array(16),f=0;16>f;f++)a[f]=e.HEAPF32[n/4+f];return a},e.Canvas.prototype.getTotalMatrix=function(){this._getTotalMatrix(mr);for(var n=Array(9),a=0;9>a;a++)n[a]=e.HEAPF32[mr/4+a];return n},e.Canvas.prototype.makeSurface=function(n){return n=this._makeSurface(n),n.Kd=this.Kd,n},e.Canvas.prototype.readPixels=function(n,a,f,x,F){return e.Md(this.Kd),i(this,n,a,f,x,F)},e.Canvas.prototype.saveLayer=function(n,a,f,x){return a=he(a),this._saveLayer(n||null,a,f||null,x||0)},e.Canvas.prototype.writePixels=function(n,a,f,x,F,L,z,ce){if(n.byteLength%(a*f))throw"pixels length must be a multiple of the srcWidth * srcHeight";e.Md(this.Kd);var ue=n.byteLength/(a*f);L=L||e.AlphaType.Unpremul,z=z||e.ColorType.RGBA_8888,ce=ce||e.ColorSpace.SRGB;var Fe=ue*a;return ue=S(n,"HEAPU8"),a=this._writePixels({width:a,height:f,colorType:z,alphaType:L,colorSpace:ce},ue,Fe,x,F),y(ue,n),a},e.ColorFilter.MakeBlend=function(n,a,f){return n=E(n),f=f||e.ColorSpace.SRGB,e.ColorFilter._MakeBlend(n,a,f)},e.ColorFilter.MakeMatrix=function(n){if(!n||n.length!==20)throw"invalid color matrix";var a=S(n,"HEAPF32"),f=e.ColorFilter._makeMatrix(a);return y(a,n),f},e.ContourMeasure.prototype.getPosTan=function(n,a){return this._getPosTan(n,Qe),n=Wt.toTypedArray(),a?(a.set(n),a):n.slice()},e.ImageFilter.prototype.getOutputBounds=function(n,a,f){return n=he(n,Qe),a=V(a),this._getOutputBounds(n,a,an),a=Pn.toTypedArray(),f?(f.set(a),f):a.slice()},e.ImageFilter.MakeDropShadow=function(n,a,f,x,F,L){return F=E(F,Cr),e.ImageFilter._MakeDropShadow(n,a,f,x,F,L)},e.ImageFilter.MakeDropShadowOnly=function(n,a,f,x,F,L){return F=E(F,Cr),e.ImageFilter._MakeDropShadowOnly(n,a,f,x,F,L)},e.ImageFilter.MakeImage=function(n,a,f,x){if(f=he(f,Qe),x=he(x,vr),"B"in a&&"C"in a)return e.ImageFilter._MakeImageCubic(n,a.B,a.C,f,x);const F=a.filter;let L=e.MipmapMode.None;return"mipmap"in a&&(L=a.mipmap),e.ImageFilter._MakeImageOptions(n,F,L,f,x)},e.ImageFilter.MakeMatrixTransform=function(n,a,f){if(n=V(n),"B"in a&&"C"in a)return e.ImageFilter._MakeMatrixTransformCubic(n,a.B,a.C,f);const x=a.filter;let F=e.MipmapMode.None;return"mipmap"in a&&(F=a.mipmap),e.ImageFilter._MakeMatrixTransformOptions(n,x,F,f)},e.Paint.prototype.getColor=function(){return this._getColor(Cr),me(Cr)},e.Paint.prototype.setColor=function(n,a){a=a||null,n=E(n),this._setColor(n,a)},e.Paint.prototype.setColorComponents=function(n,a,f,x,F){F=F||null,n=ae(n,a,f,x),this._setColor(n,F)},e.Path.prototype.getPoint=function(n,a){return this._getPoint(n,Qe),n=Wt.toTypedArray(),a?(a[0]=n[0],a[1]=n[1],a):n.slice(0,2)},e.Picture.prototype.makeShader=function(n,a,f,x,F){return x=V(x),F=he(F),this._makeShader(n,a,f,x,F)},e.Picture.prototype.cullRect=function(n){this._cullRect(Qe);var a=Wt.toTypedArray();return n?(n.set(a),n):a.slice()},e.PictureRecorder.prototype.beginRecording=function(n,a){return n=he(n),this._beginRecording(n,!!a)},e.Surface.prototype.getCanvas=function(){var n=this._getCanvas();return n.Kd=this.Kd,n},e.Surface.prototype.makeImageSnapshot=function(n){return e.Md(this.Kd),n=S(n,"HEAP32",an),this._makeImageSnapshot(n)},e.Surface.prototype.makeSurface=function(n){return e.Md(this.Kd),n=this._makeSurface(n),n.Kd=this.Kd,n},e.Surface.prototype.Gf=function(n,a){return this.He||(this.He=this.getCanvas()),requestAnimationFrame((function(){e.Md(this.Kd),n(this.He),this.flush(a)}).bind(this))},e.Surface.prototype.requestAnimationFrame||(e.Surface.prototype.requestAnimationFrame=e.Surface.prototype.Gf),e.Surface.prototype.Cf=function(n,a){this.He||(this.He=this.getCanvas()),requestAnimationFrame((function(){e.Md(this.Kd),n(this.He),this.flush(a),this.dispose()}).bind(this))},e.Surface.prototype.drawOnce||(e.Surface.prototype.drawOnce=e.Surface.prototype.Cf),e.PathEffect.MakeDash=function(n,a){if(a||(a=0),!n.length||n.length%2===1)throw"Intervals array must have even length";var f=S(n,"HEAPF32");return a=e.PathEffect._MakeDash(f,n.length,a),y(f,n),a},e.PathEffect.MakeLine2D=function(n,a){return a=V(a),e.PathEffect._MakeLine2D(n,a)},e.PathEffect.MakePath2D=function(n,a){return n=V(n),e.PathEffect._MakePath2D(n,a)},e.Shader.MakeColor=function(n,a){return a=a||null,n=E(n),e.Shader._MakeColor(n,a)},e.Shader.Blend=e.Shader.MakeBlend,e.Shader.Color=e.Shader.MakeColor,e.Shader.MakeLinearGradient=function(n,a,f,x,F,L,z,ce){ce=ce||null;var ue=B(f),Fe=S(x,"HEAPF32");z=z||0,L=V(L);var Ee=Wt.toTypedArray();return Ee.set(n),Ee.set(a,2),n=e.Shader._MakeLinearGradient(Qe,ue.be,ue.colorType,Fe,ue.count,F,z,L,ce),y(ue.be,f),x&&y(Fe,x),n},e.Shader.MakeRadialGradient=function(n,a,f,x,F,L,z,ce){ce=ce||null;var ue=B(f),Fe=S(x,"HEAPF32");return z=z||0,L=V(L),n=e.Shader._MakeRadialGradient(n[0],n[1],a,ue.be,ue.colorType,Fe,ue.count,F,z,L,ce),y(ue.be,f),x&&y(Fe,x),n},e.Shader.MakeSweepGradient=function(n,a,f,x,F,L,z,ce,ue,Fe){Fe=Fe||null;var Ee=B(f),b=S(x,"HEAPF32");return z=z||0,ce=ce||0,ue=ue||360,L=V(L),n=e.Shader._MakeSweepGradient(n,a,Ee.be,Ee.colorType,b,Ee.count,F,ce,ue,z,L,Fe),y(Ee.be,f),x&&y(b,x),n},e.Shader.MakeTwoPointConicalGradient=function(n,a,f,x,F,L,z,ce,ue,Fe){Fe=Fe||null;var Ee=B(F),b=S(L,"HEAPF32");ue=ue||0,ce=V(ce);var O=Wt.toTypedArray();return O.set(n),O.set(f,2),n=e.Shader._MakeTwoPointConicalGradient(Qe,a,x,Ee.be,Ee.colorType,b,Ee.count,z,ue,ce,Fe),y(Ee.be,F),L&&y(b,L),n},e.Vertices.prototype.bounds=function(n){this._bounds(Qe);var a=Wt.toTypedArray();return n?(n.set(a),n):a.slice()},e.Td&&e.Td.forEach(function(n){n()})},e.computeTonalColors=function(i){var n=S(i.ambient,"HEAPF32"),a=S(i.spot,"HEAPF32");this._computeTonalColors(n,a);var f={ambient:me(n),spot:me(a)};return y(n,i.ambient),y(a,i.spot),f},e.LTRBRect=function(i,n,a,f){return Float32Array.of(i,n,a,f)},e.XYWHRect=function(i,n,a,f){return Float32Array.of(i,n,i+a,n+f)},e.LTRBiRect=function(i,n,a,f){return Int32Array.of(i,n,a,f)},e.XYWHiRect=function(i,n,a,f){return Int32Array.of(i,n,i+a,n+f)},e.RRectXY=function(i,n,a){return Float32Array.of(i[0],i[1],i[2],i[3],n,a,n,a,n,a,n,a)},e.MakeAnimatedImageFromEncoded=function(i){i=new Uint8Array(i);var n=e._malloc(i.byteLength);return e.HEAPU8.set(i,n),(i=e._decodeAnimatedImage(n,i.byteLength))?i:null},e.MakeImageFromEncoded=function(i){i=new Uint8Array(i);var n=e._malloc(i.byteLength);return e.HEAPU8.set(i,n),(i=e._decodeImage(n,i.byteLength))?i:null};var sn=null;e.MakeImageFromCanvasImageSource=function(i){var n=i.width,a=i.height;sn||(sn=document.createElement("canvas")),sn.width=n,sn.height=a;var f=sn.getContext("2d",{willReadFrequently:!0});return f.drawImage(i,0,0),i=f.getImageData(0,0,n,a),e.MakeImage({width:n,height:a,alphaType:e.AlphaType.Unpremul,colorType:e.ColorType.RGBA_8888,colorSpace:e.ColorSpace.SRGB},i.data,4*n)},e.MakeImage=function(i,n,a){var f=e._malloc(n.length);return e.HEAPU8.set(n,f),e._MakeImage(i,f,n.length,a)},e.MakeVertices=function(i,n,a,f,x,F){var L=x&&x.length||0,z=0;return a&&a.length&&(z|=1),f&&f.length&&(z|=2),F===void 0||F||(z|=4),i=new e._VerticesBuilder(i,n.length/2,L,z),S(n,"HEAPF32",i.positions()),i.texCoords()&&S(a,"HEAPF32",i.texCoords()),i.colors()&&S(h(f),"HEAPU32",i.colors()),i.indices()&&S(x,"HEAPU16",i.indices()),i.detach()},e.Matrix={},e.Matrix.identity=function(){return r(3)},e.Matrix.invert=function(i){var n=i[0]*i[4]*i[8]+i[1]*i[5]*i[6]+i[2]*i[3]*i[7]-i[2]*i[4]*i[6]-i[1]*i[3]*i[8]-i[0]*i[5]*i[7];return n?[(i[4]*i[8]-i[5]*i[7])/n,(i[2]*i[7]-i[1]*i[8])/n,(i[1]*i[5]-i[2]*i[4])/n,(i[5]*i[6]-i[3]*i[8])/n,(i[0]*i[8]-i[2]*i[6])/n,(i[2]*i[3]-i[0]*i[5])/n,(i[3]*i[7]-i[4]*i[6])/n,(i[1]*i[6]-i[0]*i[7])/n,(i[0]*i[4]-i[1]*i[3])/n]:null},e.Matrix.mapPoints=function(i,n){for(var a=0;a<n.length;a+=2){var f=n[a],x=n[a+1],F=i[6]*f+i[7]*x+i[8],L=i[3]*f+i[4]*x+i[5];n[a]=(i[0]*f+i[1]*x+i[2])/F,n[a+1]=L/F}return n},e.Matrix.multiply=function(){return on(3,arguments)},e.Matrix.rotated=function(i,n,a){n=n||0,a=a||0;var f=Math.sin(i);return i=Math.cos(i),[i,-f,ot(f,a,1-i,n),f,i,ot(-f,n,1-i,a),0,0,1]},e.Matrix.scaled=function(i,n,a,f){a=a||0,f=f||0;var x=t([i,n],r(3),3,0,1);return t([a-i*a,f-n*f],x,3,2,0)},e.Matrix.skewed=function(i,n,a,f){a=a||0,f=f||0;var x=t([i,n],r(3),3,1,-1);return t([-i*a,-n*f],x,3,2,0)},e.Matrix.translated=function(i,n){return t(arguments,r(3),3,2,0)},e.Vector={},e.Vector.dot=function(i,n){return i.map(function(a,f){return a*n[f]}).reduce(function(a,f){return a+f})},e.Vector.lengthSquared=function(i){return e.Vector.dot(i,i)},e.Vector.length=function(i){return Math.sqrt(e.Vector.lengthSquared(i))},e.Vector.mulScalar=function(i,n){return i.map(function(a){return a*n})},e.Vector.add=function(i,n){return i.map(function(a,f){return a+n[f]})},e.Vector.sub=function(i,n){return i.map(function(a,f){return a-n[f]})},e.Vector.dist=function(i,n){return e.Vector.length(e.Vector.sub(i,n))},e.Vector.normalize=function(i){return e.Vector.mulScalar(i,1/e.Vector.length(i))},e.Vector.cross=function(i,n){return[i[1]*n[2]-i[2]*n[1],i[2]*n[0]-i[0]*n[2],i[0]*n[1]-i[1]*n[0]]},e.M44={},e.M44.identity=function(){return r(4)},e.M44.translated=function(i){return t(i,r(4),4,3,0)},e.M44.scaled=function(i){return t(i,r(4),4,0,1)},e.M44.rotated=function(i,n){return e.M44.rotatedUnitSinCos(e.Vector.normalize(i),Math.sin(n),Math.cos(n))},e.M44.rotatedUnitSinCos=function(i,n,a){var f=i[0],x=i[1];i=i[2];var F=1-a;return[F*f*f+a,F*f*x-n*i,F*f*i+n*x,0,F*f*x+n*i,F*x*x+a,F*x*i-n*f,0,F*f*i-n*x,F*x*i+n*f,F*i*i+a,0,0,0,0,1]},e.M44.lookat=function(i,n,a){n=e.Vector.normalize(e.Vector.sub(n,i)),a=e.Vector.normalize(a),a=e.Vector.normalize(e.Vector.cross(n,a));var f=e.M44.identity();return t(a,f,4,0,0),t(e.Vector.cross(a,n),f,4,1,0),t(e.Vector.mulScalar(n,-1),f,4,2,0),t(i,f,4,3,0),i=e.M44.invert(f),i===null?e.M44.identity():i},e.M44.perspective=function(i,n,a){var f=1/(n-i);return a/=2,a=Math.cos(a)/Math.sin(a),[a,0,0,0,0,a,0,0,0,0,(n+i)*f,2*n*i*f,0,0,-1,1]},e.M44.rc=function(i,n,a){return i[4*n+a]},e.M44.multiply=function(){return on(4,arguments)},e.M44.invert=function(i){var n=i[0],a=i[4],f=i[8],x=i[12],F=i[1],L=i[5],z=i[9],ce=i[13],ue=i[2],Fe=i[6],Ee=i[10],b=i[14],O=i[3],ge=i[7],Ie=i[11];i=i[15];var qe=n*L-a*F,Mt=n*z-f*F,kt=n*ce-x*F,ct=a*z-f*L,D=a*ce-x*L,c=f*ce-x*z,w=ue*ge-Fe*O,M=ue*Ie-Ee*O,R=ue*i-b*O,I=Fe*Ie-Ee*ge,N=Fe*i-b*ge,ne=Ee*i-b*Ie,je=qe*ne-Mt*N+kt*I+ct*R-D*M+c*w,Ve=1/je;return je===0||Ve===1/0?null:(qe*=Ve,Mt*=Ve,kt*=Ve,ct*=Ve,D*=Ve,c*=Ve,w*=Ve,M*=Ve,R*=Ve,I*=Ve,N*=Ve,ne*=Ve,n=[L*ne-z*N+ce*I,z*R-F*ne-ce*M,F*N-L*R+ce*w,L*M-F*I-z*w,f*N-a*ne-x*I,n*ne-f*R+x*M,a*R-n*N-x*w,n*I-a*M+f*w,ge*c-Ie*D+i*ct,Ie*kt-O*c-i*Mt,O*D-ge*kt+i*qe,ge*Mt-O*ct-Ie*qe,Ee*D-Fe*c-b*ct,ue*c-Ee*kt+b*Mt,Fe*kt-ue*D-b*qe,ue*ct-Fe*Mt+Ee*qe],n.every(function(tr){return!isNaN(tr)&&tr!==1/0&&tr!==-1/0})?n:null)},e.M44.transpose=function(i){return[i[0],i[4],i[8],i[12],i[1],i[5],i[9],i[13],i[2],i[6],i[10],i[14],i[3],i[7],i[11],i[15]]},e.M44.mustInvert=function(i){if(i=e.M44.invert(i),i===null)throw"Matrix not invertible";return i},e.M44.setupCamera=function(i,n,a){var f=e.M44.lookat(a.eye,a.coa,a.up);return a=e.M44.perspective(a.near,a.far,a.angle),n=[(i[2]-i[0])/2,(i[3]-i[1])/2,n],i=e.M44.multiply(e.M44.translated([(i[0]+i[2])/2,(i[1]+i[3])/2,0]),e.M44.scaled(n)),e.M44.multiply(i,a,f,e.M44.mustInvert(i))},e.ColorMatrix={},e.ColorMatrix.identity=function(){var i=new Float32Array(20);return i[0]=1,i[6]=1,i[12]=1,i[18]=1,i},e.ColorMatrix.scaled=function(i,n,a,f){var x=new Float32Array(20);return x[0]=i,x[6]=n,x[12]=a,x[18]=f,x};var la=[[6,7,11,12],[0,10,2,12],[0,1,5,6]];e.ColorMatrix.rotated=function(i,n,a){var f=e.ColorMatrix.identity();return i=la[i],f[i[0]]=a,f[i[1]]=n,f[i[2]]=-n,f[i[3]]=a,f},e.ColorMatrix.postTranslate=function(i,n,a,f,x){return i[4]+=n,i[9]+=a,i[14]+=f,i[19]+=x,i},e.ColorMatrix.concat=function(i,n){for(var a=new Float32Array(20),f=0,x=0;20>x;x+=5){for(var F=0;4>F;F++)a[f++]=i[x]*n[F]+i[x+1]*n[F+5]+i[x+2]*n[F+10]+i[x+3]*n[F+15];a[f++]=i[x]*n[4]+i[x+1]*n[9]+i[x+2]*n[14]+i[x+3]*n[19]+i[x+4]}return a},function(i){i.Td=i.Td||[],i.Td.push(function(){function n(b){return b&&(b.dir=b.dir===0?i.TextDirection.RTL:i.TextDirection.LTR),b}function a(b){if(!b||!b.length)return[];for(var O=[],ge=0;ge<b.length;ge+=5){var Ie=i.LTRBRect(b[ge],b[ge+1],b[ge+2],b[ge+3]),qe=i.TextDirection.LTR;b[ge+4]===0&&(qe=i.TextDirection.RTL),O.push({rect:Ie,dir:qe})}return i._free(b.byteOffset),O}function f(b){return b=b||{},b.weight===void 0&&(b.weight=i.FontWeight.Normal),b.width=b.width||i.FontWidth.Normal,b.slant=b.slant||i.FontSlant.Upright,b}function x(b){if(!b||!b.length)return xe;for(var O=[],ge=0;ge<b.length;ge++){var Ie=F(b[ge]);O.push(Ie)}return S(O,"HEAPU32")}function F(b){if(ce[b])return ce[b];var O=jt(b)+1,ge=i._malloc(O);return Dt(b,Q,ge,O),ce[b]=ge}function L(b){if(b._colorPtr=E(b.color),b._foregroundColorPtr=xe,b._backgroundColorPtr=xe,b._decorationColorPtr=xe,b.foregroundColor&&(b._foregroundColorPtr=E(b.foregroundColor,ue)),b.backgroundColor&&(b._backgroundColorPtr=E(b.backgroundColor,Fe)),b.decorationColor&&(b._decorationColorPtr=E(b.decorationColor,Ee)),Array.isArray(b.fontFamilies)&&b.fontFamilies.length?(b._fontFamiliesPtr=x(b.fontFamilies),b._fontFamiliesLen=b.fontFamilies.length):(b._fontFamiliesPtr=xe,b._fontFamiliesLen=0),b.locale){var O=b.locale;b._localePtr=F(O),b._localeLen=jt(O)+1}else b._localePtr=xe,b._localeLen=0;if(Array.isArray(b.shadows)&&b.shadows.length){O=b.shadows;var ge=O.map(function(D){return D.color||i.BLACK}),Ie=O.map(function(D){return D.blurRadius||0});b._shadowLen=O.length;for(var qe=i._malloc(8*O.length),Mt=qe/4,kt=0;kt<O.length;kt++){var ct=O[kt].offset||[0,0];i.HEAPF32[Mt]=ct[0],i.HEAPF32[Mt+1]=ct[1],Mt+=2}b._shadowColorsPtr=B(ge).be,b._shadowOffsetsPtr=qe,b._shadowBlurRadiiPtr=S(Ie,"HEAPF32")}else b._shadowLen=0,b._shadowColorsPtr=xe,b._shadowOffsetsPtr=xe,b._shadowBlurRadiiPtr=xe;Array.isArray(b.fontFeatures)&&b.fontFeatures.length?(O=b.fontFeatures,ge=O.map(function(D){return D.name}),Ie=O.map(function(D){return D.value}),b._fontFeatureLen=O.length,b._fontFeatureNamesPtr=x(ge),b._fontFeatureValuesPtr=S(Ie,"HEAPU32")):(b._fontFeatureLen=0,b._fontFeatureNamesPtr=xe,b._fontFeatureValuesPtr=xe),Array.isArray(b.fontVariations)&&b.fontVariations.length?(O=b.fontVariations,ge=O.map(function(D){return D.axis}),Ie=O.map(function(D){return D.value}),b._fontVariationLen=O.length,b._fontVariationAxesPtr=x(ge),b._fontVariationValuesPtr=S(Ie,"HEAPF32")):(b._fontVariationLen=0,b._fontVariationAxesPtr=xe,b._fontVariationValuesPtr=xe)}function z(b){i._free(b._fontFamiliesPtr),i._free(b._shadowColorsPtr),i._free(b._shadowOffsetsPtr),i._free(b._shadowBlurRadiiPtr),i._free(b._fontFeatureNamesPtr),i._free(b._fontFeatureValuesPtr),i._free(b._fontVariationAxesPtr),i._free(b._fontVariationValuesPtr)}i.Paragraph.prototype.getRectsForRange=function(b,O,ge,Ie){return b=this._getRectsForRange(b,O,ge,Ie),a(b)},i.Paragraph.prototype.getRectsForPlaceholders=function(){var b=this._getRectsForPlaceholders();return a(b)},i.Paragraph.prototype.getGlyphInfoAt=function(b){return n(this._getGlyphInfoAt(b))},i.Paragraph.prototype.getClosestGlyphInfoAtCoordinate=function(b,O){return n(this._getClosestGlyphInfoAtCoordinate(b,O))},i.TypefaceFontProvider.prototype.registerFont=function(b,O){if(b=i.Typeface.MakeFreeTypeFaceFromData(b),!b)return null;O=F(O),this._registerFont(b,O)},i.ParagraphStyle=function(b){if(b.disableHinting=b.disableHinting||!1,b.ellipsis){var O=b.ellipsis;b._ellipsisPtr=F(O),b._ellipsisLen=jt(O)+1}else b._ellipsisPtr=xe,b._ellipsisLen=0;return b.heightMultiplier==null&&(b.heightMultiplier=-1),b.maxLines=b.maxLines||0,b.replaceTabCharacters=b.replaceTabCharacters||!1,O=(O=b.strutStyle)||{},O.strutEnabled=O.strutEnabled||!1,O.strutEnabled&&Array.isArray(O.fontFamilies)&&O.fontFamilies.length?(O._fontFamiliesPtr=x(O.fontFamilies),O._fontFamiliesLen=O.fontFamilies.length):(O._fontFamiliesPtr=xe,O._fontFamiliesLen=0),O.fontStyle=f(O.fontStyle),O.fontSize==null&&(O.fontSize=-1),O.heightMultiplier==null&&(O.heightMultiplier=-1),O.halfLeading=O.halfLeading||!1,O.leading=O.leading||0,O.forceStrutHeight=O.forceStrutHeight||!1,b.strutStyle=O,b.textAlign=b.textAlign||i.TextAlign.Start,b.textDirection=b.textDirection||i.TextDirection.LTR,b.textHeightBehavior=b.textHeightBehavior||i.TextHeightBehavior.All,b.textStyle=i.TextStyle(b.textStyle),b.applyRoundingHack=b.applyRoundingHack!==!1,b},i.TextStyle=function(b){return b.color||(b.color=i.BLACK),b.decoration=b.decoration||0,b.decorationThickness=b.decorationThickness||0,b.decorationStyle=b.decorationStyle||i.DecorationStyle.Solid,b.textBaseline=b.textBaseline||i.TextBaseline.Alphabetic,b.fontSize==null&&(b.fontSize=-1),b.letterSpacing=b.letterSpacing||0,b.wordSpacing=b.wordSpacing||0,b.heightMultiplier==null&&(b.heightMultiplier=-1),b.halfLeading=b.halfLeading||!1,b.fontStyle=f(b.fontStyle),b};var ce={},ue=i._malloc(16),Fe=i._malloc(16),Ee=i._malloc(16);i.ParagraphBuilder.Make=function(b,O){return L(b.textStyle),O=i.ParagraphBuilder._Make(b,O),z(b.textStyle),O},i.ParagraphBuilder.MakeFromFontProvider=function(b,O){return L(b.textStyle),O=i.ParagraphBuilder._MakeFromFontProvider(b,O),z(b.textStyle),O},i.ParagraphBuilder.MakeFromFontCollection=function(b,O){return L(b.textStyle),O=i.ParagraphBuilder._MakeFromFontCollection(b,O),z(b.textStyle),O},i.ParagraphBuilder.ShapeText=function(b,O,ge){let Ie=0;for(const qe of O)Ie+=qe.length;if(Ie!==b.length)throw"Accumulated block lengths must equal text.length";return i.ParagraphBuilder._ShapeText(b,O,ge)},i.ParagraphBuilder.prototype.pushStyle=function(b){L(b),this._pushStyle(b),z(b)},i.ParagraphBuilder.prototype.pushPaintStyle=function(b,O,ge){L(b),this._pushPaintStyle(b,O,ge),z(b)},i.ParagraphBuilder.prototype.addPlaceholder=function(b,O,ge,Ie,qe){ge=ge||i.PlaceholderAlignment.Baseline,Ie=Ie||i.TextBaseline.Alphabetic,this._addPlaceholder(b||0,O||0,ge,Ie,qe||0)},i.ParagraphBuilder.prototype.setWordsUtf8=function(b){var O=S(b,"HEAPU32");this._setWordsUtf8(O,b&&b.length||0),y(O,b)},i.ParagraphBuilder.prototype.setWordsUtf16=function(b){var O=S(b,"HEAPU32");this._setWordsUtf16(O,b&&b.length||0),y(O,b)},i.ParagraphBuilder.prototype.setGraphemeBreaksUtf8=function(b){var O=S(b,"HEAPU32");this._setGraphemeBreaksUtf8(O,b&&b.length||0),y(O,b)},i.ParagraphBuilder.prototype.setGraphemeBreaksUtf16=function(b){var O=S(b,"HEAPU32");this._setGraphemeBreaksUtf16(O,b&&b.length||0),y(O,b)},i.ParagraphBuilder.prototype.setLineBreaksUtf8=function(b){var O=S(b,"HEAPU32");this._setLineBreaksUtf8(O,b&&b.length||0),y(O,b)},i.ParagraphBuilder.prototype.setLineBreaksUtf16=function(b){var O=S(b,"HEAPU32");this._setLineBreaksUtf16(O,b&&b.length||0),y(O,b)}})}(u),e.Td=e.Td||[],e.Td.push(function(){e.Path.prototype.op=function(i,n){return this._op(i,n)?this:null},e.Path.prototype.simplify=function(){return this._simplify()?this:null}}),e.Td=e.Td||[],e.Td.push(function(){e.Canvas.prototype.drawText=function(i,n,a,f,x){var F=jt(i),L=e._malloc(F+1);Dt(i,Q,L,F+1),this._drawSimpleText(L,F,n,a,x,f),e._free(L)},e.Canvas.prototype.drawGlyphs=function(i,n,a,f,x,F){if(!(2*i.length<=n.length))throw"Not enough positions for the array of gyphs";e.Md(this.Kd);const L=S(i,"HEAPU16"),z=S(n,"HEAPF32");this._drawGlyphs(i.length,L,z,a,f,x,F),y(z,n),y(L,i)},e.Font.prototype.getGlyphBounds=function(i,n,a){var f=S(i,"HEAPU16"),x=e._malloc(16*i.length);return this._getGlyphWidthBounds(f,i.length,xe,x,n||null),n=new Float32Array(e.HEAPU8.buffer,x,4*i.length),y(f,i),a?(a.set(n),e._free(x),a):(i=Float32Array.from(n),e._free(x),i)},e.Font.prototype.getGlyphIDs=function(i,n,a){n||(n=i.length);var f=jt(i)+1,x=e._malloc(f);return Dt(i,Q,x,f),i=e._malloc(2*n),n=this._getGlyphIDs(x,f-1,n,i),e._free(x),0>n?(e._free(i),null):(x=new Uint16Array(e.HEAPU8.buffer,i,n),a?(a.set(x),e._free(i),a):(a=Uint16Array.from(x),e._free(i),a))},e.Font.prototype.getGlyphIntercepts=function(i,n,a,f){var x=S(i,"HEAPU16"),F=S(n,"HEAPF32");return this._getGlyphIntercepts(x,i.length,!(i&&i._ck),F,n.length,!(n&&n._ck),a,f)},e.Font.prototype.getGlyphWidths=function(i,n,a){var f=S(i,"HEAPU16"),x=e._malloc(4*i.length);return this._getGlyphWidthBounds(f,i.length,x,xe,n||null),n=new Float32Array(e.HEAPU8.buffer,x,i.length),y(f,i),a?(a.set(n),e._free(x),a):(i=Float32Array.from(n),e._free(x),i)},e.FontMgr.FromData=function(){if(!arguments.length)return null;var i=arguments;if(i.length===1&&Array.isArray(i[0])&&(i=arguments[0]),!i.length)return null;for(var n=[],a=[],f=0;f<i.length;f++){var x=new Uint8Array(i[f]),F=S(x,"HEAPU8");n.push(F),a.push(x.byteLength)}return n=S(n,"HEAPU32"),a=S(a,"HEAPU32"),i=e.FontMgr._fromData(n,a,i.length),e._free(n),e._free(a),i},e.Typeface.MakeFreeTypeFaceFromData=function(i){i=new Uint8Array(i);var n=S(i,"HEAPU8");return(i=e.Typeface._MakeFreeTypeFaceFromData(n,i.byteLength))?i:null},e.Typeface.prototype.getGlyphIDs=function(i,n,a){n||(n=i.length);var f=jt(i)+1,x=e._malloc(f);return Dt(i,Q,x,f),i=e._malloc(2*n),n=this._getGlyphIDs(x,f-1,n,i),e._free(x),0>n?(e._free(i),null):(x=new Uint16Array(e.HEAPU8.buffer,i,n),a?(a.set(x),e._free(i),a):(a=Uint16Array.from(x),e._free(i),a))},e.TextBlob.MakeOnPath=function(i,n,a,f){if(i&&i.length&&n&&n.countPoints()){if(n.countPoints()===1)return this.MakeFromText(i,a);f||(f=0);var x=a.getGlyphIDs(i);x=a.getGlyphWidths(x);var F=[];n=new e.ContourMeasureIter(n,!1,1);for(var L=n.next(),z=new Float32Array(4),ce=0;ce<i.length&&L;ce++){var ue=x[ce];if(f+=ue/2,f>L.length()){if(L.delete(),L=n.next(),!L){i=i.substring(0,ce);break}f=ue/2}L.getPosTan(f,z);var Fe=z[2],Ee=z[3];F.push(Fe,Ee,z[0]-ue/2*Fe,z[1]-ue/2*Ee),f+=ue/2}return i=this.MakeFromRSXform(i,F,a),L&&L.delete(),n.delete(),i}},e.TextBlob.MakeFromRSXform=function(i,n,a){var f=jt(i)+1,x=e._malloc(f);return Dt(i,Q,x,f),i=S(n,"HEAPF32"),a=e.TextBlob._MakeFromRSXform(x,f-1,i,a),e._free(x),a||null},e.TextBlob.MakeFromRSXformGlyphs=function(i,n,a){var f=S(i,"HEAPU16");return n=S(n,"HEAPF32"),a=e.TextBlob._MakeFromRSXformGlyphs(f,2*i.length,n,a),y(f,i),a||null},e.TextBlob.MakeFromGlyphs=function(i,n){var a=S(i,"HEAPU16");return n=e.TextBlob._MakeFromGlyphs(a,2*i.length,n),y(a,i),n||null},e.TextBlob.MakeFromText=function(i,n){var a=jt(i)+1,f=e._malloc(a);return Dt(i,Q,f,a),i=e.TextBlob._MakeFromText(f,a-1,n),e._free(f),i||null},e.MallocGlyphIDs=function(i){return e.Malloc(Uint16Array,i)}}),e.Td=e.Td||[],e.Td.push(function(){e.MakePicture=function(i){i=new Uint8Array(i);var n=e._malloc(i.byteLength);return e.HEAPU8.set(i,n),(i=e._MakePicture(n,i.byteLength))?i:null}}),e.Td=e.Td||[],e.Td.push(function(){e.RuntimeEffect.Make=function(i,n){return e.RuntimeEffect._Make(i,{onError:n||function(a){console.log("RuntimeEffect error",a)}})},e.RuntimeEffect.MakeForBlender=function(i,n){return e.RuntimeEffect._MakeForBlender(i,{onError:n||function(a){console.log("RuntimeEffect error",a)}})},e.RuntimeEffect.prototype.makeShader=function(i,n){var a=!i._ck,f=S(i,"HEAPF32");return n=V(n),this._makeShader(f,4*i.length,a,n)},e.RuntimeEffect.prototype.makeShaderWithChildren=function(i,n,a){var f=!i._ck,x=S(i,"HEAPF32");a=V(a);for(var F=[],L=0;L<n.length;L++)F.push(n[L].Jd.Rd);return n=S(F,"HEAPU32"),this._makeShaderWithChildren(x,4*i.length,f,n,F.length,a)},e.RuntimeEffect.prototype.makeBlender=function(i){var n=!i._ck,a=S(i,"HEAPF32");return this._makeBlender(a,4*i.length,n)}}),function(){function i(D){for(var c=0;c<D.length;c++)if(D[c]!==void 0&&!Number.isFinite(D[c]))return!1;return!0}function n(D){var c=e.getColorComponents(D);D=c[0];var w=c[1],M=c[2];return c=c[3],c===1?(D=D.toString(16).toLowerCase(),w=w.toString(16).toLowerCase(),M=M.toString(16).toLowerCase(),D=D.length===1?"0"+D:D,w=w.length===1?"0"+w:w,M=M.length===1?"0"+M:M,"#"+D+w+M):(c=c===0||c===1?c:c.toFixed(8),"rgba("+D+", "+w+", "+M+", "+c+")")}function a(D){return e.parseColorString(D,Mt)}function f(D){if(D=kt.exec(D),!D)return null;var c=parseFloat(D[4]),w=16;switch(D[5]){case"em":case"rem":w=16*c;break;case"pt":w=4*c/3;break;case"px":w=c;break;case"pc":w=16*c;break;case"in":w=96*c;break;case"cm":w=96*c/2.54;break;case"mm":w=3.7795275590551185*c;break;case"q":w=.9448818897637796*c;break;case"%":w=.21333333333333335*c}return{style:D[1],variant:D[2],weight:D[3],sizePx:w,family:D[6].trim()}}function x(D){this.Ld=D,this.Od=new e.Paint,this.Od.setAntiAlias(!0),this.Od.setStrokeMiter(10),this.Od.setStrokeCap(e.StrokeCap.Butt),this.Od.setStrokeJoin(e.StrokeJoin.Miter),this.Re="10px monospace",this.me=new e.Font(null,10),this.me.setSubpixel(!0),this.ae=this.ge=e.BLACK,this.ve=0,this.Je=e.TRANSPARENT,this.xe=this.we=0,this.Ke=this.ie=1,this.Ie=0,this.ue=[],this.Nd=e.BlendMode.SrcOver,this.Od.setStrokeWidth(this.Ke),this.Od.setBlendMode(this.Nd),this.Qd=new e.Path,this.Sd=e.Matrix.identity(),this.lf=[],this.Be=[],this.le=function(){this.Qd.delete(),this.Od.delete(),this.me.delete(),this.Be.forEach(function(c){c.le()})},Object.defineProperty(this,"currentTransform",{enumerable:!0,get:function(){return{a:this.Sd[0],c:this.Sd[1],e:this.Sd[2],b:this.Sd[3],d:this.Sd[4],f:this.Sd[5]}},set:function(c){c.a&&this.setTransform(c.a,c.b,c.c,c.d,c.e,c.f)}}),Object.defineProperty(this,"fillStyle",{enumerable:!0,get:function(){return o(this.ae)?n(this.ae):this.ae},set:function(c){typeof c=="string"?this.ae=a(c):c.te&&(this.ae=c)}}),Object.defineProperty(this,"font",{enumerable:!0,get:function(){return this.Re},set:function(c){var w=f(c),M=w.family;w.typeface=ct[M]?ct[M][(w.style||"normal")+"|"+(w.variant||"normal")+"|"+(w.weight||"normal")]||ct[M]["*"]:null,w&&(this.me.setSize(w.sizePx),this.me.setTypeface(w.typeface),this.Re=c)}}),Object.defineProperty(this,"globalAlpha",{enumerable:!0,get:function(){return this.ie},set:function(c){!isFinite(c)||0>c||1<c||(this.ie=c)}}),Object.defineProperty(this,"globalCompositeOperation",{enumerable:!0,get:function(){switch(this.Nd){case e.BlendMode.SrcOver:return"source-over";case e.BlendMode.DstOver:return"destination-over";case e.BlendMode.Src:return"copy";case e.BlendMode.Dst:return"destination";case e.BlendMode.Clear:return"clear";case e.BlendMode.SrcIn:return"source-in";case e.BlendMode.DstIn:return"destination-in";case e.BlendMode.SrcOut:return"source-out";case e.BlendMode.DstOut:return"destination-out";case e.BlendMode.SrcATop:return"source-atop";case e.BlendMode.DstATop:return"destination-atop";case e.BlendMode.Xor:return"xor";case e.BlendMode.Plus:return"lighter";case e.BlendMode.Multiply:return"multiply";case e.BlendMode.Screen:return"screen";case e.BlendMode.Overlay:return"overlay";case e.BlendMode.Darken:return"darken";case e.BlendMode.Lighten:return"lighten";case e.BlendMode.ColorDodge:return"color-dodge";case e.BlendMode.ColorBurn:return"color-burn";case e.BlendMode.HardLight:return"hard-light";case e.BlendMode.SoftLight:return"soft-light";case e.BlendMode.Difference:return"difference";case e.BlendMode.Exclusion:return"exclusion";case e.BlendMode.Hue:return"hue";case e.BlendMode.Saturation:return"saturation";case e.BlendMode.Color:return"color";case e.BlendMode.Luminosity:return"luminosity"}},set:function(c){switch(c){case"source-over":this.Nd=e.BlendMode.SrcOver;break;case"destination-over":this.Nd=e.BlendMode.DstOver;break;case"copy":this.Nd=e.BlendMode.Src;break;case"destination":this.Nd=e.BlendMode.Dst;break;case"clear":this.Nd=e.BlendMode.Clear;break;case"source-in":this.Nd=e.BlendMode.SrcIn;break;case"destination-in":this.Nd=e.BlendMode.DstIn;break;case"source-out":this.Nd=e.BlendMode.SrcOut;break;case"destination-out":this.Nd=e.BlendMode.DstOut;break;case"source-atop":this.Nd=e.BlendMode.SrcATop;break;case"destination-atop":this.Nd=e.BlendMode.DstATop;break;case"xor":this.Nd=e.BlendMode.Xor;break;case"lighter":this.Nd=e.BlendMode.Plus;break;case"plus-lighter":this.Nd=e.BlendMode.Plus;break;case"plus-darker":throw"plus-darker is not supported";case"multiply":this.Nd=e.BlendMode.Multiply;break;case"screen":this.Nd=e.BlendMode.Screen;break;case"overlay":this.Nd=e.BlendMode.Overlay;break;case"darken":this.Nd=e.BlendMode.Darken;break;case"lighten":this.Nd=e.BlendMode.Lighten;break;case"color-dodge":this.Nd=e.BlendMode.ColorDodge;break;case"color-burn":this.Nd=e.BlendMode.ColorBurn;break;case"hard-light":this.Nd=e.BlendMode.HardLight;break;case"soft-light":this.Nd=e.BlendMode.SoftLight;break;case"difference":this.Nd=e.BlendMode.Difference;break;case"exclusion":this.Nd=e.BlendMode.Exclusion;break;case"hue":this.Nd=e.BlendMode.Hue;break;case"saturation":this.Nd=e.BlendMode.Saturation;break;case"color":this.Nd=e.BlendMode.Color;break;case"luminosity":this.Nd=e.BlendMode.Luminosity;break;default:return}this.Od.setBlendMode(this.Nd)}}),Object.defineProperty(this,"imageSmoothingEnabled",{enumerable:!0,get:function(){return!0},set:function(){}}),Object.defineProperty(this,"imageSmoothingQuality",{enumerable:!0,get:function(){return"high"},set:function(){}}),Object.defineProperty(this,"lineCap",{enumerable:!0,get:function(){switch(this.Od.getStrokeCap()){case e.StrokeCap.Butt:return"butt";case e.StrokeCap.Round:return"round";case e.StrokeCap.Square:return"square"}},set:function(c){switch(c){case"butt":this.Od.setStrokeCap(e.StrokeCap.Butt);break;case"round":this.Od.setStrokeCap(e.StrokeCap.Round);break;case"square":this.Od.setStrokeCap(e.StrokeCap.Square)}}}),Object.defineProperty(this,"lineDashOffset",{enumerable:!0,get:function(){return this.Ie},set:function(c){isFinite(c)&&(this.Ie=c)}}),Object.defineProperty(this,"lineJoin",{enumerable:!0,get:function(){switch(this.Od.getStrokeJoin()){case e.StrokeJoin.Miter:return"miter";case e.StrokeJoin.Round:return"round";case e.StrokeJoin.Bevel:return"bevel"}},set:function(c){switch(c){case"miter":this.Od.setStrokeJoin(e.StrokeJoin.Miter);break;case"round":this.Od.setStrokeJoin(e.StrokeJoin.Round);break;case"bevel":this.Od.setStrokeJoin(e.StrokeJoin.Bevel)}}}),Object.defineProperty(this,"lineWidth",{enumerable:!0,get:function(){return this.Od.getStrokeWidth()},set:function(c){0>=c||!c||(this.Ke=c,this.Od.setStrokeWidth(c))}}),Object.defineProperty(this,"miterLimit",{enumerable:!0,get:function(){return this.Od.getStrokeMiter()},set:function(c){0>=c||!c||this.Od.setStrokeMiter(c)}}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,get:function(){return this.ve},set:function(c){0>c||!isFinite(c)||(this.ve=c)}}),Object.defineProperty(this,"shadowColor",{enumerable:!0,get:function(){return n(this.Je)},set:function(c){this.Je=a(c)}}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,get:function(){return this.we},set:function(c){isFinite(c)&&(this.we=c)}}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,get:function(){return this.xe},set:function(c){isFinite(c)&&(this.xe=c)}}),Object.defineProperty(this,"strokeStyle",{enumerable:!0,get:function(){return n(this.ge)},set:function(c){typeof c=="string"?this.ge=a(c):c.te&&(this.ge=c)}}),this.arc=function(c,w,M,R,I,N){b(this.Qd,c,w,M,M,0,R,I,N)},this.arcTo=function(c,w,M,R,I){ue(this.Qd,c,w,M,R,I)},this.beginPath=function(){this.Qd.delete(),this.Qd=new e.Path},this.bezierCurveTo=function(c,w,M,R,I,N){var ne=this.Qd;i([c,w,M,R,I,N])&&(ne.isEmpty()&&ne.moveTo(c,w),ne.cubicTo(c,w,M,R,I,N))},this.clearRect=function(c,w,M,R){this.Od.setStyle(e.PaintStyle.Fill),this.Od.setBlendMode(e.BlendMode.Clear),this.Ld.drawRect(e.XYWHRect(c,w,M,R),this.Od),this.Od.setBlendMode(this.Nd)},this.clip=function(c,w){typeof c=="string"?(w=c,c=this.Qd):c&&c.af&&(c=c.Ud),c||(c=this.Qd),c=c.copy(),w&&w.toLowerCase()==="evenodd"?c.setFillType(e.FillType.EvenOdd):c.setFillType(e.FillType.Winding),this.Ld.clipPath(c,e.ClipOp.Intersect,!0),c.delete()},this.closePath=function(){Fe(this.Qd)},this.createImageData=function(){if(arguments.length===1){var c=arguments[0];return new z(new Uint8ClampedArray(4*c.width*c.height),c.width,c.height)}if(arguments.length===2){c=arguments[0];var w=arguments[1];return new z(new Uint8ClampedArray(4*c*w),c,w)}throw"createImageData expects 1 or 2 arguments, got "+arguments.length},this.createLinearGradient=function(c,w,M,R){if(i(arguments)){var I=new ce(c,w,M,R);return this.Be.push(I),I}},this.createPattern=function(c,w){return c=new Ie(c,w),this.Be.push(c),c},this.createRadialGradient=function(c,w,M,R,I,N){if(i(arguments)){var ne=new qe(c,w,M,R,I,N);return this.Be.push(ne),ne}},this.drawImage=function(c){c instanceof L&&(c=c.tf());var w=this.Qe();if(arguments.length===3||arguments.length===5)var M=e.XYWHRect(arguments[1],arguments[2],arguments[3]||c.width(),arguments[4]||c.height()),R=e.XYWHRect(0,0,c.width(),c.height());else if(arguments.length===9)M=e.XYWHRect(arguments[5],arguments[6],arguments[7],arguments[8]),R=e.XYWHRect(arguments[1],arguments[2],arguments[3],arguments[4]);else throw"invalid number of args for drawImage, need 3, 5, or 9; got "+arguments.length;this.Ld.drawImageRect(c,R,M,w,!1),w.dispose()},this.ellipse=function(c,w,M,R,I,N,ne,je){b(this.Qd,c,w,M,R,I,N,ne,je)},this.Qe=function(){var c=this.Od.copy();if(c.setStyle(e.PaintStyle.Fill),o(this.ae)){var w=e.multiplyByAlpha(this.ae,this.ie);c.setColor(w)}else w=this.ae.te(this.Sd),c.setColor(e.Color(0,0,0,this.ie)),c.setShader(w);return c.dispose=function(){this.delete()},c},this.fill=function(c,w){if(typeof c=="string"?(w=c,c=this.Qd):c&&c.af&&(c=c.Ud),w==="evenodd")this.Qd.setFillType(e.FillType.EvenOdd);else{if(w!=="nonzero"&&w)throw"invalid fill rule";this.Qd.setFillType(e.FillType.Winding)}c||(c=this.Qd),w=this.Qe();var M=this.ye(w);M&&(this.Ld.save(),this.re(),this.Ld.drawPath(c,M),this.Ld.restore(),M.dispose()),this.Ld.drawPath(c,w),w.dispose()},this.fillRect=function(c,w,M,R){var I=this.Qe(),N=this.ye(I);N&&(this.Ld.save(),this.re(),this.Ld.drawRect(e.XYWHRect(c,w,M,R),N),this.Ld.restore(),N.dispose()),this.Ld.drawRect(e.XYWHRect(c,w,M,R),I),I.dispose()},this.fillText=function(c,w,M){var R=this.Qe();c=e.TextBlob.MakeFromText(c,this.me);var I=this.ye(R);I&&(this.Ld.save(),this.re(),this.Ld.drawTextBlob(c,w,M,I),this.Ld.restore(),I.dispose()),this.Ld.drawTextBlob(c,w,M,R),c.delete(),R.dispose()},this.getImageData=function(c,w,M,R){return(c=this.Ld.readPixels(c,w,{width:M,height:R,colorType:e.ColorType.RGBA_8888,alphaType:e.AlphaType.Unpremul,colorSpace:e.ColorSpace.SRGB}))?new z(new Uint8ClampedArray(c.buffer),M,R):null},this.getLineDash=function(){return this.ue.slice()},this.mf=function(c){var w=e.Matrix.invert(this.Sd);return e.Matrix.mapPoints(w,c),c},this.isPointInPath=function(c,w,M){var R=arguments;if(R.length===3)var I=this.Qd;else if(R.length===4)I=R[0],c=R[1],w=R[2],M=R[3];else throw"invalid arg count, need 3 or 4, got "+R.length;return!isFinite(c)||!isFinite(w)||(M=M||"nonzero",M!=="nonzero"&&M!=="evenodd")?!1:(R=this.mf([c,w]),c=R[0],w=R[1],I.setFillType(M==="nonzero"?e.FillType.Winding:e.FillType.EvenOdd),I.contains(c,w))},this.isPointInStroke=function(c,w){var M=arguments;if(M.length===2)var R=this.Qd;else if(M.length===3)R=M[0],c=M[1],w=M[2];else throw"invalid arg count, need 2 or 3, got "+M.length;return!isFinite(c)||!isFinite(w)?!1:(M=this.mf([c,w]),c=M[0],w=M[1],R=R.copy(),R.setFillType(e.FillType.Winding),R.stroke({width:this.lineWidth,miter_limit:this.miterLimit,cap:this.Od.getStrokeCap(),join:this.Od.getStrokeJoin(),precision:.3}),M=R.contains(c,w),R.delete(),M)},this.lineTo=function(c,w){O(this.Qd,c,w)},this.measureText=function(c){c=this.me.getGlyphIDs(c),c=this.me.getGlyphWidths(c);let w=0;for(const M of c)w+=M;return{width:w}},this.moveTo=function(c,w){var M=this.Qd;i([c,w])&&M.moveTo(c,w)},this.putImageData=function(c,w,M,R,I,N,ne){if(i([w,M,R,I,N,ne])){if(R===void 0)this.Ld.writePixels(c.data,c.width,c.height,w,M);else if(R=R||0,I=I||0,N=N||c.width,ne=ne||c.height,0>N&&(R+=N,N=Math.abs(N)),0>ne&&(I+=ne,ne=Math.abs(ne)),0>R&&(N+=R,R=0),0>I&&(ne+=I,I=0),!(0>=N||0>=ne)){c=e.MakeImage({width:c.width,height:c.height,alphaType:e.AlphaType.Unpremul,colorType:e.ColorType.RGBA_8888,colorSpace:e.ColorSpace.SRGB},c.data,4*c.width);var je=e.XYWHRect(R,I,N,ne);w=e.XYWHRect(w+R,M+I,N,ne),M=e.Matrix.invert(this.Sd),this.Ld.save(),this.Ld.concat(M),this.Ld.drawImageRect(c,je,w,null,!1),this.Ld.restore(),c.delete()}}},this.quadraticCurveTo=function(c,w,M,R){var I=this.Qd;i([c,w,M,R])&&(I.isEmpty()&&I.moveTo(c,w),I.quadTo(c,w,M,R))},this.rect=function(c,w,M,R){var I=this.Qd;c=e.XYWHRect(c,w,M,R),i(c)&&I.addRect(c)},this.resetTransform=function(){this.Qd.transform(this.Sd);var c=e.Matrix.invert(this.Sd);this.Ld.concat(c),this.Sd=this.Ld.getTotalMatrix()},this.restore=function(){var c=this.lf.pop();if(c){var w=e.Matrix.multiply(this.Sd,e.Matrix.invert(c.Jf));this.Qd.transform(w),this.Od.delete(),this.Od=c.ag,this.ue=c.Zf,this.Ke=c.mg,this.ge=c.lg,this.ae=c.fs,this.we=c.jg,this.xe=c.kg,this.ve=c.sb,this.Je=c.ig,this.ie=c.ga,this.Nd=c.Qf,this.Ie=c.$f,this.Re=c.Pf,this.Ld.restore(),this.Sd=this.Ld.getTotalMatrix()}},this.rotate=function(c){if(isFinite(c)){var w=e.Matrix.rotated(-c);this.Qd.transform(w),this.Ld.rotate(c/Math.PI*180,0,0),this.Sd=this.Ld.getTotalMatrix()}},this.save=function(){if(this.ae.se){var c=this.ae.se();this.Be.push(c)}else c=this.ae;if(this.ge.se){var w=this.ge.se();this.Be.push(w)}else w=this.ge;this.lf.push({Jf:this.Sd.slice(),Zf:this.ue.slice(),mg:this.Ke,lg:w,fs:c,jg:this.we,kg:this.xe,sb:this.ve,ig:this.Je,ga:this.ie,$f:this.Ie,Qf:this.Nd,ag:this.Od.copy(),Pf:this.Re}),this.Ld.save()},this.scale=function(c,w){if(i(arguments)){var M=e.Matrix.scaled(1/c,1/w);this.Qd.transform(M),this.Ld.scale(c,w),this.Sd=this.Ld.getTotalMatrix()}},this.setLineDash=function(c){for(var w=0;w<c.length;w++)if(!isFinite(c[w])||0>c[w])return;c.length%2===1&&Array.prototype.push.apply(c,c),this.ue=c},this.setTransform=function(c,w,M,R,I,N){i(arguments)&&(this.resetTransform(),this.transform(c,w,M,R,I,N))},this.re=function(){var c=e.Matrix.invert(this.Sd);this.Ld.concat(c),this.Ld.concat(e.Matrix.translated(this.we,this.xe)),this.Ld.concat(this.Sd)},this.ye=function(c){var w=e.multiplyByAlpha(this.Je,this.ie);if(!e.getColorComponents(w)[3]||!(this.ve||this.xe||this.we))return null;c=c.copy(),c.setColor(w);var M=e.MaskFilter.MakeBlur(e.BlurStyle.Normal,this.ve/2,!1);return c.setMaskFilter(M),c.dispose=function(){M.delete(),this.delete()},c},this.cf=function(){var c=this.Od.copy();if(c.setStyle(e.PaintStyle.Stroke),o(this.ge)){var w=e.multiplyByAlpha(this.ge,this.ie);c.setColor(w)}else w=this.ge.te(this.Sd),c.setColor(e.Color(0,0,0,this.ie)),c.setShader(w);if(c.setStrokeWidth(this.Ke),this.ue.length){var M=e.PathEffect.MakeDash(this.ue,this.Ie);c.setPathEffect(M)}return c.dispose=function(){M&&M.delete(),this.delete()},c},this.stroke=function(c){c=c?c.Ud:this.Qd;var w=this.cf(),M=this.ye(w);M&&(this.Ld.save(),this.re(),this.Ld.drawPath(c,M),this.Ld.restore(),M.dispose()),this.Ld.drawPath(c,w),w.dispose()},this.strokeRect=function(c,w,M,R){var I=this.cf(),N=this.ye(I);N&&(this.Ld.save(),this.re(),this.Ld.drawRect(e.XYWHRect(c,w,M,R),N),this.Ld.restore(),N.dispose()),this.Ld.drawRect(e.XYWHRect(c,w,M,R),I),I.dispose()},this.strokeText=function(c,w,M){var R=this.cf();c=e.TextBlob.MakeFromText(c,this.me);var I=this.ye(R);I&&(this.Ld.save(),this.re(),this.Ld.drawTextBlob(c,w,M,I),this.Ld.restore(),I.dispose()),this.Ld.drawTextBlob(c,w,M,R),c.delete(),R.dispose()},this.translate=function(c,w){if(i(arguments)){var M=e.Matrix.translated(-c,-w);this.Qd.transform(M),this.Ld.translate(c,w),this.Sd=this.Ld.getTotalMatrix()}},this.transform=function(c,w,M,R,I,N){c=[c,M,I,w,R,N,0,0,1],w=e.Matrix.invert(c),this.Qd.transform(w),this.Ld.concat(c),this.Sd=this.Ld.getTotalMatrix()},this.addHitRegion=function(){},this.clearHitRegions=function(){},this.drawFocusIfNeeded=function(){},this.removeHitRegion=function(){},this.scrollPathIntoView=function(){},Object.defineProperty(this,"canvas",{value:null,writable:!1})}function F(D){this.df=D,this.Kd=new x(D.getCanvas()),this.Se=[],this.decodeImage=function(c){if(c=e.MakeImageFromEncoded(c),!c)throw"Invalid input";return this.Se.push(c),new L(c)},this.loadFont=function(c,w){if(c=e.Typeface.MakeFreeTypeFaceFromData(c),!c)return null;this.Se.push(c);var M=(w.style||"normal")+"|"+(w.variant||"normal")+"|"+(w.weight||"normal");w=w.family,ct[w]||(ct[w]={"*":c}),ct[w][M]=c},this.makePath2D=function(c){return c=new ge(c),this.Se.push(c.Ud),c},this.getContext=function(c){return c==="2d"?this.Kd:null},this.toDataURL=function(c,w){this.df.flush();var M=this.df.makeImageSnapshot();if(M){c=c||"image/png";var R=e.ImageFormat.PNG;if(c==="image/jpeg"&&(R=e.ImageFormat.JPEG),w=M.encodeToBytes(R,w||.92)){if(M.delete(),c="data:"+c+";base64,",typeof Buffer<"u")w=Buffer.from(w).toString("base64");else{M=0,R=w.length;for(var I="",N;M<R;)N=w.slice(M,Math.min(M+32768,R)),I+=String.fromCharCode.apply(null,N),M+=32768;w=btoa(I)}return c+w}}},this.dispose=function(){this.Kd.le(),this.Se.forEach(function(c){c.delete()}),this.df.dispose()}}function L(D){this.width=D.width(),this.height=D.height(),this.naturalWidth=this.width,this.naturalHeight=this.height,this.tf=function(){return D}}function z(D,c,w){if(!c||w===0)throw"invalid dimensions, width and height must be non-zero";if(D.length%4)throw"arr must be a multiple of 4";w=w||D.length/(4*c),Object.defineProperty(this,"data",{value:D,writable:!1}),Object.defineProperty(this,"height",{value:w,writable:!1}),Object.defineProperty(this,"width",{value:c,writable:!1})}function ce(D,c,w,M){this.Wd=null,this.ce=[],this.Zd=[],this.addColorStop=function(R,I){if(0>R||1<R||!isFinite(R))throw"offset must be between 0 and 1 inclusively";I=a(I);var N=this.Zd.indexOf(R);if(N!==-1)this.ce[N]=I;else{for(N=0;N<this.Zd.length&&!(this.Zd[N]>R);N++);this.Zd.splice(N,0,R),this.ce.splice(N,0,I)}},this.se=function(){var R=new ce(D,c,w,M);return R.ce=this.ce.slice(),R.Zd=this.Zd.slice(),R},this.le=function(){this.Wd&&(this.Wd.delete(),this.Wd=null)},this.te=function(R){var I=[D,c,w,M];e.Matrix.mapPoints(R,I),R=I[0];var N=I[1],ne=I[2];return I=I[3],this.le(),this.Wd=e.Shader.MakeLinearGradient([R,N],[ne,I],this.ce,this.Zd,e.TileMode.Clamp)}}function ue(D,c,w,M,R,I){if(i([c,w,M,R,I])){if(0>I)throw"radii cannot be negative";D.isEmpty()&&D.moveTo(c,w),D.arcToTangent(c,w,M,R,I)}}function Fe(D){if(!D.isEmpty()){var c=D.getBounds();(c[3]-c[1]||c[2]-c[0])&&D.close()}}function Ee(D,c,w,M,R,I,N){N=(N-I)/Math.PI*180,I=I/Math.PI*180,c=e.LTRBRect(c-M,w-R,c+M,w+R),1e-5>Math.abs(Math.abs(N)-360)?(w=N/2,D.arcToOval(c,I,w,!1),D.arcToOval(c,I+w,w,!1)):D.arcToOval(c,I,N,!1)}function b(D,c,w,M,R,I,N,ne,je){if(i([c,w,M,R,I,N,ne])){if(0>M||0>R)throw"radii cannot be negative";var Ve=2*Math.PI,tr=N%Ve;0>tr&&(tr+=Ve);var ln=tr-N;N=tr,ne+=ln,!je&&ne-N>=Ve?ne=N+Ve:je&&N-ne>=Ve?ne=N-Ve:!je&&N>ne?ne=N+(Ve-(N-ne)%Ve):je&&N<ne&&(ne=N-(Ve-(ne-N)%Ve)),I?(je=e.Matrix.rotated(I,c,w),I=e.Matrix.rotated(-I,c,w),D.transform(I),Ee(D,c,w,M,R,N,ne),D.transform(je)):Ee(D,c,w,M,R,N,ne)}}function O(D,c,w){i([c,w])&&(D.isEmpty()&&D.moveTo(c,w),D.lineTo(c,w))}function ge(D){this.Ud=null,this.Ud=typeof D=="string"?e.Path.MakeFromSVGString(D):D&&D.af?D.Ud.copy():new e.Path,this.af=function(){return this.Ud},this.addPath=function(c,w){w||(w={a:1,c:0,e:0,b:0,d:1,f:0}),this.Ud.addPath(c.Ud,[w.a,w.c,w.e,w.b,w.d,w.f])},this.arc=function(c,w,M,R,I,N){b(this.Ud,c,w,M,M,0,R,I,N)},this.arcTo=function(c,w,M,R,I){ue(this.Ud,c,w,M,R,I)},this.bezierCurveTo=function(c,w,M,R,I,N){var ne=this.Ud;i([c,w,M,R,I,N])&&(ne.isEmpty()&&ne.moveTo(c,w),ne.cubicTo(c,w,M,R,I,N))},this.closePath=function(){Fe(this.Ud)},this.ellipse=function(c,w,M,R,I,N,ne,je){b(this.Ud,c,w,M,R,I,N,ne,je)},this.lineTo=function(c,w){O(this.Ud,c,w)},this.moveTo=function(c,w){var M=this.Ud;i([c,w])&&M.moveTo(c,w)},this.quadraticCurveTo=function(c,w,M,R){var I=this.Ud;i([c,w,M,R])&&(I.isEmpty()&&I.moveTo(c,w),I.quadTo(c,w,M,R))},this.rect=function(c,w,M,R){var I=this.Ud;c=e.XYWHRect(c,w,M,R),i(c)&&I.addRect(c)}}function Ie(D,c){switch(this.Wd=null,D instanceof L&&(D=D.tf()),this.Ef=D,this._transform=e.Matrix.identity(),c===""&&(c="repeat"),c){case"repeat-x":this.ze=e.TileMode.Repeat,this.Ae=e.TileMode.Decal;break;case"repeat-y":this.ze=e.TileMode.Decal,this.Ae=e.TileMode.Repeat;break;case"repeat":this.Ae=this.ze=e.TileMode.Repeat;break;case"no-repeat":this.Ae=this.ze=e.TileMode.Decal;break;default:throw"invalid repetition mode "+c}this.setTransform=function(w){w=[w.a,w.c,w.e,w.b,w.d,w.f,0,0,1],i(w)&&(this._transform=w)},this.se=function(){var w=new Ie;return w.ze=this.ze,w.Ae=this.Ae,w},this.le=function(){this.Wd&&(this.Wd.delete(),this.Wd=null)},this.te=function(){return this.le(),this.Wd=this.Ef.makeShaderCubic(this.ze,this.Ae,.3333333333333333,.3333333333333333,this._transform)}}function qe(D,c,w,M,R,I){this.Wd=null,this.ce=[],this.Zd=[],this.addColorStop=function(N,ne){if(0>N||1<N||!isFinite(N))throw"offset must be between 0 and 1 inclusively";ne=a(ne);var je=this.Zd.indexOf(N);if(je!==-1)this.ce[je]=ne;else{for(je=0;je<this.Zd.length&&!(this.Zd[je]>N);je++);this.Zd.splice(je,0,N),this.ce.splice(je,0,ne)}},this.se=function(){var N=new qe(D,c,w,M,R,I);return N.ce=this.ce.slice(),N.Zd=this.Zd.slice(),N},this.le=function(){this.Wd&&(this.Wd.delete(),this.Wd=null)},this.te=function(N){var ne=[D,c,M,R];e.Matrix.mapPoints(N,ne);var je=ne[0],Ve=ne[1],tr=ne[2];ne=ne[3];var ln=(Math.abs(N[0])+Math.abs(N[4]))/2;return N=w*ln,ln*=I,this.le(),this.Wd=e.Shader.MakeTwoPointConicalGradient([je,Ve],N,[tr,ne],ln,this.ce,this.Zd,e.TileMode.Clamp)}}e._testing={};var Mt={aliceblue:Float32Array.of(.941,.973,1,1),antiquewhite:Float32Array.of(.98,.922,.843,1),aqua:Float32Array.of(0,1,1,1),aquamarine:Float32Array.of(.498,1,.831,1),azure:Float32Array.of(.941,1,1,1),beige:Float32Array.of(.961,.961,.863,1),bisque:Float32Array.of(1,.894,.769,1),black:Float32Array.of(0,0,0,1),blanchedalmond:Float32Array.of(1,.922,.804,1),blue:Float32Array.of(0,0,1,1),blueviolet:Float32Array.of(.541,.169,.886,1),brown:Float32Array.of(.647,.165,.165,1),burlywood:Float32Array.of(.871,.722,.529,1),cadetblue:Float32Array.of(.373,.62,.627,1),chartreuse:Float32Array.of(.498,1,0,1),chocolate:Float32Array.of(.824,.412,.118,1),coral:Float32Array.of(1,.498,.314,1),cornflowerblue:Float32Array.of(.392,.584,.929,1),cornsilk:Float32Array.of(1,.973,.863,1),crimson:Float32Array.of(.863,.078,.235,1),cyan:Float32Array.of(0,1,1,1),darkblue:Float32Array.of(0,0,.545,1),darkcyan:Float32Array.of(0,.545,.545,1),darkgoldenrod:Float32Array.of(.722,.525,.043,1),darkgray:Float32Array.of(.663,.663,.663,1),darkgreen:Float32Array.of(0,.392,0,1),darkgrey:Float32Array.of(.663,.663,.663,1),darkkhaki:Float32Array.of(.741,.718,.42,1),darkmagenta:Float32Array.of(.545,0,.545,1),darkolivegreen:Float32Array.of(.333,.42,.184,1),darkorange:Float32Array.of(1,.549,0,1),darkorchid:Float32Array.of(.6,.196,.8,1),darkred:Float32Array.of(.545,0,0,1),darksalmon:Float32Array.of(.914,.588,.478,1),darkseagreen:Float32Array.of(.561,.737,.561,1),darkslateblue:Float32Array.of(.282,.239,.545,1),darkslategray:Float32Array.of(.184,.31,.31,1),darkslategrey:Float32Array.of(.184,.31,.31,1),darkturquoise:Float32Array.of(0,.808,.82,1),darkviolet:Float32Array.of(.58,0,.827,1),deeppink:Float32Array.of(1,.078,.576,1),deepskyblue:Float32Array.of(0,.749,1,1),dimgray:Float32Array.of(.412,.412,.412,1),dimgrey:Float32Array.of(.412,.412,.412,1),dodgerblue:Float32Array.of(.118,.565,1,1),firebrick:Float32Array.of(.698,.133,.133,1),floralwhite:Float32Array.of(1,.98,.941,1),forestgreen:Float32Array.of(.133,.545,.133,1),fuchsia:Float32Array.of(1,0,1,1),gainsboro:Float32Array.of(.863,.863,.863,1),ghostwhite:Float32Array.of(.973,.973,1,1),gold:Float32Array.of(1,.843,0,1),goldenrod:Float32Array.of(.855,.647,.125,1),gray:Float32Array.of(.502,.502,.502,1),green:Float32Array.of(0,.502,0,1),greenyellow:Float32Array.of(.678,1,.184,1),grey:Float32Array.of(.502,.502,.502,1),honeydew:Float32Array.of(.941,1,.941,1),hotpink:Float32Array.of(1,.412,.706,1),indianred:Float32Array.of(.804,.361,.361,1),indigo:Float32Array.of(.294,0,.51,1),ivory:Float32Array.of(1,1,.941,1),khaki:Float32Array.of(.941,.902,.549,1),lavender:Float32Array.of(.902,.902,.98,1),lavenderblush:Float32Array.of(1,.941,.961,1),lawngreen:Float32Array.of(.486,.988,0,1),lemonchiffon:Float32Array.of(1,.98,.804,1),lightblue:Float32Array.of(.678,.847,.902,1),lightcoral:Float32Array.of(.941,.502,.502,1),lightcyan:Float32Array.of(.878,1,1,1),lightgoldenrodyellow:Float32Array.of(.98,.98,.824,1),lightgray:Float32Array.of(.827,.827,.827,1),lightgreen:Float32Array.of(.565,.933,.565,1),lightgrey:Float32Array.of(.827,.827,.827,1),lightpink:Float32Array.of(1,.714,.757,1),lightsalmon:Float32Array.of(1,.627,.478,1),lightseagreen:Float32Array.of(.125,.698,.667,1),lightskyblue:Float32Array.of(.529,.808,.98,1),lightslategray:Float32Array.of(.467,.533,.6,1),lightslategrey:Float32Array.of(.467,.533,.6,1),lightsteelblue:Float32Array.of(.69,.769,.871,1),lightyellow:Float32Array.of(1,1,.878,1),lime:Float32Array.of(0,1,0,1),limegreen:Float32Array.of(.196,.804,.196,1),linen:Float32Array.of(.98,.941,.902,1),magenta:Float32Array.of(1,0,1,1),maroon:Float32Array.of(.502,0,0,1),mediumaquamarine:Float32Array.of(.4,.804,.667,1),mediumblue:Float32Array.of(0,0,.804,1),mediumorchid:Float32Array.of(.729,.333,.827,1),mediumpurple:Float32Array.of(.576,.439,.859,1),mediumseagreen:Float32Array.of(.235,.702,.443,1),mediumslateblue:Float32Array.of(.482,.408,.933,1),mediumspringgreen:Float32Array.of(0,.98,.604,1),mediumturquoise:Float32Array.of(.282,.82,.8,1),mediumvioletred:Float32Array.of(.78,.082,.522,1),midnightblue:Float32Array.of(.098,.098,.439,1),mintcream:Float32Array.of(.961,1,.98,1),mistyrose:Float32Array.of(1,.894,.882,1),moccasin:Float32Array.of(1,.894,.71,1),navajowhite:Float32Array.of(1,.871,.678,1),navy:Float32Array.of(0,0,.502,1),oldlace:Float32Array.of(.992,.961,.902,1),olive:Float32Array.of(.502,.502,0,1),olivedrab:Float32Array.of(.42,.557,.137,1),orange:Float32Array.of(1,.647,0,1),orangered:Float32Array.of(1,.271,0,1),orchid:Float32Array.of(.855,.439,.839,1),palegoldenrod:Float32Array.of(.933,.91,.667,1),palegreen:Float32Array.of(.596,.984,.596,1),paleturquoise:Float32Array.of(.686,.933,.933,1),palevioletred:Float32Array.of(.859,.439,.576,1),papayawhip:Float32Array.of(1,.937,.835,1),peachpuff:Float32Array.of(1,.855,.725,1),peru:Float32Array.of(.804,.522,.247,1),pink:Float32Array.of(1,.753,.796,1),plum:Float32Array.of(.867,.627,.867,1),powderblue:Float32Array.of(.69,.878,.902,1),purple:Float32Array.of(.502,0,.502,1),rebeccapurple:Float32Array.of(.4,.2,.6,1),red:Float32Array.of(1,0,0,1),rosybrown:Float32Array.of(.737,.561,.561,1),royalblue:Float32Array.of(.255,.412,.882,1),saddlebrown:Float32Array.of(.545,.271,.075,1),salmon:Float32Array.of(.98,.502,.447,1),sandybrown:Float32Array.of(.957,.643,.376,1),seagreen:Float32Array.of(.18,.545,.341,1),seashell:Float32Array.of(1,.961,.933,1),sienna:Float32Array.of(.627,.322,.176,1),silver:Float32Array.of(.753,.753,.753,1),skyblue:Float32Array.of(.529,.808,.922,1),slateblue:Float32Array.of(.416,.353,.804,1),slategray:Float32Array.of(.439,.502,.565,1),slategrey:Float32Array.of(.439,.502,.565,1),snow:Float32Array.of(1,.98,.98,1),springgreen:Float32Array.of(0,1,.498,1),steelblue:Float32Array.of(.275,.51,.706,1),tan:Float32Array.of(.824,.706,.549,1),teal:Float32Array.of(0,.502,.502,1),thistle:Float32Array.of(.847,.749,.847,1),tomato:Float32Array.of(1,.388,.278,1),transparent:Float32Array.of(0,0,0,0),turquoise:Float32Array.of(.251,.878,.816,1),violet:Float32Array.of(.933,.51,.933,1),wheat:Float32Array.of(.961,.871,.702,1),white:Float32Array.of(1,1,1,1),whitesmoke:Float32Array.of(.961,.961,.961,1),yellow:Float32Array.of(1,1,0,1),yellowgreen:Float32Array.of(.604,.804,.196,1)};e._testing.parseColor=a,e._testing.colorToString=n;var kt=RegExp("(italic|oblique|normal|)\\s*(small-caps|normal|)\\s*(bold|bolder|lighter|[1-9]00|normal|)\\s*([\\d\\.]+)(px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q)(.+)"),ct={"Noto Mono":{"*":null},monospace:{"*":null}};e._testing.parseFontString=f,e.MakeCanvas=function(D,c){return(D=e.MakeSurface(D,c))?new F(D):null},e.ImageData=function(){if(arguments.length===2){var D=arguments[0],c=arguments[1];return new z(new Uint8ClampedArray(4*D*c),D,c)}if(arguments.length===3){var w=arguments[0];if(w.prototype.constructor!==Uint8ClampedArray)throw"bytes must be given as a Uint8ClampedArray";if(D=arguments[1],c=arguments[2],w%4)throw"bytes must be given in a multiple of 4";if(w%D)throw"bytes must divide evenly by width";if(c&&c!==w/(4*D))throw"invalid height given";return new z(w,D,w/(4*D))}throw"invalid number of arguments - takes 2 or 3, saw "+arguments.length}}()}(u);var C=Object.assign({},u),$="./this.program",k=(e,t)=>{throw t},H=typeof window=="object",G=typeof importScripts=="function",Y=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",ie="",J,oe,Se;if(Y){var Re=Ii,fe=Ii;ie=G?fe.dirname(ie)+"/":__dirname+"/",J=(e,t)=>(e=e.startsWith("file://")?new URL(e):fe.normalize(e),Re.readFileSync(e,t?void 0:"utf8")),Se=e=>(e=J(e,!0),e.buffer||(e=new Uint8Array(e)),e),oe=(e,t,r,o=!0)=>{e=e.startsWith("file://")?new URL(e):fe.normalize(e),Re.readFile(e,o?void 0:"utf8",(l,h)=>{l?r(l):t(o?h.buffer:h)})},!u.thisProgram&&1<process.argv.length&&($=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),k=(e,t)=>{throw process.exitCode=e,t},u.inspect=()=>"[Emscripten Module object]"}else(H||G)&&(G?ie=self.location.href:typeof document<"u"&&document.currentScript&&(ie=document.currentScript.src),g&&(ie=g),ie.indexOf("blob:")!==0?ie=ie.substr(0,ie.replace(/[?#].*/,"").lastIndexOf("/")+1):ie="",J=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},G&&(Se=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),oe=(e,t,r)=>{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{o.status==200||o.status==0&&o.response?t(o.response):r()},o.onerror=r,o.send(null)});var rt=u.print||console.log.bind(console),U=u.printErr||console.error.bind(console);Object.assign(u,C),C=null,u.thisProgram&&($=u.thisProgram),u.quit&&(k=u.quit);var ee;u.wasmBinary&&(ee=u.wasmBinary);var Me=u.noExitRuntime||!0;typeof WebAssembly!="object"&&et("no native wasm support detected");var Ce,se,Ke=!1,Le,Q,Be,nr,X,Ae,le,Gt;function Wr(){var e=Ce.buffer;u.HEAP8=Le=new Int8Array(e),u.HEAP16=Be=new Int16Array(e),u.HEAP32=X=new Int32Array(e),u.HEAPU8=Q=new Uint8Array(e),u.HEAPU16=nr=new Uint16Array(e),u.HEAPU32=Ae=new Uint32Array(e),u.HEAPF32=le=new Float32Array(e),u.HEAPF64=Gt=new Float64Array(e)}var Je,ir=[],yt=[],Jt=[];function un(){var e=u.preRun.shift();ir.unshift(e)}var Ot=0,bt=null;function et(e){throw u.onAbort&&u.onAbort(e),e="Aborted("+e+")",U(e),Ke=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),P(e),e}function Hr(e){return e.startsWith("data:application/octet-stream;base64,")}var Yt;if(Yt="canvaskit.wasm",!Hr(Yt)){var Kt=Yt;Yt=u.locateFile?u.locateFile(Kt,ie):ie+Kt}function Ur(e){if(e==Yt&&ee)return new Uint8Array(ee);if(Se)return Se(e);throw"both async and sync fetching of the wasm failed"}function Gr(e){if(!ee&&(H||G)){if(typeof fetch=="function"&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>Ur(e));if(oe)return new Promise((t,r)=>{oe(e,o=>t(new Uint8Array(o)),r)})}return Promise.resolve().then(()=>Ur(e))}function or(e,t,r){return Gr(e).then(o=>WebAssembly.instantiate(o,t)).then(o=>o).then(r,o=>{U("failed to asynchronously prepare wasm: "+o),et(o)})}function xt(e,t){var r=Yt;return ee||typeof WebAssembly.instantiateStreaming!="function"||Hr(r)||r.startsWith("file://")||Y||typeof fetch!="function"?or(r,e,t):fetch(r,{credentials:"same-origin"}).then(o=>WebAssembly.instantiateStreaming(o,e).then(t,function(l){return U("wasm streaming compile failed: "+l),U("falling back to ArrayBuffer instantiation"),or(r,e,t)}))}function zt(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var Tr=e=>{for(;0<e.length;)e.shift()(u)},Fr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,vt=(e,t,r)=>{var o=t+r;for(r=t;e[r]&&!(r>=o);)++r;if(16<r-t&&e.buffer&&Fr)return Fr.decode(e.subarray(t,r));for(o="";t<r;){var l=e[t++];if(l&128){var h=e[t++]&63;if((l&224)==192)o+=String.fromCharCode((l&31)<<6|h);else{var A=e[t++]&63;l=(l&240)==224?(l&15)<<12|h<<6|A:(l&7)<<18|h<<12|A<<6|e[t++]&63,65536>l?o+=String.fromCharCode(l):(l-=65536,o+=String.fromCharCode(55296|l>>10,56320|l&1023))}}else o+=String.fromCharCode(l)}return o},At={};function gr(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function ur(e){return this.fromWireType(X[e>>2])}var Xt={},Bt={},Pt={},Jr=void 0;function cr(e){throw new Jr(e)}function tt(e,t,r){function o(m){m=r(m),m.length!==e.length&&cr("Mismatched type converter count");for(var y=0;y<e.length;++y)ze(e[y],m[y])}e.forEach(function(m){Pt[m]=t});var l=Array(t.length),h=[],A=0;t.forEach((m,y)=>{Bt.hasOwnProperty(m)?l[y]=Bt[m]:(h.push(m),Xt.hasOwnProperty(m)||(Xt[m]=[]),Xt[m].push(()=>{l[y]=Bt[m],++A,A===h.length&&o(l)}))}),h.length===0&&o(l)}function _t(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${e}`)}}var ar=void 0;function ke(e){for(var t="";Q[e];)t+=ar[Q[e++]];return t}var at=void 0;function pe(e){throw new at(e)}function Yr(e,t,r={}){var o=t.name;if(e||pe(`type "${o}" must have a positive integer typeid pointer`),Bt.hasOwnProperty(e)){if(r.Wf)return;pe(`Cannot register type '${o}' twice`)}Bt[e]=t,delete Pt[e],Xt.hasOwnProperty(e)&&(t=Xt[e],delete Xt[e],t.forEach(l=>l()))}function ze(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");Yr(e,t,r)}function It(e){pe(e.Jd.Vd.Pd.name+" instance already deleted")}var yr=!1;function Qt(){}function Kr(e){--e.count.value,e.count.value===0&&(e.Yd?e.ee.ke(e.Yd):e.Vd.Pd.ke(e.Rd))}function _r(e,t,r){return t===r?e:r.$d===void 0?null:(e=_r(e,t,r.$d),e===null?null:r.Mf(e))}var Er={},fr=[];function Te(){for(;fr.length;){var e=fr.pop();e.Jd.Ee=!1,e.delete()}}var nt=void 0,Ge={};function wr(e,t){for(t===void 0&&pe("ptr should not be undefined");e.$d;)t=e.Oe(t),e=e.$d;return Ge[t]}function qt(e,t){return t.Vd&&t.Rd||cr("makeClassHandle requires ptr and ptrType"),!!t.ee!=!!t.Yd&&cr("Both smartPtrType and smartPtr must be specified"),t.count={value:1},St(Object.create(e,{Jd:{value:t}}))}function St(e){return typeof FinalizationRegistry>"u"?(St=t=>t,e):(yr=new FinalizationRegistry(t=>{Kr(t.Jd)}),St=t=>{var r=t.Jd;return r.Yd&&yr.register(t,{Jd:r},t),t},Qt=t=>{yr.unregister(t)},St(e))}function dt(){}function zr(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return 48<=t&&57>=t?`_${e}`:e}function Mr(e,t){return e=zr(e),{[e]:function(){return t.apply(this,arguments)}}[e]}function kr(e,t,r){if(e[t].Xd===void 0){var o=e[t];e[t]=function(){return e[t].Xd.hasOwnProperty(arguments.length)||pe(`Function '${r}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].Xd})!`),e[t].Xd[arguments.length].apply(this,arguments)},e[t].Xd=[],e[t].Xd[o.Ce]=o}}function $r(e,t,r){u.hasOwnProperty(e)?((r===void 0||u[e].Xd!==void 0&&u[e].Xd[r]!==void 0)&&pe(`Cannot register public name '${e}' twice`),kr(u,e,e),u.hasOwnProperty(r)&&pe(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),u[e].Xd[r]=t):(u[e]=t,r!==void 0&&(u[e].tg=r))}function dr(e,t,r,o,l,h,A,m){this.name=e,this.constructor=t,this.Fe=r,this.ke=o,this.$d=l,this.Rf=h,this.Oe=A,this.Mf=m,this.cg=[]}function Rr(e,t,r){for(;t!==r;)t.Oe||pe(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.Oe(e),t=t.$d;return e}function hr(e,t){return t===null?(this.gf&&pe(`null is not a valid ${this.name}`),0):(t.Jd||pe(`Cannot pass "${Dn(t)}" as a ${this.name}`),t.Jd.Rd||pe(`Cannot pass deleted object as a pointer of type ${this.name}`),Rr(t.Jd.Rd,t.Jd.Vd.Pd,this.Pd))}function cn(e,t){if(t===null){if(this.gf&&pe(`null is not a valid ${this.name}`),this.Ve){var r=this.hf();return e!==null&&e.push(this.ke,r),r}return 0}if(t.Jd||pe(`Cannot pass "${Dn(t)}" as a ${this.name}`),t.Jd.Rd||pe(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.Ue&&t.Jd.Vd.Ue&&pe(`Cannot convert argument of type ${t.Jd.ee?t.Jd.ee.name:t.Jd.Vd.name} to parameter type ${this.name}`),r=Rr(t.Jd.Rd,t.Jd.Vd.Pd,this.Pd),this.Ve)switch(t.Jd.Yd===void 0&&pe("Passing raw pointer to smart pointer is illegal"),this.hg){case 0:t.Jd.ee===this?r=t.Jd.Yd:pe(`Cannot convert argument of type ${t.Jd.ee?t.Jd.ee.name:t.Jd.Vd.name} to parameter type ${this.name}`);break;case 1:r=t.Jd.Yd;break;case 2:if(t.Jd.ee===this)r=t.Jd.Yd;else{var o=t.clone();r=this.dg(r,Ft(function(){o.delete()})),e!==null&&e.push(this.ke,r)}break;default:pe("Unsupporting sharing policy")}return r}function fn(e,t){return t===null?(this.gf&&pe(`null is not a valid ${this.name}`),0):(t.Jd||pe(`Cannot pass "${Dn(t)}" as a ${this.name}`),t.Jd.Rd||pe(`Cannot pass deleted object as a pointer of type ${this.name}`),t.Jd.Vd.Ue&&pe(`Cannot convert argument of type ${t.Jd.Vd.name} to parameter type ${this.name}`),Rr(t.Jd.Rd,t.Jd.Vd.Pd,this.Pd))}function it(e,t,r,o,l,h,A,m,y,S,B){this.name=e,this.Pd=t,this.gf=r,this.Ue=o,this.Ve=l,this.bg=h,this.hg=A,this.vf=m,this.hf=y,this.dg=S,this.ke=B,l||t.$d!==void 0?this.toWireType=cn:(this.toWireType=o?hr:fn,this.de=null)}function Xr(e,t,r){u.hasOwnProperty(e)||cr("Replacing nonexistant public symbol"),u[e].Xd!==void 0&&r!==void 0?u[e].Xd[r]=t:(u[e]=t,u[e].Ce=r)}var Qr=(e,t)=>{var r=[];return function(){if(r.length=0,Object.assign(r,arguments),e.includes("j")){var o=u["dynCall_"+e];o=r&&r.length?o.apply(null,[t].concat(r)):o.call(null,t)}else o=Je.get(t).apply(null,r);return o}};function Xe(e,t){e=ke(e);var r=e.includes("j")?Qr(e,t):Je.get(t);return typeof r!="function"&&pe(`unknown function pointer with signature ${e}: ${t}`),r}var br=void 0;function qr(e){e=Ci(e);var t=ke(e);return sr(e),t}function Zt(e,t){function r(h){l[h]||Bt[h]||(Pt[h]?Pt[h].forEach(r):(o.push(h),l[h]=!0))}var o=[],l={};throw t.forEach(r),new br(`${e}: `+o.map(qr).join([", "]))}function xr(e,t,r,o,l){var h=t.length;2>h&&pe("argTypes array size mismatch! Must at least get return value and 'this' types!");var A=t[1]!==null&&r!==null,m=!1;for(r=1;r<t.length;++r)if(t[r]!==null&&t[r].de===void 0){m=!0;break}var y=t[0].name!=="void",S=h-2,B=Array(S),V=[],te=[];return function(){if(arguments.length!==S&&pe(`function ${e} called with ${arguments.length} arguments, expected ${S} args!`),te.length=0,V.length=A?2:1,V[0]=l,A){var E=t[1].toWireType(te,this);V[1]=E}for(var ae=0;ae<S;++ae)B[ae]=t[ae+2].toWireType(te,arguments[ae]),V.push(B[ae]);if(ae=o.apply(null,V),m)gr(te);else for(var me=A?1:2;me<t.length;me++){var he=me===1?E:B[me-2];t[me].de!==null&&t[me].de(he)}return E=y?t[0].fromWireType(ae):void 0,E}}function Ar(e,t){for(var r=[],o=0;o<e;o++)r.push(Ae[t+4*o>>2]);return r}function ai(){this.je=[void 0],this.sf=[]}var Ct=new ai;function In(e){e>=Ct.Ge&&--Ct.get(e).wf===0&&Ct.Bf(e)}var Tt=e=>(e||pe("Cannot use deleted val. handle = "+e),Ct.get(e).value),Ft=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Ct.Af({wf:1,value:e})}};function bo(e,t,r){switch(t){case 0:return function(o){return this.fromWireType((r?Le:Q)[o])};case 1:return function(o){return this.fromWireType((r?Be:nr)[o>>1])};case 2:return function(o){return this.fromWireType((r?X:Ae)[o>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function Zr(e,t){var r=Bt[e];return r===void 0&&pe(t+" has unknown type "+qr(e)),r}function Dn(e){if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e}function xo(e,t){switch(t){case 2:return function(r){return this.fromWireType(le[r>>2])};case 3:return function(r){return this.fromWireType(Gt[r>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Ao(e,t,r){switch(t){case 0:return r?function(o){return Le[o]}:function(o){return Q[o]};case 1:return r?function(o){return Be[o>>1]}:function(o){return nr[o>>1]};case 2:return r?function(o){return X[o>>2]}:function(o){return Ae[o>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var Dt=(e,t,r,o)=>{if(!(0<o))return 0;var l=r;o=r+o-1;for(var h=0;h<e.length;++h){var A=e.charCodeAt(h);if(55296<=A&&57343>=A){var m=e.charCodeAt(++h);A=65536+((A&1023)<<10)|m&1023}if(127>=A){if(r>=o)break;t[r++]=A}else{if(2047>=A){if(r+1>=o)break;t[r++]=192|A>>6}else{if(65535>=A){if(r+2>=o)break;t[r++]=224|A>>12}else{if(r+3>=o)break;t[r++]=240|A>>18,t[r++]=128|A>>12&63}t[r++]=128|A>>6&63}t[r++]=128|A&63}}return t[r]=0,r-l},jt=e=>{for(var t=0,r=0;r<e.length;++r){var o=e.charCodeAt(r);127>=o?t++:2047>=o?t+=2:55296<=o&&57343>=o?(t+=4,++r):t+=3}return t},si=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Po=(e,t)=>{for(var r=e>>1,o=r+t/2;!(r>=o)&&nr[r];)++r;if(r<<=1,32<r-e&&si)return si.decode(Q.subarray(e,r));for(r="",o=0;!(o>=t/2);++o){var l=Be[e+2*o>>1];if(l==0)break;r+=String.fromCharCode(l)}return r},So=(e,t,r)=>{if(r===void 0&&(r=2147483647),2>r)return 0;r-=2;var o=t;r=r<2*e.length?r/2:e.length;for(var l=0;l<r;++l)Be[t>>1]=e.charCodeAt(l),t+=2;return Be[t>>1]=0,t-o},Co=e=>2*e.length,To=(e,t)=>{for(var r=0,o="";!(r>=t/4);){var l=X[e+4*r>>2];if(l==0)break;++r,65536<=l?(l-=65536,o+=String.fromCharCode(55296|l>>10,56320|l&1023)):o+=String.fromCharCode(l)}return o},Fo=(e,t,r)=>{if(r===void 0&&(r=2147483647),4>r)return 0;var o=t;r=o+r-4;for(var l=0;l<e.length;++l){var h=e.charCodeAt(l);if(55296<=h&&57343>=h){var A=e.charCodeAt(++l);h=65536+((h&1023)<<10)|A&1023}if(X[t>>2]=h,t+=4,t+4>r)break}return X[t>>2]=0,t-o},Eo=e=>{for(var t=0,r=0;r<e.length;++r){var o=e.charCodeAt(r);55296<=o&&57343>=o&&++r,t+=4}return t},Mo={};function dn(e){var t=Mo[e];return t===void 0?ke(e):t}var hn=[];function li(){function e(t){t.$$$embind_global$$$=t;var r=typeof $$$embind_global$$$=="object"&&t.$$$embind_global$$$==t;return r||delete t.$$$embind_global$$$,r}if(typeof globalThis=="object")return globalThis;if(typeof $$$embind_global$$$=="object"||(typeof zn=="object"&&e(zn)?$$$embind_global$$$=zn:typeof self=="object"&&e(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")}function ko(e){var t=hn.length;return hn.push(e),t}function $o(e,t){for(var r=Array(e),o=0;o<e;++o)r[o]=Zr(Ae[t+4*o>>2],"parameter "+o);return r}var ui=[];function Ro(e){var t=Array(e+1);return function(r,o,l){t[0]=r;for(var h=0;h<e;++h){var A=Zr(Ae[o+4*h>>2],"parameter "+h);t[h+1]=A.readValueFromPointer(l),l+=A.argPackAdvance}return r=new(r.bind.apply(r,t)),Ft(r)}}var ci={};function Lo(e){var t=e.getExtension("ANGLE_instanced_arrays");t&&(e.vertexAttribDivisor=function(r,o){t.vertexAttribDivisorANGLE(r,o)},e.drawArraysInstanced=function(r,o,l,h){t.drawArraysInstancedANGLE(r,o,l,h)},e.drawElementsInstanced=function(r,o,l,h,A){t.drawElementsInstancedANGLE(r,o,l,h,A)})}function Oo(e){var t=e.getExtension("OES_vertex_array_object");t&&(e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(r){t.deleteVertexArrayOES(r)},e.bindVertexArray=function(r){t.bindVertexArrayOES(r)},e.isVertexArray=function(r){return t.isVertexArrayOES(r)})}function Bo(e){var t=e.getExtension("WEBGL_draw_buffers");t&&(e.drawBuffers=function(r,o){t.drawBuffersWEBGL(r,o)})}var fi=1,pn=[],Vt=[],mn=[],en=[],Et=[],Nt=[],vn=[],er=[],Pr=[],Sr=[],di={},hi={},pi=4;function De(e){gn||(gn=e)}function Lr(e){for(var t=fi++,r=e.length;r<t;r++)e[r]=null;return t}function Io(e,t){e.Ge||(e.Ge=e.getContext,e.getContext=function(o,l){return l=e.Ge(o,l),o=="webgl"==l instanceof WebGLRenderingContext?l:null});var r=1<t.majorVersion?e.getContext("webgl2",t):e.getContext("webgl",t);return r?Do(r,t):0}function Do(e,t){var r=Lr(er),o={handle:r,attributes:t,version:t.majorVersion,fe:e};return e.canvas&&(e.canvas.zf=o),er[r]=o,(typeof t.Nf>"u"||t.Nf)&&jo(o),r}function mi(e){return de=er[e],u.rg=T=de&&de.fe,!(e&&!T)}function jo(e){if(e||(e=de),!e.Xf){e.Xf=!0;var t=e.fe;Lo(t),Oo(t),Bo(t),t.pf=t.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"),t.uf=t.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"),2<=e.version&&(t.qf=t.getExtension("EXT_disjoint_timer_query_webgl2")),(2>e.version||!t.qf)&&(t.qf=t.getExtension("EXT_disjoint_timer_query")),t.sg=t.getExtension("WEBGL_multi_draw"),(t.getSupportedExtensions()||[]).forEach(function(r){r.includes("lose_context")||r.includes("debug")||t.getExtension(r)})}}var de,gn,jn={},vi=()=>{if(!Vn){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:$||"./this.program"},t;for(t in jn)jn[t]===void 0?delete e[t]:e[t]=jn[t];var r=[];for(t in e)r.push(`${t}=${e[t]}`);Vn=r}return Vn},Vn,Vo=[null,[],[]];function gi(e){T.bindVertexArray(vn[e])}function yi(e,t){for(var r=0;r<e;r++){var o=X[t+4*r>>2];T.deleteVertexArray(vn[o]),vn[o]=null}}var yn=[];function _i(e,t,r,o){T.drawElements(e,t,r,o)}function Or(e,t,r,o){for(var l=0;l<e;l++){var h=T[r](),A=h&&Lr(o);h?(h.name=A,o[A]=h):De(1282),X[t+4*l>>2]=A}}function wi(e,t){Or(e,t,"createVertexArray",vn)}function bi(e,t,r){if(t){var o=void 0;switch(e){case 36346:o=1;break;case 36344:r!=0&&r!=1&&De(1280);return;case 34814:case 36345:o=0;break;case 34466:var l=T.getParameter(34467);o=l?l.length:0;break;case 33309:if(2>de.version){De(1282);return}o=2*(T.getSupportedExtensions()||[]).length;break;case 33307:case 33308:if(2>de.version){De(1280);return}o=e==33307?3:0}if(o===void 0)switch(l=T.getParameter(e),typeof l){case"number":o=l;break;case"boolean":o=l?1:0;break;case"string":De(1280);return;case"object":if(l===null)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:o=0;break;default:De(1280);return}else{if(l instanceof Float32Array||l instanceof Uint32Array||l instanceof Int32Array||l instanceof Array){for(e=0;e<l.length;++e)switch(r){case 0:X[t+4*e>>2]=l[e];break;case 2:le[t+4*e>>2]=l[e];break;case 4:Le[t+e>>0]=l[e]?1:0}return}try{o=l.name|0}catch(h){De(1280),U("GL_INVALID_ENUM in glGet"+r+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+h+")");return}}break;default:De(1280),U("GL_INVALID_ENUM in glGet"+r+"v: Native code calling glGet"+r+"v("+e+") and it returns "+l+" of type "+typeof l+"!");return}switch(r){case 1:r=o,Ae[t>>2]=r,Ae[t+4>>2]=(r-Ae[t>>2])/4294967296;break;case 0:X[t>>2]=o;break;case 2:le[t>>2]=o;break;case 4:Le[t>>0]=o?1:0}}else De(1281)}var tn=e=>{var t=jt(e)+1,r=xn(t);return r&&Dt(e,Q,r,t),r};function xi(e){return e.slice(-1)=="]"&&e.lastIndexOf("[")}function _n(e){return e-=5120,e==0?Le:e==1?Q:e==2?Be:e==4?X:e==6?le:e==5||e==28922||e==28520||e==30779||e==30782?Ae:nr}function Nn(e,t,r,o,l){e=_n(e);var h=31-Math.clz32(e.BYTES_PER_ELEMENT),A=pi;return e.subarray(l>>h,l+o*(r*({5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[t-6402]||1)*(1<<h)+A-1&-A)>>h)}function $e(e){var t=T.Kf;if(t){var r=t.Ne[e];return typeof r=="number"&&(t.Ne[e]=r=T.getUniformLocation(t,t.xf[e]+(0<r?"["+r+"]":""))),r}De(1282)}var pr=[],rn=[],wn=e=>e%4===0&&(e%100!==0||e%400===0),Ai=[31,29,31,30,31,30,31,31,30,31,30,31],Pi=[31,28,31,30,31,30,31,31,30,31,30,31];function No(e){var t=Array(jt(e)+1);return Dt(e,t,0,t.length),t}var Wo=(e,t,r,o)=>{function l(E,ae,me){for(E=typeof E=="number"?E.toString():E||"";E.length<ae;)E=me[0]+E;return E}function h(E,ae){return l(E,ae,"0")}function A(E,ae){function me(gt){return 0>gt?-1:0<gt?1:0}var he;return(he=me(E.getFullYear()-ae.getFullYear()))===0&&(he=me(E.getMonth()-ae.getMonth()))===0&&(he=me(E.getDate()-ae.getDate())),he}function m(E){switch(E.getDay()){case 0:return new Date(E.getFullYear()-1,11,29);case 1:return E;case 2:return new Date(E.getFullYear(),0,3);case 3:return new Date(E.getFullYear(),0,2);case 4:return new Date(E.getFullYear(),0,1);case 5:return new Date(E.getFullYear()-1,11,31);case 6:return new Date(E.getFullYear()-1,11,30)}}function y(E){var ae=E.oe;for(E=new Date(new Date(E.pe+1900,0,1).getTime());0<ae;){var me=E.getMonth(),he=(wn(E.getFullYear())?Ai:Pi)[me];if(ae>he-E.getDate())ae-=he-E.getDate()+1,E.setDate(1),11>me?E.setMonth(me+1):(E.setMonth(0),E.setFullYear(E.getFullYear()+1));else{E.setDate(E.getDate()+ae);break}}return me=new Date(E.getFullYear()+1,0,4),ae=m(new Date(E.getFullYear(),0,4)),me=m(me),0>=A(ae,E)?0>=A(me,E)?E.getFullYear()+1:E.getFullYear():E.getFullYear()-1}var S=X[o+40>>2];o={pg:X[o>>2],og:X[o+4>>2],Ze:X[o+8>>2],jf:X[o+12>>2],$e:X[o+16>>2],pe:X[o+20>>2],he:X[o+24>>2],oe:X[o+28>>2],vg:X[o+32>>2],ng:X[o+36>>2],qg:S&&S?vt(Q,S):""},r=r?vt(Q,r):"",S={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var B in S)r=r.replace(new RegExp(B,"g"),S[B]);var V="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),te="January February March April May June July August September October November December".split(" ");S={"%a":E=>V[E.he].substring(0,3),"%A":E=>V[E.he],"%b":E=>te[E.$e].substring(0,3),"%B":E=>te[E.$e],"%C":E=>h((E.pe+1900)/100|0,2),"%d":E=>h(E.jf,2),"%e":E=>l(E.jf,2," "),"%g":E=>y(E).toString().substring(2),"%G":E=>y(E),"%H":E=>h(E.Ze,2),"%I":E=>(E=E.Ze,E==0?E=12:12<E&&(E-=12),h(E,2)),"%j":E=>{for(var ae=0,me=0;me<=E.$e-1;ae+=(wn(E.pe+1900)?Ai:Pi)[me++]);return h(E.jf+ae,3)},"%m":E=>h(E.$e+1,2),"%M":E=>h(E.og,2),"%n":()=>`
`,"%p":E=>0<=E.Ze&&12>E.Ze?"AM":"PM","%S":E=>h(E.pg,2),"%t":()=>"	","%u":E=>E.he||7,"%U":E=>h(Math.floor((E.oe+7-E.he)/7),2),"%V":E=>{var ae=Math.floor((E.oe+7-(E.he+6)%7)/7);if(2>=(E.he+371-E.oe-2)%7&&ae++,ae)ae==53&&(me=(E.he+371-E.oe)%7,me==4||me==3&&wn(E.pe)||(ae=1));else{ae=52;var me=(E.he+7-E.oe-1)%7;(me==4||me==5&&wn(E.pe%400-1))&&ae++}return h(ae,2)},"%w":E=>E.he,"%W":E=>h(Math.floor((E.oe+7-(E.he+6)%7)/7),2),"%y":E=>(E.pe+1900).toString().substring(2),"%Y":E=>E.pe+1900,"%z":E=>{E=E.ng;var ae=0<=E;return E=Math.abs(E)/60,(ae?"+":"-")+("0000"+(E/60*100+E%60)).slice(-4)},"%Z":E=>E.qg,"%%":()=>"%"},r=r.replace(/%%/g,"\0\0");for(B in S)r.includes(B)&&(r=r.replace(new RegExp(B,"g"),S[B](o)));return r=r.replace(/\0\0/g,"%"),B=No(r),B.length>t?0:(Le.set(B,e),B.length-1)};Jr=u.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}};for(var Si=Array(256),bn=0;256>bn;++bn)Si[bn]=String.fromCharCode(bn);ar=Si,at=u.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},dt.prototype.isAliasOf=function(e){if(!(this instanceof dt&&e instanceof dt))return!1;var t=this.Jd.Vd.Pd,r=this.Jd.Rd,o=e.Jd.Vd.Pd;for(e=e.Jd.Rd;t.$d;)r=t.Oe(r),t=t.$d;for(;o.$d;)e=o.Oe(e),o=o.$d;return t===o&&r===e},dt.prototype.clone=function(){if(this.Jd.Rd||It(this),this.Jd.Me)return this.Jd.count.value+=1,this;var e=St,t=Object,r=t.create,o=Object.getPrototypeOf(this),l=this.Jd;return e=e(r.call(t,o,{Jd:{value:{count:l.count,Ee:l.Ee,Me:l.Me,Rd:l.Rd,Vd:l.Vd,Yd:l.Yd,ee:l.ee}}})),e.Jd.count.value+=1,e.Jd.Ee=!1,e},dt.prototype.delete=function(){this.Jd.Rd||It(this),this.Jd.Ee&&!this.Jd.Me&&pe("Object already scheduled for deletion"),Qt(this),Kr(this.Jd),this.Jd.Me||(this.Jd.Yd=void 0,this.Jd.Rd=void 0)},dt.prototype.isDeleted=function(){return!this.Jd.Rd},dt.prototype.deleteLater=function(){return this.Jd.Rd||It(this),this.Jd.Ee&&!this.Jd.Me&&pe("Object already scheduled for deletion"),fr.push(this),fr.length===1&&nt&&nt(Te),this.Jd.Ee=!0,this},u.getInheritedInstanceCount=function(){return Object.keys(Ge).length},u.getLiveInheritedInstances=function(){var e=[],t;for(t in Ge)Ge.hasOwnProperty(t)&&e.push(Ge[t]);return e},u.flushPendingDeletes=Te,u.setDelayFunction=function(e){nt=e,fr.length&&nt&&nt(Te)},it.prototype.Sf=function(e){return this.vf&&(e=this.vf(e)),e},it.prototype.nf=function(e){this.ke&&this.ke(e)},it.prototype.argPackAdvance=8,it.prototype.readValueFromPointer=ur,it.prototype.deleteObject=function(e){e!==null&&e.delete()},it.prototype.fromWireType=function(e){function t(){return this.Ve?qt(this.Pd.Fe,{Vd:this.bg,Rd:r,ee:this,Yd:e}):qt(this.Pd.Fe,{Vd:this,Rd:e})}var r=this.Sf(e);if(!r)return this.nf(e),null;var o=wr(this.Pd,r);if(o!==void 0)return o.Jd.count.value===0?(o.Jd.Rd=r,o.Jd.Yd=e,o.clone()):(o=o.clone(),this.nf(e),o);if(o=this.Pd.Rf(r),o=Er[o],!o)return t.call(this);o=this.Ue?o.If:o.pointerType;var l=_r(r,this.Pd,o.Pd);return l===null?t.call(this):this.Ve?qt(o.Pd.Fe,{Vd:o,Rd:l,ee:this,Yd:e}):qt(o.Pd.Fe,{Vd:o,Rd:l})},br=u.UnboundTypeError=function(e,t){var r=Mr(t,function(o){this.name=t,this.message=o,o=Error(o).stack,o!==void 0&&(this.stack=this.toString()+`
`+o.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},r}(Error,"UnboundTypeError"),Object.assign(ai.prototype,{get(e){return this.je[e]},has(e){return this.je[e]!==void 0},Af(e){var t=this.sf.pop()||this.je.length;return this.je[t]=e,t},Bf(e){this.je[e]=void 0,this.sf.push(e)}}),Ct.je.push({value:void 0},{value:null},{value:!0},{value:!1}),Ct.Ge=Ct.je.length,u.count_emval_handles=function(){for(var e=0,t=Ct.Ge;t<Ct.je.length;++t)Ct.je[t]!==void 0&&++e;return e};for(var T,wt=0;32>wt;++wt)yn.push(Array(wt));var Ho=new Float32Array(288);for(wt=0;288>wt;++wt)pr[wt]=Ho.subarray(0,wt+1);var Uo=new Int32Array(288);for(wt=0;288>wt;++wt)rn[wt]=Uo.subarray(0,wt+1);var Go={T:function(){return 0},Bb:()=>{},Db:function(){return 0},yb:()=>{},zb:()=>{},U:function(){},Ab:()=>{},C:function(e){var t=At[e];delete At[e];var r=t.hf,o=t.ke,l=t.rf,h=l.map(A=>A.Vf).concat(l.map(A=>A.fg));tt([e],h,A=>{var m={};return l.forEach((y,S)=>{var B=A[S],V=y.Tf,te=y.Uf,E=A[S+l.length],ae=y.eg,me=y.gg;m[y.Of]={read:he=>B.fromWireType(V(te,he)),write:(he,gt)=>{var ot=[];ae(me,he,E.toWireType(ot,gt)),gr(ot)}}}),[{name:t.name,fromWireType:function(y){var S={},B;for(B in m)S[B]=m[B].read(y);return o(y),S},toWireType:function(y,S){for(var B in m)if(!(B in S))throw new TypeError(`Missing field: "${B}"`);var V=r();for(B in m)m[B].write(V,S[B]);return y!==null&&y.push(o,V),V},argPackAdvance:8,readValueFromPointer:ur,de:o}]})},qb:function(){},Hb:function(e,t,r,o,l){var h=_t(r);t=ke(t),ze(e,{name:t,fromWireType:function(A){return!!A},toWireType:function(A,m){return m?o:l},argPackAdvance:8,readValueFromPointer:function(A){if(r===1)var m=Le;else if(r===2)m=Be;else if(r===4)m=X;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(m[A>>h])},de:null})},m:function(e,t,r,o,l,h,A,m,y,S,B,V,te){B=ke(B),h=Xe(l,h),m&&(m=Xe(A,m)),S&&(S=Xe(y,S)),te=Xe(V,te);var E=zr(B);$r(E,function(){Zt(`Cannot construct ${B} due to unbound types`,[o])}),tt([e,t,r],o?[o]:[],function(ae){if(ae=ae[0],o)var me=ae.Pd,he=me.Fe;else he=dt.prototype;ae=Mr(E,function(){if(Object.getPrototypeOf(this)!==gt)throw new at("Use 'new' to construct "+B);if(ot.ne===void 0)throw new at(B+" has no accessible constructor");var on=ot.ne[arguments.length];if(on===void 0)throw new at(`Tried to invoke ctor of ${B} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(ot.ne).toString()}) parameters instead!`);return on.apply(this,arguments)});var gt=Object.create(he,{constructor:{value:ae}});ae.prototype=gt;var ot=new dr(B,ae,gt,te,me,h,m,S);ot.$d&&(ot.$d.Pe===void 0&&(ot.$d.Pe=[]),ot.$d.Pe.push(ot)),me=new it(B,ot,!0,!1,!1),he=new it(B+"*",ot,!1,!1,!1);var nn=new it(B+" const*",ot,!1,!0,!1);return Er[e]={pointerType:he,If:nn},Xr(E,ae),[me,he,nn]})},f:function(e,t,r,o,l,h,A){var m=Ar(r,o);t=ke(t),h=Xe(l,h),tt([],[e],function(y){function S(){Zt(`Cannot call ${B} due to unbound types`,m)}y=y[0];var B=`${y.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var V=y.Pd.constructor;return V[t]===void 0?(S.Ce=r-1,V[t]=S):(kr(V,t,B),V[t].Xd[r-1]=S),tt([],m,function(te){if(te=[te[0],null].concat(te.slice(1)),te=xr(B,te,null,h,A),V[t].Xd===void 0?(te.Ce=r-1,V[t]=te):V[t].Xd[r-1]=te,y.Pd.Pe)for(const E of y.Pd.Pe)E.constructor.hasOwnProperty(t)||(E.constructor[t]=te);return[]}),[]})},A:function(e,t,r,o,l,h){var A=Ar(t,r);l=Xe(o,l),tt([],[e],function(m){m=m[0];var y=`constructor ${m.name}`;if(m.Pd.ne===void 0&&(m.Pd.ne=[]),m.Pd.ne[t-1]!==void 0)throw new at(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${m.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return m.Pd.ne[t-1]=()=>{Zt(`Cannot construct ${m.name} due to unbound types`,A)},tt([],A,function(S){return S.splice(1,0,null),m.Pd.ne[t-1]=xr(y,S,null,l,h),[]}),[]})},b:function(e,t,r,o,l,h,A,m){var y=Ar(r,o);t=ke(t),h=Xe(l,h),tt([],[e],function(S){function B(){Zt(`Cannot call ${V} due to unbound types`,y)}S=S[0];var V=`${S.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),m&&S.Pd.cg.push(t);var te=S.Pd.Fe,E=te[t];return E===void 0||E.Xd===void 0&&E.className!==S.name&&E.Ce===r-2?(B.Ce=r-2,B.className=S.name,te[t]=B):(kr(te,t,V),te[t].Xd[r-2]=B),tt([],y,function(ae){return ae=xr(V,ae,S,h,A),te[t].Xd===void 0?(ae.Ce=r-2,te[t]=ae):te[t].Xd[r-2]=ae,[]}),[]})},t:function(e,t,r){e=ke(e),tt([],[t],function(o){return o=o[0],u[e]=o.fromWireType(r),[]})},Gb:function(e,t){t=ke(t),ze(e,{name:t,fromWireType:function(r){var o=Tt(r);return In(r),o},toWireType:function(r,o){return Ft(o)},argPackAdvance:8,readValueFromPointer:ur,de:null})},l:function(e,t,r,o){function l(){}r=_t(r),t=ke(t),l.values={},ze(e,{name:t,constructor:l,fromWireType:function(h){return this.constructor.values[h]},toWireType:function(h,A){return A.value},argPackAdvance:8,readValueFromPointer:bo(t,r,o),de:null}),$r(t,l)},c:function(e,t,r){var o=Zr(e,"enum");t=ke(t),e=o.constructor,o=Object.create(o.constructor.prototype,{value:{value:r},constructor:{value:Mr(`${o.name}_${t}`,function(){})}}),e.values[r]=o,e[t]=o},W:function(e,t,r){r=_t(r),t=ke(t),ze(e,{name:t,fromWireType:function(o){return o},toWireType:function(o,l){return l},argPackAdvance:8,readValueFromPointer:xo(t,r),de:null})},y:function(e,t,r,o,l,h){var A=Ar(t,r);e=ke(e),l=Xe(o,l),$r(e,function(){Zt(`Cannot call ${e} due to unbound types`,A)},t-1),tt([],A,function(m){return m=[m[0],null].concat(m.slice(1)),Xr(e,xr(e,m,null,l,h),t-1),[]})},E:function(e,t,r,o,l){t=ke(t),l===-1&&(l=4294967295),l=_t(r);var h=m=>m;if(o===0){var A=32-8*r;h=m=>m<<A>>>A}r=t.includes("unsigned")?function(m,y){return y>>>0}:function(m,y){return y},ze(e,{name:t,fromWireType:h,toWireType:r,argPackAdvance:8,readValueFromPointer:Ao(t,l,o!==0),de:null})},s:function(e,t,r){function o(h){h>>=2;var A=Ae;return new l(A.buffer,A[h+1],A[h])}var l=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];r=ke(r),ze(e,{name:r,fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{Wf:!0})},q:function(e,t,r,o,l,h,A,m,y,S,B,V){r=ke(r),h=Xe(l,h),m=Xe(A,m),S=Xe(y,S),V=Xe(B,V),tt([e],[t],function(te){return te=te[0],[new it(r,te.Pd,!1,!1,!0,te,o,h,m,S,V)]})},V:function(e,t){t=ke(t);var r=t==="std::string";ze(e,{name:t,fromWireType:function(o){var l=Ae[o>>2],h=o+4;if(r)for(var A=h,m=0;m<=l;++m){var y=h+m;if(m==l||Q[y]==0){if(A=A?vt(Q,A,y-A):"",S===void 0)var S=A;else S+="\0",S+=A;A=y+1}}else{for(S=Array(l),m=0;m<l;++m)S[m]=String.fromCharCode(Q[h+m]);S=S.join("")}return sr(o),S},toWireType:function(o,l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));var h=typeof l=="string";h||l instanceof Uint8Array||l instanceof Uint8ClampedArray||l instanceof Int8Array||pe("Cannot pass non-string to std::string");var A=r&&h?jt(l):l.length,m=xn(4+A+1),y=m+4;if(Ae[m>>2]=A,r&&h)Dt(l,Q,y,A+1);else if(h)for(h=0;h<A;++h){var S=l.charCodeAt(h);255<S&&(sr(y),pe("String has UTF-16 code units that do not fit in 8 bits")),Q[y+h]=S}else for(h=0;h<A;++h)Q[y+h]=l[h];return o!==null&&o.push(sr,m),m},argPackAdvance:8,readValueFromPointer:ur,de:function(o){sr(o)}})},N:function(e,t,r){if(r=ke(r),t===2)var o=Po,l=So,h=Co,A=()=>nr,m=1;else t===4&&(o=To,l=Fo,h=Eo,A=()=>Ae,m=2);ze(e,{name:r,fromWireType:function(y){for(var S=Ae[y>>2],B=A(),V,te=y+4,E=0;E<=S;++E){var ae=y+4+E*t;(E==S||B[ae>>m]==0)&&(te=o(te,ae-te),V===void 0?V=te:(V+="\0",V+=te),te=ae+t)}return sr(y),V},toWireType:function(y,S){typeof S!="string"&&pe(`Cannot pass non-string to C++ string type ${r}`);var B=h(S),V=xn(4+B+t);return Ae[V>>2]=B>>m,l(S,V+4,B+t),y!==null&&y.push(sr,V),V},argPackAdvance:8,readValueFromPointer:ur,de:function(y){sr(y)}})},D:function(e,t,r,o,l,h){At[e]={name:ke(t),hf:Xe(r,o),ke:Xe(l,h),rf:[]}},e:function(e,t,r,o,l,h,A,m,y,S){At[e].rf.push({Of:ke(t),Vf:r,Tf:Xe(o,l),Uf:h,fg:A,eg:Xe(m,y),gg:S})},Ib:function(e,t){t=ke(t),ze(e,{Yf:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},Fb:()=>!0,ub:()=>{throw 1/0},F:function(e,t,r){e=Tt(e),t=Zr(t,"emval::as");var o=[],l=Ft(o);return Ae[r>>2]=l,t.toWireType(o,e)},Z:function(e,t,r,o,l){e=hn[e],t=Tt(t),r=dn(r);var h=[];return Ae[o>>2]=Ft(h),e(t,r,h,l)},w:function(e,t,r,o){e=hn[e],t=Tt(t),r=dn(r),e(t,r,null,o)},d:In,K:function(e){return e===0?Ft(li()):(e=dn(e),Ft(li()[e]))},u:function(e,t){var r=$o(e,t),o=r[0];t=o.name+"_$"+r.slice(1).map(function(A){return A.name}).join("_")+"$";var l=ui[t];if(l!==void 0)return l;var h=Array(e-1);return l=ko((A,m,y,S)=>{for(var B=0,V=0;V<e-1;++V)h[V]=r[V+1].readValueFromPointer(S+B),B+=r[V+1].argPackAdvance;for(A=A[m].apply(A,h),V=0;V<e-1;++V)r[V+1].Lf&&r[V+1].Lf(h[V]);if(!o.Yf)return o.toWireType(y,A)}),ui[t]=l},z:function(e,t){return e=Tt(e),t=Tt(t),Ft(e[t])},p:function(e){4<e&&(Ct.get(e).wf+=1)},J:function(e,t,r,o){e=Tt(e);var l=ci[t];return l||(l=Ro(t),ci[t]=l),l(e,r,o)},H:function(){return Ft([])},g:function(e){return Ft(dn(e))},G:function(){return Ft({})},kb:function(e){return e=Tt(e),!e},B:function(e){var t=Tt(e);gr(t),In(e)},i:function(e,t,r){e=Tt(e),t=Tt(t),r=Tt(r),e[t]=r},h:function(e,t){return e=Zr(e,"_emval_take_value"),e=e.readValueFromPointer(t),Ft(e)},nb:function(){return-52},ob:function(){},a:()=>{et("")},Eb:()=>performance.now(),vb:e=>{var t=Q.length;if(e>>>=0,2147483648<e)return!1;for(var r=1;4>=r;r*=2){var o=t*(1+.2/r);o=Math.min(o,e+100663296);var l=Math;o=Math.max(e,o);e:{l=l.min.call(l,2147483648,o+(65536-o%65536)%65536)-Ce.buffer.byteLength+65535>>>16;try{Ce.grow(l),Wr();var h=1;break e}catch{}h=void 0}if(h)return!0}return!1},lb:function(){return de?de.handle:0},wb:(e,t)=>{var r=0;return vi().forEach(function(o,l){var h=t+r;for(l=Ae[e+4*l>>2]=h,h=0;h<o.length;++h)Le[l++>>0]=o.charCodeAt(h);Le[l>>0]=0,r+=o.length+1}),0},xb:(e,t)=>{var r=vi();Ae[e>>2]=r.length;var o=0;return r.forEach(function(l){o+=l.length+1}),Ae[t>>2]=o,0},Jb:e=>{Me||(u.onExit&&u.onExit(e),Ke=!0),k(e,new zt(e))},M:()=>52,mb:function(){return 52},Cb:()=>52,pb:function(){return 70},S:(e,t,r,o)=>{for(var l=0,h=0;h<r;h++){var A=Ae[t>>2],m=Ae[t+4>>2];t+=8;for(var y=0;y<m;y++){var S=Q[A+y],B=Vo[e];S===0||S===10?((e===1?rt:U)(vt(B,0)),B.length=0):B.push(S)}l+=m}return Ae[o>>2]=l,0},aa:function(e){T.activeTexture(e)},ba:function(e,t){T.attachShader(Vt[e],Nt[t])},ca:function(e,t,r){T.bindAttribLocation(Vt[e],t,r?vt(Q,r):"")},da:function(e,t){e==35051?T.ef=t:e==35052&&(T.De=t),T.bindBuffer(e,pn[t])},$:function(e,t){T.bindFramebuffer(e,mn[t])},fc:function(e,t){T.bindRenderbuffer(e,en[t])},Rb:function(e,t){T.bindSampler(e,Pr[t])},ea:function(e,t){T.bindTexture(e,Et[t])},zc:gi,Cc:gi,fa:function(e,t,r,o){T.blendColor(e,t,r,o)},ga:function(e){T.blendEquation(e)},ha:function(e,t){T.blendFunc(e,t)},$b:function(e,t,r,o,l,h,A,m,y,S){T.blitFramebuffer(e,t,r,o,l,h,A,m,y,S)},ia:function(e,t,r,o){2<=de.version?r&&t?T.bufferData(e,Q,o,r,t):T.bufferData(e,t,o):T.bufferData(e,r?Q.subarray(r,r+t):t,o)},ja:function(e,t,r,o){2<=de.version?r&&T.bufferSubData(e,t,Q,o,r):T.bufferSubData(e,t,Q.subarray(o,o+r))},gc:function(e){return T.checkFramebufferStatus(e)},Q:function(e){T.clear(e)},_:function(e,t,r,o){T.clearColor(e,t,r,o)},R:function(e){T.clearStencil(e)},sb:function(e,t,r,o){return T.clientWaitSync(Sr[e],t,(r>>>0)+4294967296*o)},ka:function(e,t,r,o){T.colorMask(!!e,!!t,!!r,!!o)},la:function(e){T.compileShader(Nt[e])},ma:function(e,t,r,o,l,h,A,m){2<=de.version?T.De||!A?T.compressedTexImage2D(e,t,r,o,l,h,A,m):T.compressedTexImage2D(e,t,r,o,l,h,Q,m,A):T.compressedTexImage2D(e,t,r,o,l,h,m?Q.subarray(m,m+A):null)},na:function(e,t,r,o,l,h,A,m,y){2<=de.version?T.De||!m?T.compressedTexSubImage2D(e,t,r,o,l,h,A,m,y):T.compressedTexSubImage2D(e,t,r,o,l,h,A,Q,y,m):T.compressedTexSubImage2D(e,t,r,o,l,h,A,y?Q.subarray(y,y+m):null)},Zb:function(e,t,r,o,l){T.copyBufferSubData(e,t,r,o,l)},oa:function(e,t,r,o,l,h,A,m){T.copyTexSubImage2D(e,t,r,o,l,h,A,m)},pa:function(){var e=Lr(Vt),t=T.createProgram();return t.name=e,t.Ye=t.We=t.Xe=0,t.kf=1,Vt[e]=t,e},qa:function(e){var t=Lr(Nt);return Nt[t]=T.createShader(e),t},ra:function(e){T.cullFace(e)},sa:function(e,t){for(var r=0;r<e;r++){var o=X[t+4*r>>2],l=pn[o];l&&(T.deleteBuffer(l),l.name=0,pn[o]=null,o==T.ef&&(T.ef=0),o==T.De&&(T.De=0))}},hc:function(e,t){for(var r=0;r<e;++r){var o=X[t+4*r>>2],l=mn[o];l&&(T.deleteFramebuffer(l),l.name=0,mn[o]=null)}},ta:function(e){if(e){var t=Vt[e];t?(T.deleteProgram(t),t.name=0,Vt[e]=null):De(1281)}},ic:function(e,t){for(var r=0;r<e;r++){var o=X[t+4*r>>2],l=en[o];l&&(T.deleteRenderbuffer(l),l.name=0,en[o]=null)}},Sb:function(e,t){for(var r=0;r<e;r++){var o=X[t+4*r>>2],l=Pr[o];l&&(T.deleteSampler(l),l.name=0,Pr[o]=null)}},ua:function(e){if(e){var t=Nt[e];t?(T.deleteShader(t),Nt[e]=null):De(1281)}},_b:function(e){if(e){var t=Sr[e];t?(T.deleteSync(t),t.name=0,Sr[e]=null):De(1281)}},va:function(e,t){for(var r=0;r<e;r++){var o=X[t+4*r>>2],l=Et[o];l&&(T.deleteTexture(l),l.name=0,Et[o]=null)}},Ac:yi,Dc:yi,wa:function(e){T.depthMask(!!e)},xa:function(e){T.disable(e)},ya:function(e){T.disableVertexAttribArray(e)},za:function(e,t,r){T.drawArrays(e,t,r)},xc:function(e,t,r,o){T.drawArraysInstanced(e,t,r,o)},vc:function(e,t,r,o,l){T.pf.drawArraysInstancedBaseInstanceWEBGL(e,t,r,o,l)},tc:function(e,t){for(var r=yn[e],o=0;o<e;o++)r[o]=X[t+4*o>>2];T.drawBuffers(r)},Aa:_i,yc:function(e,t,r,o,l){T.drawElementsInstanced(e,t,r,o,l)},wc:function(e,t,r,o,l,h,A){T.pf.drawElementsInstancedBaseVertexBaseInstanceWEBGL(e,t,r,o,l,h,A)},nc:function(e,t,r,o,l,h){_i(e,o,l,h)},Ba:function(e){T.enable(e)},Ca:function(e){T.enableVertexAttribArray(e)},Xb:function(e,t){return(e=T.fenceSync(e,t))?(t=Lr(Sr),e.name=t,Sr[t]=e,t):0},Da:function(){T.finish()},Ea:function(){T.flush()},jc:function(e,t,r,o){T.framebufferRenderbuffer(e,t,r,en[o])},kc:function(e,t,r,o,l){T.framebufferTexture2D(e,t,r,Et[o],l)},Fa:function(e){T.frontFace(e)},Ga:function(e,t){Or(e,t,"createBuffer",pn)},lc:function(e,t){Or(e,t,"createFramebuffer",mn)},mc:function(e,t){Or(e,t,"createRenderbuffer",en)},Tb:function(e,t){Or(e,t,"createSampler",Pr)},Ha:function(e,t){Or(e,t,"createTexture",Et)},Bc:wi,Ec:wi,bc:function(e){T.generateMipmap(e)},Ia:function(e,t,r){r?X[r>>2]=T.getBufferParameter(e,t):De(1281)},Ja:function(){var e=T.getError()||gn;return gn=0,e},Ka:function(e,t){bi(e,t,2)},cc:function(e,t,r,o){e=T.getFramebufferAttachmentParameter(e,t,r),(e instanceof WebGLRenderbuffer||e instanceof WebGLTexture)&&(e=e.name|0),X[o>>2]=e},L:function(e,t){bi(e,t,0)},La:function(e,t,r,o){e=T.getProgramInfoLog(Vt[e]),e===null&&(e="(unknown error)"),t=0<t&&o?Dt(e,Q,o,t):0,r&&(X[r>>2]=t)},Ma:function(e,t,r){if(r)if(e>=fi)De(1281);else if(e=Vt[e],t==35716)e=T.getProgramInfoLog(e),e===null&&(e="(unknown error)"),X[r>>2]=e.length+1;else if(t==35719){if(!e.Ye)for(t=0;t<T.getProgramParameter(e,35718);++t)e.Ye=Math.max(e.Ye,T.getActiveUniform(e,t).name.length+1);X[r>>2]=e.Ye}else if(t==35722){if(!e.We)for(t=0;t<T.getProgramParameter(e,35721);++t)e.We=Math.max(e.We,T.getActiveAttrib(e,t).name.length+1);X[r>>2]=e.We}else if(t==35381){if(!e.Xe)for(t=0;t<T.getProgramParameter(e,35382);++t)e.Xe=Math.max(e.Xe,T.getActiveUniformBlockName(e,t).length+1);X[r>>2]=e.Xe}else X[r>>2]=T.getProgramParameter(e,t);else De(1281)},dc:function(e,t,r){r?X[r>>2]=T.getRenderbufferParameter(e,t):De(1281)},Na:function(e,t,r,o){e=T.getShaderInfoLog(Nt[e]),e===null&&(e="(unknown error)"),t=0<t&&o?Dt(e,Q,o,t):0,r&&(X[r>>2]=t)},Ob:function(e,t,r,o){e=T.getShaderPrecisionFormat(e,t),X[r>>2]=e.rangeMin,X[r+4>>2]=e.rangeMax,X[o>>2]=e.precision},Oa:function(e,t,r){r?t==35716?(e=T.getShaderInfoLog(Nt[e]),e===null&&(e="(unknown error)"),X[r>>2]=e?e.length+1:0):t==35720?(e=T.getShaderSource(Nt[e]),X[r>>2]=e?e.length+1:0):X[r>>2]=T.getShaderParameter(Nt[e],t):De(1281)},P:function(e){var t=di[e];if(!t){switch(e){case 7939:t=T.getSupportedExtensions()||[],t=t.concat(t.map(function(o){return"GL_"+o})),t=tn(t.join(" "));break;case 7936:case 7937:case 37445:case 37446:(t=T.getParameter(e))||De(1280),t=t&&tn(t);break;case 7938:t=T.getParameter(7938),t=2<=de.version?"OpenGL ES 3.0 ("+t+")":"OpenGL ES 2.0 ("+t+")",t=tn(t);break;case 35724:t=T.getParameter(35724);var r=t.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);r!==null&&(r[1].length==3&&(r[1]+="0"),t="OpenGL ES GLSL ES "+r[1]+" ("+t+")"),t=tn(t);break;default:De(1280)}di[e]=t}return t},jb:function(e,t){if(2>de.version)return De(1282),0;var r=hi[e];if(r)return 0>t||t>=r.length?(De(1281),0):r[t];switch(e){case 7939:return r=T.getSupportedExtensions()||[],r=r.concat(r.map(function(o){return"GL_"+o})),r=r.map(function(o){return tn(o)}),r=hi[e]=r,0>t||t>=r.length?(De(1281),0):r[t];default:return De(1280),0}},Pa:function(e,t){if(t=t?vt(Q,t):"",e=Vt[e]){var r=e,o=r.Ne,l=r.yf,h;if(!o)for(r.Ne=o={},r.xf={},h=0;h<T.getProgramParameter(r,35718);++h){var A=T.getActiveUniform(r,h),m=A.name;A=A.size;var y=xi(m);y=0<y?m.slice(0,y):m;var S=r.kf;for(r.kf+=A,l[y]=[A,S],m=0;m<A;++m)o[S]=m,r.xf[S++]=y}if(r=e.Ne,o=0,l=t,h=xi(t),0<h&&(o=parseInt(t.slice(h+1))>>>0,l=t.slice(0,h)),(l=e.yf[l])&&o<l[0]&&(o+=l[1],r[o]=r[o]||T.getUniformLocation(e,t)))return o}else De(1281);return-1},Pb:function(e,t,r){for(var o=yn[t],l=0;l<t;l++)o[l]=X[r+4*l>>2];T.invalidateFramebuffer(e,o)},Qb:function(e,t,r,o,l,h,A){for(var m=yn[t],y=0;y<t;y++)m[y]=X[r+4*y>>2];T.invalidateSubFramebuffer(e,m,o,l,h,A)},Yb:function(e){return T.isSync(Sr[e])},Qa:function(e){return(e=Et[e])?T.isTexture(e):0},Ra:function(e){T.lineWidth(e)},Sa:function(e){e=Vt[e],T.linkProgram(e),e.Ne=0,e.yf={}},rc:function(e,t,r,o,l,h){T.uf.multiDrawArraysInstancedBaseInstanceWEBGL(e,X,t>>2,X,r>>2,X,o>>2,Ae,l>>2,h)},sc:function(e,t,r,o,l,h,A,m){T.uf.multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL(e,X,t>>2,r,X,o>>2,X,l>>2,X,h>>2,Ae,A>>2,m)},Ta:function(e,t){e==3317&&(pi=t),T.pixelStorei(e,t)},uc:function(e){T.readBuffer(e)},Ua:function(e,t,r,o,l,h,A){if(2<=de.version)if(T.ef)T.readPixels(e,t,r,o,l,h,A);else{var m=_n(h);T.readPixels(e,t,r,o,l,h,m,A>>31-Math.clz32(m.BYTES_PER_ELEMENT))}else(A=Nn(h,l,r,o,A))?T.readPixels(e,t,r,o,l,h,A):De(1280)},ec:function(e,t,r,o){T.renderbufferStorage(e,t,r,o)},ac:function(e,t,r,o,l){T.renderbufferStorageMultisample(e,t,r,o,l)},Ub:function(e,t,r){T.samplerParameterf(Pr[e],t,r)},Vb:function(e,t,r){T.samplerParameteri(Pr[e],t,r)},Wb:function(e,t,r){T.samplerParameteri(Pr[e],t,X[r>>2])},Va:function(e,t,r,o){T.scissor(e,t,r,o)},Wa:function(e,t,r,o){for(var l="",h=0;h<t;++h){var A=o?X[o+4*h>>2]:-1,m=X[r+4*h>>2];A=m?vt(Q,m,0>A?void 0:A):"",l+=A}T.shaderSource(Nt[e],l)},Xa:function(e,t,r){T.stencilFunc(e,t,r)},Ya:function(e,t,r,o){T.stencilFuncSeparate(e,t,r,o)},Za:function(e){T.stencilMask(e)},_a:function(e,t){T.stencilMaskSeparate(e,t)},$a:function(e,t,r){T.stencilOp(e,t,r)},ab:function(e,t,r,o){T.stencilOpSeparate(e,t,r,o)},bb:function(e,t,r,o,l,h,A,m,y){if(2<=de.version)if(T.De)T.texImage2D(e,t,r,o,l,h,A,m,y);else if(y){var S=_n(m);T.texImage2D(e,t,r,o,l,h,A,m,S,y>>31-Math.clz32(S.BYTES_PER_ELEMENT))}else T.texImage2D(e,t,r,o,l,h,A,m,null);else T.texImage2D(e,t,r,o,l,h,A,m,y?Nn(m,A,o,l,y):null)},cb:function(e,t,r){T.texParameterf(e,t,r)},db:function(e,t,r){T.texParameterf(e,t,le[r>>2])},eb:function(e,t,r){T.texParameteri(e,t,r)},fb:function(e,t,r){T.texParameteri(e,t,X[r>>2])},oc:function(e,t,r,o,l){T.texStorage2D(e,t,r,o,l)},gb:function(e,t,r,o,l,h,A,m,y){if(2<=de.version)if(T.De)T.texSubImage2D(e,t,r,o,l,h,A,m,y);else if(y){var S=_n(m);T.texSubImage2D(e,t,r,o,l,h,A,m,S,y>>31-Math.clz32(S.BYTES_PER_ELEMENT))}else T.texSubImage2D(e,t,r,o,l,h,A,m,null);else S=null,y&&(S=Nn(m,A,l,h,y)),T.texSubImage2D(e,t,r,o,l,h,A,m,S)},hb:function(e,t){T.uniform1f($e(e),t)},ib:function(e,t,r){if(2<=de.version)t&&T.uniform1fv($e(e),le,r>>2,t);else{if(288>=t)for(var o=pr[t-1],l=0;l<t;++l)o[l]=le[r+4*l>>2];else o=le.subarray(r>>2,r+4*t>>2);T.uniform1fv($e(e),o)}},Zc:function(e,t){T.uniform1i($e(e),t)},_c:function(e,t,r){if(2<=de.version)t&&T.uniform1iv($e(e),X,r>>2,t);else{if(288>=t)for(var o=rn[t-1],l=0;l<t;++l)o[l]=X[r+4*l>>2];else o=X.subarray(r>>2,r+4*t>>2);T.uniform1iv($e(e),o)}},$c:function(e,t,r){T.uniform2f($e(e),t,r)},ad:function(e,t,r){if(2<=de.version)t&&T.uniform2fv($e(e),le,r>>2,2*t);else{if(144>=t)for(var o=pr[2*t-1],l=0;l<2*t;l+=2)o[l]=le[r+4*l>>2],o[l+1]=le[r+(4*l+4)>>2];else o=le.subarray(r>>2,r+8*t>>2);T.uniform2fv($e(e),o)}},Yc:function(e,t,r){T.uniform2i($e(e),t,r)},Xc:function(e,t,r){if(2<=de.version)t&&T.uniform2iv($e(e),X,r>>2,2*t);else{if(144>=t)for(var o=rn[2*t-1],l=0;l<2*t;l+=2)o[l]=X[r+4*l>>2],o[l+1]=X[r+(4*l+4)>>2];else o=X.subarray(r>>2,r+8*t>>2);T.uniform2iv($e(e),o)}},Wc:function(e,t,r,o){T.uniform3f($e(e),t,r,o)},Vc:function(e,t,r){if(2<=de.version)t&&T.uniform3fv($e(e),le,r>>2,3*t);else{if(96>=t)for(var o=pr[3*t-1],l=0;l<3*t;l+=3)o[l]=le[r+4*l>>2],o[l+1]=le[r+(4*l+4)>>2],o[l+2]=le[r+(4*l+8)>>2];else o=le.subarray(r>>2,r+12*t>>2);T.uniform3fv($e(e),o)}},Uc:function(e,t,r,o){T.uniform3i($e(e),t,r,o)},Tc:function(e,t,r){if(2<=de.version)t&&T.uniform3iv($e(e),X,r>>2,3*t);else{if(96>=t)for(var o=rn[3*t-1],l=0;l<3*t;l+=3)o[l]=X[r+4*l>>2],o[l+1]=X[r+(4*l+4)>>2],o[l+2]=X[r+(4*l+8)>>2];else o=X.subarray(r>>2,r+12*t>>2);T.uniform3iv($e(e),o)}},Sc:function(e,t,r,o,l){T.uniform4f($e(e),t,r,o,l)},Rc:function(e,t,r){if(2<=de.version)t&&T.uniform4fv($e(e),le,r>>2,4*t);else{if(72>=t){var o=pr[4*t-1],l=le;r>>=2;for(var h=0;h<4*t;h+=4){var A=r+h;o[h]=l[A],o[h+1]=l[A+1],o[h+2]=l[A+2],o[h+3]=l[A+3]}}else o=le.subarray(r>>2,r+16*t>>2);T.uniform4fv($e(e),o)}},Fc:function(e,t,r,o,l){T.uniform4i($e(e),t,r,o,l)},Gc:function(e,t,r){if(2<=de.version)t&&T.uniform4iv($e(e),X,r>>2,4*t);else{if(72>=t)for(var o=rn[4*t-1],l=0;l<4*t;l+=4)o[l]=X[r+4*l>>2],o[l+1]=X[r+(4*l+4)>>2],o[l+2]=X[r+(4*l+8)>>2],o[l+3]=X[r+(4*l+12)>>2];else o=X.subarray(r>>2,r+16*t>>2);T.uniform4iv($e(e),o)}},Hc:function(e,t,r,o){if(2<=de.version)t&&T.uniformMatrix2fv($e(e),!!r,le,o>>2,4*t);else{if(72>=t)for(var l=pr[4*t-1],h=0;h<4*t;h+=4)l[h]=le[o+4*h>>2],l[h+1]=le[o+(4*h+4)>>2],l[h+2]=le[o+(4*h+8)>>2],l[h+3]=le[o+(4*h+12)>>2];else l=le.subarray(o>>2,o+16*t>>2);T.uniformMatrix2fv($e(e),!!r,l)}},Ic:function(e,t,r,o){if(2<=de.version)t&&T.uniformMatrix3fv($e(e),!!r,le,o>>2,9*t);else{if(32>=t)for(var l=pr[9*t-1],h=0;h<9*t;h+=9)l[h]=le[o+4*h>>2],l[h+1]=le[o+(4*h+4)>>2],l[h+2]=le[o+(4*h+8)>>2],l[h+3]=le[o+(4*h+12)>>2],l[h+4]=le[o+(4*h+16)>>2],l[h+5]=le[o+(4*h+20)>>2],l[h+6]=le[o+(4*h+24)>>2],l[h+7]=le[o+(4*h+28)>>2],l[h+8]=le[o+(4*h+32)>>2];else l=le.subarray(o>>2,o+36*t>>2);T.uniformMatrix3fv($e(e),!!r,l)}},Jc:function(e,t,r,o){if(2<=de.version)t&&T.uniformMatrix4fv($e(e),!!r,le,o>>2,16*t);else{if(18>=t){var l=pr[16*t-1],h=le;o>>=2;for(var A=0;A<16*t;A+=16){var m=o+A;l[A]=h[m],l[A+1]=h[m+1],l[A+2]=h[m+2],l[A+3]=h[m+3],l[A+4]=h[m+4],l[A+5]=h[m+5],l[A+6]=h[m+6],l[A+7]=h[m+7],l[A+8]=h[m+8],l[A+9]=h[m+9],l[A+10]=h[m+10],l[A+11]=h[m+11],l[A+12]=h[m+12],l[A+13]=h[m+13],l[A+14]=h[m+14],l[A+15]=h[m+15]}}else l=le.subarray(o>>2,o+64*t>>2);T.uniformMatrix4fv($e(e),!!r,l)}},Kc:function(e){e=Vt[e],T.useProgram(e),T.Kf=e},Lc:function(e,t){T.vertexAttrib1f(e,t)},Mc:function(e,t){T.vertexAttrib2f(e,le[t>>2],le[t+4>>2])},Nc:function(e,t){T.vertexAttrib3f(e,le[t>>2],le[t+4>>2],le[t+8>>2])},Oc:function(e,t){T.vertexAttrib4f(e,le[t>>2],le[t+4>>2],le[t+8>>2],le[t+12>>2])},pc:function(e,t){T.vertexAttribDivisor(e,t)},qc:function(e,t,r,o,l){T.vertexAttribIPointer(e,t,r,o,l)},Pc:function(e,t,r,o,l,h){T.vertexAttribPointer(e,t,r,!!o,l,h)},Qc:function(e,t,r,o){T.viewport(e,t,r,o)},rb:function(e,t,r,o){T.waitSync(Sr[e],t,(r>>>0)+4294967296*o)},j:Yo,n:ea,k:Jo,I:ra,Lb:na,Y:ia,X:aa,O:Qo,o:Zo,x:Xo,r:zo,v:qo,Kb:oa,Mb:ta,Nb:Ko,tb:(e,t,r,o)=>Wo(e,t,r,o)};(function(){function e(r){if(se=r=r.exports,Ce=se.bd,Wr(),Je=se.dd,yt.unshift(se.cd),Ot--,u.monitorRunDependencies&&u.monitorRunDependencies(Ot),Ot==0&&bt){var o=bt;bt=null,o()}return r}var t={a:Go};if(Ot++,u.monitorRunDependencies&&u.monitorRunDependencies(Ot),u.instantiateWasm)try{return u.instantiateWasm(t,e)}catch(r){U("Module.instantiateWasm callback failed with error: "+r),P(r)}return xt(t,function(r){e(r.instance)}).catch(P),{}})();var sr=u._free=e=>(sr=u._free=se.ed)(e),xn=u._malloc=e=>(xn=u._malloc=se.fd)(e),Ci=e=>(Ci=se.gd)(e);u.__embind_initialize_bindings=()=>(u.__embind_initialize_bindings=se.hd)();var st=(e,t)=>(st=se.id)(e,t),lt=()=>(lt=se.jd)(),ut=e=>(ut=se.kd)(e);u.dynCall_viji=(e,t,r,o,l)=>(u.dynCall_viji=se.ld)(e,t,r,o,l),u.dynCall_vijiii=(e,t,r,o,l,h,A)=>(u.dynCall_vijiii=se.md)(e,t,r,o,l,h,A),u.dynCall_viiiiij=(e,t,r,o,l,h,A,m)=>(u.dynCall_viiiiij=se.nd)(e,t,r,o,l,h,A,m),u.dynCall_jiiiijiiiii=(e,t,r,o,l,h,A,m,y,S,B,V)=>(u.dynCall_jiiiijiiiii=se.od)(e,t,r,o,l,h,A,m,y,S,B,V),u.dynCall_viiij=(e,t,r,o,l,h)=>(u.dynCall_viiij=se.pd)(e,t,r,o,l,h),u.dynCall_jii=(e,t,r)=>(u.dynCall_jii=se.qd)(e,t,r),u.dynCall_vij=(e,t,r,o)=>(u.dynCall_vij=se.rd)(e,t,r,o),u.dynCall_iiij=(e,t,r,o,l)=>(u.dynCall_iiij=se.sd)(e,t,r,o,l),u.dynCall_iiiij=(e,t,r,o,l,h)=>(u.dynCall_iiiij=se.td)(e,t,r,o,l,h),u.dynCall_viij=(e,t,r,o,l)=>(u.dynCall_viij=se.ud)(e,t,r,o,l),u.dynCall_ji=(e,t)=>(u.dynCall_ji=se.vd)(e,t),u.dynCall_iij=(e,t,r,o)=>(u.dynCall_iij=se.wd)(e,t,r,o),u.dynCall_jiiiiii=(e,t,r,o,l,h,A)=>(u.dynCall_jiiiiii=se.xd)(e,t,r,o,l,h,A),u.dynCall_jiiiiji=(e,t,r,o,l,h,A,m)=>(u.dynCall_jiiiiji=se.yd)(e,t,r,o,l,h,A,m),u.dynCall_iijj=(e,t,r,o,l,h)=>(u.dynCall_iijj=se.zd)(e,t,r,o,l,h),u.dynCall_iiiji=(e,t,r,o,l,h)=>(u.dynCall_iiiji=se.Ad)(e,t,r,o,l,h),u.dynCall_iiji=(e,t,r,o,l)=>(u.dynCall_iiji=se.Bd)(e,t,r,o,l),u.dynCall_iijjiii=(e,t,r,o,l,h,A,m,y)=>(u.dynCall_iijjiii=se.Cd)(e,t,r,o,l,h,A,m,y),u.dynCall_vijjjii=(e,t,r,o,l,h,A,m,y,S)=>(u.dynCall_vijjjii=se.Dd)(e,t,r,o,l,h,A,m,y,S),u.dynCall_jiji=(e,t,r,o,l)=>(u.dynCall_jiji=se.Ed)(e,t,r,o,l),u.dynCall_viijii=(e,t,r,o,l,h,A)=>(u.dynCall_viijii=se.Fd)(e,t,r,o,l,h,A),u.dynCall_iiiiij=(e,t,r,o,l,h,A)=>(u.dynCall_iiiiij=se.Gd)(e,t,r,o,l,h,A),u.dynCall_iiiiijj=(e,t,r,o,l,h,A,m,y)=>(u.dynCall_iiiiijj=se.Hd)(e,t,r,o,l,h,A,m,y),u.dynCall_iiiiiijj=(e,t,r,o,l,h,A,m,y,S)=>(u.dynCall_iiiiiijj=se.Id)(e,t,r,o,l,h,A,m,y,S);function Jo(e,t,r,o){var l=lt();try{return Je.get(e)(t,r,o)}catch(h){if(ut(l),h!==h+0)throw h;st(1,0)}}function Yo(e,t){var r=lt();try{return Je.get(e)(t)}catch(o){if(ut(r),o!==o+0)throw o;st(1,0)}}function Ko(e,t,r,o,l,h,A,m,y,S){var B=lt();try{Je.get(e)(t,r,o,l,h,A,m,y,S)}catch(V){if(ut(B),V!==V+0)throw V;st(1,0)}}function zo(e,t,r,o){var l=lt();try{Je.get(e)(t,r,o)}catch(h){if(ut(l),h!==h+0)throw h;st(1,0)}}function Xo(e,t,r){var o=lt();try{Je.get(e)(t,r)}catch(l){if(ut(o),l!==l+0)throw l;st(1,0)}}function Qo(e){var t=lt();try{Je.get(e)()}catch(r){if(ut(t),r!==r+0)throw r;st(1,0)}}function qo(e,t,r,o,l){var h=lt();try{Je.get(e)(t,r,o,l)}catch(A){if(ut(h),A!==A+0)throw A;st(1,0)}}function Zo(e,t){var r=lt();try{Je.get(e)(t)}catch(o){if(ut(r),o!==o+0)throw o;st(1,0)}}function ea(e,t,r){var o=lt();try{return Je.get(e)(t,r)}catch(l){if(ut(o),l!==l+0)throw l;st(1,0)}}function ta(e,t,r,o,l,h,A){var m=lt();try{Je.get(e)(t,r,o,l,h,A)}catch(y){if(ut(m),y!==y+0)throw y;st(1,0)}}function ra(e,t,r,o,l){var h=lt();try{return Je.get(e)(t,r,o,l)}catch(A){if(ut(h),A!==A+0)throw A;st(1,0)}}function na(e,t,r,o,l,h){var A=lt();try{return Je.get(e)(t,r,o,l,h)}catch(m){if(ut(A),m!==m+0)throw m;st(1,0)}}function ia(e,t,r,o,l,h,A){var m=lt();try{return Je.get(e)(t,r,o,l,h,A)}catch(y){if(ut(m),y!==y+0)throw y;st(1,0)}}function oa(e,t,r,o,l,h){var A=lt();try{Je.get(e)(t,r,o,l,h)}catch(m){if(ut(A),m!==m+0)throw m;st(1,0)}}function aa(e,t,r,o,l,h,A,m,y,S){var B=lt();try{return Je.get(e)(t,r,o,l,h,A,m,y,S)}catch(V){if(ut(B),V!==V+0)throw V;st(1,0)}}var An;bt=function e(){An||Ti(),An||(bt=e)};function Ti(){function e(){if(!An&&(An=!0,u.calledRun=!0,!Ke)){if(Tr(yt),v(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Jt.unshift(t)}Tr(Jt)}}if(!(0<Ot)){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)un();Tr(ir),0<Ot||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),e()},1)):e())}}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return Ti(),_.ready}})();p.exports=d})(go);var Ia=go.exports;const Da=La(Ia),ja=Da({locateFile:p=>"node_modules/canvaskit-wasm/bin/"+p}),Va=()=>ja;async function Na(){let p=await vo();return await p.loadPackage("https://cdn.jsdelivr.net/pyodide/v0.25.0/full/packaging-23.1-py3-none-any.whl"),await p.loadPackage("https://cdn.jsdelivr.net/pyodide/v0.25.0/full/micropip-0.5.0-py3-none-any.whl"),await p.pyimport("micropip").install("lark"),await p.FS.writeFile("lang.py",Ra,{encoding:"utf8"}),p.pyimport("lang")}let Xn=null;const oi=()=>(Xn===null&&(Xn=Na()),Xn);function Wa(p){let s;return{c(){s=q("div"),this.h()},l(d){s=Z(d,"DIV",{class:!0}),re(s).forEach(j),this.h()},h(){K(s,"class","spinner circle fast dark svelte-1ul2mr1")},m(d,g){ve(d,s,g)},p:Oe,i:Oe,o:Oe,d(d){d&&j(s)}}}class Ha extends pt{constructor(s){super(),mt(this,s,null,Wa,ht,{})}}function Di(p){let s,d,g;return d=new Ha({}),{c(){s=q("div"),Ne(d.$$.fragment),this.h()},l(_){s=Z(_,"DIV",{class:!0});var u=re(s);We(d.$$.fragment,u),u.forEach(j),this.h()},h(){K(s,"class","absolute left-0 right-0 top-0 bottom-0 flex justify-center items-center")},m(_,u){ve(_,s,u),He(d,s,null),g=!0},i(_){g||(be(d.$$.fragment,_),g=!0)},o(_){Pe(d.$$.fragment,_),g=!1},d(_){_&&j(s),Ue(d)}}}function Ua(p){let s,d,g,_,u,v=p[1]&&Di();return{c(){s=q("div"),d=q("div"),v&&v.c(),g=ye(),_=q("canvas"),this.h()},l(P){s=Z(P,"DIV",{});var C=re(s);d=Z(C,"DIV",{class:!0});var $=re(d);v&&v.l($),g=_e($),_=Z($,"CANVAS",{width:!0,height:!0}),re(_).forEach(j),$.forEach(j),C.forEach(j),this.h()},h(){K(_,"width",p[0]),K(_,"height",p[0]),K(d,"class","flex justify-center items-center relative"),Sn(d,"width",p[0]+"px"),Sn(d,"height",p[0]+"px")},m(P,C){ve(P,s,C),W(s,d),v&&v.m(d,null),W(d,g),W(d,_),p[4](_),u=!0},p(P,[C]){P[1]?v?C&2&&be(v,1):(v=Di(),v.c(),be(v,1),v.m(d,g)):v&&(On(),Pe(v,1,1,()=>{v=null}),Bn()),(!u||C&1)&&K(_,"width",P[0]),(!u||C&1)&&K(_,"height",P[0]),C&1&&Sn(d,"width",P[0]+"px"),C&1&&Sn(d,"height",P[0]+"px")},i(P){u||(be(v),u=!0)},o(P){Pe(v),u=!1},d(P){P&&j(s),v&&v.d(),p[4](null)}}}function Ga(p,s,d){let g=!0,{expression:_="(- (+ (- (Circle 7 8 8) (Circle 6 8 8)) (Quad 8 8 6 6 H)) (Quad 8 8 A 1 G))"}=s,{size:u=200}=s,v;function P($){Promise.all([Va(),oi()]).then(([k,H])=>{const G=H.expression_to_ops($),Y=se=>{const Ke=se.split(" "),Le=Ke[0],Q=Ke.slice(1).map(Number),Be=new k.Path;if(Le==="circle")return Be.addCircle(Q[1],Q[2],Q[0]),Be;if(Le==="quad")return Be.moveTo(Q[0],Q[1]),Be.lineTo(Q[2],Q[3]),Be.lineTo(Q[4],Q[5]),Be.lineTo(Q[6],Q[7]),Be.close(),Be};let ie=new k.Path,J=k.PathOp.Union;for(const se of G)se==="+"?J=k.PathOp.Union:se==="-"?J=k.PathOp.Difference:ie.op(Y(se),J);const oe=k.MakeSWCanvasSurface(v),Se=oe.width(),Re=oe.height(),fe=Se/32,rt=Re/32,U=k.parseColorString("#ecf0f1"),ee=k.parseColorString("#2d3436"),Me=new k.Paint;Me.setColor(ee),Me.setStyle(k.PaintStyle.Fill),Me.setAntiAlias(!0),k.RRectXY(k.LTRBRect(10,60,210,260),25,15);function Ce(se){se.clear(U),se.scale(fe,rt),se.drawPath(ie,Me)}oe.drawOnce(Ce),d(1,g=!1)})}function C($){ua[$?"unshift":"push"](()=>{v=$,d(2,v)})}return p.$$set=$=>{"expression"in $&&d(3,_=$.expression),"size"in $&&d(0,u=$.size)},p.$$.update=()=>{p.$$.dirty&8&&P(_)},[u,g,v,_,C]}class yo extends pt{constructor(s){super(),mt(this,s,Ga,Ua,ht,{expression:3,size:0})}}function ji(p){let s,d,g,_;const u=[za,Ka,Ya,Ja],v=[];function P(C,$){return C[0].data==="s"?0:C[0].data==="binop"?1:C[0].data==="circle"?2:C[0].data==="quad"?3:-1}return~(s=P(p))&&(d=v[s]=u[s](p)),{c(){d&&d.c(),g=En()},l(C){d&&d.l(C),g=En()},m(C,$){~s&&v[s].m(C,$),ve(C,g,$),_=!0},p(C,$){let k=s;s=P(C),s===k?~s&&v[s].p(C,$):(d&&(On(),Pe(v[k],1,1,()=>{v[k]=null}),Bn()),~s?(d=v[s],d?d.p(C,$):(d=v[s]=u[s](C),d.c()),be(d,1),d.m(g.parentNode,g)):d=null)},i(C){_||(be(d),_=!0)},o(C){Pe(d),_=!1},d(C){C&&j(g),~s&&v[s].d(C)}}}function Ja(p){let s,d,g,_="Quad",u,v=p[3]()+"",P,C;return{c(){s=q("div"),d=$t("("),g=q("span"),g.textContent=_,u=ye(),P=$t(v),C=$t(")"),this.h()},l($){s=Z($,"DIV",{});var k=re(s);d=Rt(k,"("),g=Z(k,"SPAN",{class:!0,"data-svelte-h":!0}),Ze(g)!=="svelte-r4duer"&&(g.textContent=_),u=_e(k),P=Rt(k,v),C=Rt(k,")"),k.forEach(j),this.h()},h(){K(g,"class","text-blue-700 font-bold")},m($,k){ve($,s,k),W(s,d),W(s,g),W(s,u),W(s,P),W(s,C)},p:Oe,i:Oe,o:Oe,d($){$&&j(s)}}}function Ya(p){let s,d,g,_="Circle",u,v=p[2]()+"",P,C;return{c(){s=q("div"),d=$t("("),g=q("span"),g.textContent=_,u=ye(),P=$t(v),C=$t(")"),this.h()},l($){s=Z($,"DIV",{});var k=re(s);d=Rt(k,"("),g=Z(k,"SPAN",{class:!0,"data-svelte-h":!0}),Ze(g)!=="svelte-1adp9h0"&&(g.textContent=_),u=_e(k),P=Rt(k,v),C=Rt(k,")"),k.forEach(j),this.h()},h(){K(g,"class","text-blue-700 font-bold")},m($,k){ve($,s,k),W(s,d),W(s,g),W(s,u),W(s,P),W(s,C)},p:Oe,i:Oe,o:Oe,d($){$&&j(s)}}}function Ka(p){let s,d,g,_=p[0].children[0].data==="subtract"?"Subtract":"Add",u,v,P,C,$="  ",k,H,G,Y,ie,J,oe,Se,Re,fe=")",rt;return Y=new Rn({props:{data:p[0].children[1],depth:p[1]+1}}),oe=new Rn({props:{data:p[0].children[2],depth:p[1]+1}}),{c(){s=q("div"),d=$t("("),g=q("span"),u=$t(_),v=ye(),P=q("div"),C=q("div"),C.textContent=$,k=ye(),H=q("div"),G=q("div"),Ne(Y.$$.fragment),ie=ye(),J=q("div"),Ne(oe.$$.fragment),Se=ye(),Re=q("div"),Re.textContent=fe,this.h()},l(U){s=Z(U,"DIV",{});var ee=re(s);d=Rt(ee,"("),g=Z(ee,"SPAN",{class:!0});var Me=re(g);u=Rt(Me,_),Me.forEach(j),ee.forEach(j),v=_e(U),P=Z(U,"DIV",{class:!0});var Ce=re(P);C=Z(Ce,"DIV",{"data-svelte-h":!0}),Ze(C)!=="svelte-v7rk8c"&&(C.textContent=$),k=_e(Ce),H=Z(Ce,"DIV",{});var se=re(H);G=Z(se,"DIV",{});var Ke=re(G);We(Y.$$.fragment,Ke),Ke.forEach(j),ie=_e(se),J=Z(se,"DIV",{});var Le=re(J);We(oe.$$.fragment,Le),Le.forEach(j),se.forEach(j),Ce.forEach(j),Se=_e(U),Re=Z(U,"DIV",{"data-svelte-h":!0}),Ze(Re)!=="svelte-hea7e1"&&(Re.textContent=fe),this.h()},h(){K(g,"class","text-blue-700 font-bold"),K(P,"class","flex")},m(U,ee){ve(U,s,ee),W(s,d),W(s,g),W(g,u),ve(U,v,ee),ve(U,P,ee),W(P,C),W(P,k),W(P,H),W(H,G),He(Y,G,null),W(H,ie),W(H,J),He(oe,J,null),ve(U,Se,ee),ve(U,Re,ee),rt=!0},p(U,ee){(!rt||ee&1)&&_!==(_=U[0].children[0].data==="subtract"?"Subtract":"Add")&&ca(u,_);const Me={};ee&1&&(Me.data=U[0].children[1]),ee&2&&(Me.depth=U[1]+1),Y.$set(Me);const Ce={};ee&1&&(Ce.data=U[0].children[2]),ee&2&&(Ce.depth=U[1]+1),oe.$set(Ce)},i(U){rt||(be(Y.$$.fragment,U),be(oe.$$.fragment,U),rt=!0)},o(U){Pe(Y.$$.fragment,U),Pe(oe.$$.fragment,U),rt=!1},d(U){U&&(j(s),j(v),j(P),j(Se),j(Re)),Ue(Y),Ue(oe)}}}function za(p){let s,d;return s=new Rn({props:{data:p[0].children[0],depth:p[1]}}),{c(){Ne(s.$$.fragment)},l(g){We(s.$$.fragment,g)},m(g,_){He(s,g,_),d=!0},p(g,_){const u={};_&1&&(u.data=g[0].children[0]),_&2&&(u.depth=g[1]),s.$set(u)},i(g){d||(be(s.$$.fragment,g),d=!0)},o(g){Pe(s.$$.fragment,g),d=!1},d(g){Ue(s,g)}}}function Xa(p){let s,d,g=p[0]&&ji(p);return{c(){g&&g.c(),s=En()},l(_){g&&g.l(_),s=En()},m(_,u){g&&g.m(_,u),ve(_,s,u),d=!0},p(_,[u]){_[0]?g?(g.p(_,u),u&1&&be(g,1)):(g=ji(_),g.c(),be(g,1),g.m(s.parentNode,s)):g&&(On(),Pe(g,1,1,()=>{g=null}),Bn())},i(_){d||(be(g),d=!0)},o(_){Pe(g),d=!1},d(_){_&&j(s),g&&g.d(_)}}}function Qa(p,s,d){let{data:g}=s,{depth:_=0}=s;const u={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,zero:0,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,zerodeg:0,onedeg:45,twodeg:90,threedeg:135,fourdeg:180,fivedeg:225,sixdeg:270,sevendeg:315},v=()=>{const C=g.children[0].data,$=g.children[1].data,k=g.children[2].data;return`r=${u[C]} x=${u[$]} y=${u[k]}`},P=()=>{const C=g.children[0].data,$=g.children[1].data,k=g.children[2].data,H=g.children[3].data,G=g.children[4].data;return`x=${u[C]} y=${u[$]} w=${u[k]} h=${u[H]} angle=${u[G]}°`};return p.$$set=C=>{"data"in C&&d(0,g=C.data),"depth"in C&&d(1,_=C.depth)},[g,_,v,P]}class Rn extends pt{constructor(s){super(),mt(this,s,Qa,Xa,ht,{data:0,depth:1})}}function qa(p){let s,d;return s=new Rn({props:{data:p[0]}}),{c(){Ne(s.$$.fragment)},l(g){We(s.$$.fragment,g)},m(g,_){He(s,g,_),d=!0},p(g,[_]){const u={};_&1&&(u.data=g[0]),s.$set(u)},i(g){d||(be(s.$$.fragment,g),d=!0)},o(g){Pe(s.$$.fragment,g),d=!1},d(g){Ue(s,g)}}}function Za(p,s,d){let{expression:g="(- (+ (- (Circle 7 8 8) (Circle 6 8 8)) (Quad 8 8 6 6 H)) (Quad 8 8 A 1 G))"}=s,_=null;const u=v=>{oi().then(P=>{d(0,_=P.parse_expression(v))})};return p.$$set=v=>{"expression"in v&&d(1,g=v.expression)},p.$$.update=()=>{p.$$.dirty&2&&u(g)},[_,g]}class es extends pt{constructor(s){super(),mt(this,s,Za,qa,ht,{expression:1})}}function ts(p){let s,d,g,_,u,v,P;const C=p[3].default,$=Hi(C,p,p[2],null);return{c(){s=q("button"),d=q("div"),g=q("div"),$&&$.c(),this.h()},l(k){s=Z(k,"BUTTON",{class:!0});var H=re(s);d=Z(H,"DIV",{class:!0});var G=re(d);g=Z(G,"DIV",{class:!0});var Y=re(g);$&&$.l(Y),Y.forEach(j),G.forEach(j),H.forEach(j),this.h()},h(){K(g,"class","button-slot-wrapper svelte-vf2h4q"),K(d,"class","button-grid-wrapper svelte-vf2h4q"),K(s,"class",_=Li("big-button select-none font-sans "+p[0]+" "+p[1].class)+" svelte-vf2h4q")},m(k,H){ve(k,s,H),W(s,d),W(d,g),$&&$.m(g,null),u=!0,v||(P=Ln(s,"click",p[4]),v=!0)},p(k,[H]){$&&$.p&&(!u||H&4)&&Ui($,C,k,k[2],u?Ji(C,k[2],H,null):Gi(k[2]),null),(!u||H&3&&_!==(_=Li("big-button select-none font-sans "+k[0]+" "+k[1].class)+" svelte-vf2h4q"))&&K(s,"class",_)},i(k){u||(be($,k),u=!0)},o(k){Pe($,k),u=!1},d(k){k&&j(s),$&&$.d(k),v=!1,P()}}}function rs(p,s,d){let{$$slots:g={},$$scope:_}=s;fa();let{color:u="black"}=s;function v(P){da.call(this,p,P)}return p.$$set=P=>{d(1,s=Ye(Ye({},s),ft(P))),"color"in P&&d(0,u=P.color),"$$scope"in P&&d(2,_=P.$$scope)},s=ft(s),[u,s,_,g,v]}class Qn extends pt{constructor(s){super(),mt(this,s,rs,ts,ht,{color:0})}}function ns(p){let s,d,g='<path fill="currentColor" d="M12.207 2.293a1 1 0 0 1 0 1.414L10.914 5H12.5c4.652 0 8.5 3.848 8.5 8.5S17.152 22 12.5 22S4 18.152 4 13.5a1 1 0 1 1 2 0c0 3.548 2.952 6.5 6.5 6.5s6.5-2.952 6.5-6.5S16.048 7 12.5 7h-1.586l1.293 1.293a1 1 0 0 1-1.414 1.414l-3-3a1 1 0 0 1 0-1.414l3-3a1 1 0 0 1 1.414 0"/>',_=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},p[0]],u={};for(let v=0;v<_.length;v+=1)u=Ye(u,_[v]);return{c(){s=Ir("svg"),d=new Dr(!0),this.h()},l(v){s=jr(v,"svg",{viewBox:!0,width:!0,height:!0});var P=re(s);d=Vr(P,!0),P.forEach(j),this.h()},h(){d.a=null,Lt(s,u)},m(v,P){ve(v,s,P),d.m(g,s)},p(v,[P]){Lt(s,u=Nr(_,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},P&1&&v[0]]))},i:Oe,o:Oe,d(v){v&&j(s)}}}function is(p,s,d){return p.$$set=g=>{d(0,s=Ye(Ye({},s),ft(g)))},s=ft(s),[s]}class os extends pt{constructor(s){super(),mt(this,s,is,ns,ht,{})}}function as(p){let s,d,g='<path fill="currentColor" d="m11.5 12l8.5 6V6m-9 12V6l-8.5 6z"/>',_=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},p[0]],u={};for(let v=0;v<_.length;v+=1)u=Ye(u,_[v]);return{c(){s=Ir("svg"),d=new Dr(!0),this.h()},l(v){s=jr(v,"svg",{viewBox:!0,width:!0,height:!0});var P=re(s);d=Vr(P,!0),P.forEach(j),this.h()},h(){d.a=null,Lt(s,u)},m(v,P){ve(v,s,P),d.m(g,s)},p(v,[P]){Lt(s,u=Nr(_,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},P&1&&v[0]]))},i:Oe,o:Oe,d(v){v&&j(s)}}}function ss(p,s,d){return p.$$set=g=>{d(0,s=Ye(Ye({},s),ft(g)))},s=ft(s),[s]}class ls extends pt{constructor(s){super(),mt(this,s,ss,as,ht,{})}}function us(p){let s,d,g='<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M448 341.37V170.61A32 32 0 0 0 432.11 143l-152-88.46a47.94 47.94 0 0 0-48.24 0L79.89 143A32 32 0 0 0 64 170.61v170.76A32 32 0 0 0 79.89 369l152 88.46a48 48 0 0 0 48.24 0l152-88.46A32 32 0 0 0 448 341.37"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="m69 153.99l187 110l187-110m-187 310v-200"/><ellipse cx="256" cy="152" fill="currentColor" rx="24" ry="16"/><ellipse cx="208" cy="296" fill="currentColor" rx="16" ry="24"/><ellipse cx="112" cy="328" fill="currentColor" rx="16" ry="24"/><ellipse cx="304" cy="296" fill="currentColor" rx="16" ry="24"/><ellipse cx="400" cy="240" fill="currentColor" rx="16" ry="24"/><ellipse cx="304" cy="384" fill="currentColor" rx="16" ry="24"/><ellipse cx="400" cy="328" fill="currentColor" rx="16" ry="24"/>',_=[{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},p[0]],u={};for(let v=0;v<_.length;v+=1)u=Ye(u,_[v]);return{c(){s=Ir("svg"),d=new Dr(!0),this.h()},l(v){s=jr(v,"svg",{viewBox:!0,width:!0,height:!0});var P=re(s);d=Vr(P,!0),P.forEach(j),this.h()},h(){d.a=null,Lt(s,u)},m(v,P){ve(v,s,P),d.m(g,s)},p(v,[P]){Lt(s,u=Nr(_,[{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},P&1&&v[0]]))},i:Oe,o:Oe,d(v){v&&j(s)}}}function cs(p,s,d){return p.$$set=g=>{d(0,s=Ye(Ye({},s),ft(g)))},s=ft(s),[s]}class fs extends pt{constructor(s){super(),mt(this,s,cs,us,ht,{})}}function Vi(p,s,d){const g=p.slice();return g[5]=s[d],g}function ds(p){let s,d,g;return d=new os({props:{class:"inline-block"}}),{c(){s=q("div"),Ne(d.$$.fragment),this.h()},l(_){s=Z(_,"DIV",{class:!0});var u=re(s);We(d.$$.fragment,u),u.forEach(j),this.h()},h(){K(s,"class","flex items-center")},m(_,u){ve(_,s,u),He(d,s,null),g=!0},p:Oe,i(_){g||(be(d.$$.fragment,_),g=!0)},o(_){Pe(d.$$.fragment,_),g=!1},d(_){_&&j(s),Ue(d)}}}function hs(p){let s,d,g,_,u="Reverse Noise",v;return d=new ls({props:{class:"inline-block"}}),{c(){s=q("div"),Ne(d.$$.fragment),g=ye(),_=q("span"),_.textContent=u,this.h()},l(P){s=Z(P,"DIV",{class:!0});var C=re(s);We(d.$$.fragment,C),g=_e(C),_=Z(C,"SPAN",{class:!0,"data-svelte-h":!0}),Ze(_)!=="svelte-lozh40"&&(_.textContent=u),C.forEach(j),this.h()},h(){K(_,"class","ml-1"),K(s,"class","flex items-center")},m(P,C){ve(P,s,C),He(d,s,null),W(s,g),W(s,_),v=!0},p:Oe,i(P){v||(be(d.$$.fragment,P),v=!0)},o(P){Pe(d.$$.fragment,P),v=!1},d(P){P&&j(s),Ue(d)}}}function ps(p){let s,d,g,_,u="Add Noise",v;return d=new fs({props:{class:"inline-block"}}),{c(){s=q("div"),Ne(d.$$.fragment),g=ye(),_=q("span"),_.textContent=u,this.h()},l(P){s=Z(P,"DIV",{class:!0});var C=re(s);We(d.$$.fragment,C),g=_e(C),_=Z(C,"SPAN",{class:!0,"data-svelte-h":!0}),Ze(_)!=="svelte-exxaad"&&(_.textContent=u),C.forEach(j),this.h()},h(){K(_,"class","ml-1"),K(s,"class","flex items-center")},m(P,C){ve(P,s,C),He(d,s,null),W(s,g),W(s,_),v=!0},p:Oe,i(P){v||(be(d.$$.fragment,P),v=!0)},o(P){Pe(d.$$.fragment,P),v=!1},d(P){P&&j(s),Ue(d)}}}function Ni(p){let s,d,g,_;return d=new yo({props:{size:"64",expression:p[5]}}),{c(){s=q("div"),Ne(d.$$.fragment),g=ye(),this.h()},l(u){s=Z(u,"DIV",{class:!0});var v=re(s);We(d.$$.fragment,v),g=_e(v),v.forEach(j),this.h()},h(){K(s,"class","mr-4 border-2 border-blue-300 border-solid rounded-md p-1")},m(u,v){ve(u,s,v),He(d,s,null),W(s,g),_=!0},p(u,v){const P={};v&2&&(P.expression=u[5]),d.$set(P)},i(u){_||(be(d.$$.fragment,u),_=!0)},o(u){Pe(d.$$.fragment,u),_=!1},d(u){u&&j(s),Ue(d)}}}function ms(p){let s,d,g,_,u,v,P,C,$,k,H,G,Y,ie,J,oe,Se;d=new Qn({props:{color:"black",class:"mr-2",$$slots:{default:[ds]},$$scope:{ctx:p}}}),d.$on("click",p[4]),_=new Qn({props:{color:"black",class:"mr-2",$$slots:{default:[hs]},$$scope:{ctx:p}}}),_.$on("click",p[3]),v=new Qn({props:{color:"black gradient-border",class:"mr-2",$$slots:{default:[ps]},$$scope:{ctx:p}}}),v.$on("click",p[2]);let Re=Mn(p[1]),fe=[];for(let U=0;U<Re.length;U+=1)fe[U]=Ni(Vi(p,Re,U));const rt=U=>Pe(fe[U],1,1,()=>{fe[U]=null});return Y=new yo({props:{expression:p[0]}}),oe=new es({props:{expression:p[0]}}),{c(){s=q("div"),Ne(d.$$.fragment),g=ye(),Ne(_.$$.fragment),u=ye(),Ne(v.$$.fragment),P=ye(),C=q("div");for(let U=0;U<fe.length;U+=1)fe[U].c();$=ye(),k=q("div"),H=q("div"),G=q("div"),Ne(Y.$$.fragment),ie=ye(),J=q("div"),Ne(oe.$$.fragment),this.h()},l(U){s=Z(U,"DIV",{class:!0});var ee=re(s);We(d.$$.fragment,ee),g=_e(ee),We(_.$$.fragment,ee),u=_e(ee),We(v.$$.fragment,ee),ee.forEach(j),P=_e(U),C=Z(U,"DIV",{class:!0});var Me=re(C);for(let Q=0;Q<fe.length;Q+=1)fe[Q].l(Me);Me.forEach(j),$=_e(U),k=Z(U,"DIV",{class:!0});var Ce=re(k);H=Z(Ce,"DIV",{});var se=re(H);G=Z(se,"DIV",{class:!0});var Ke=re(G);We(Y.$$.fragment,Ke),Ke.forEach(j),se.forEach(j),ie=_e(Ce),J=Z(Ce,"DIV",{class:!0});var Le=re(J);We(oe.$$.fragment,Le),Le.forEach(j),Ce.forEach(j),this.h()},h(){K(s,"class","flex flex-row md:text-lg text-sm"),K(C,"class","flex flex-row my-4 overflow-x-clip"),K(G,"class","border border-black border-solid inline-block"),K(J,"class","font-mono text-base mt-4 md:mt-0 bg-gray-100 md:ml-4 px-4 py-4 border-2 border-solid border-gray-200 rounded-md h-72 w-full overflow-y-scroll md:overflow-y-auto"),K(k,"class","flex flex-col items-center md:flex-row md:items-start")},m(U,ee){ve(U,s,ee),He(d,s,null),W(s,g),He(_,s,null),W(s,u),He(v,s,null),ve(U,P,ee),ve(U,C,ee);for(let Me=0;Me<fe.length;Me+=1)fe[Me]&&fe[Me].m(C,null);ve(U,$,ee),ve(U,k,ee),W(k,H),W(H,G),He(Y,G,null),W(k,ie),W(k,J),He(oe,J,null),Se=!0},p(U,[ee]){const Me={};ee&256&&(Me.$$scope={dirty:ee,ctx:U}),d.$set(Me);const Ce={};ee&256&&(Ce.$$scope={dirty:ee,ctx:U}),_.$set(Ce);const se={};if(ee&256&&(se.$$scope={dirty:ee,ctx:U}),v.$set(se),ee&2){Re=Mn(U[1]);let Q;for(Q=0;Q<Re.length;Q+=1){const Be=Vi(U,Re,Q);fe[Q]?(fe[Q].p(Be,ee),be(fe[Q],1)):(fe[Q]=Ni(Be),fe[Q].c(),be(fe[Q],1),fe[Q].m(C,null))}for(On(),Q=Re.length;Q<fe.length;Q+=1)rt(Q);Bn()}const Ke={};ee&1&&(Ke.expression=U[0]),Y.$set(Ke);const Le={};ee&1&&(Le.expression=U[0]),oe.$set(Le)},i(U){if(!Se){be(d.$$.fragment,U),be(_.$$.fragment,U),be(v.$$.fragment,U);for(let ee=0;ee<Re.length;ee+=1)be(fe[ee]);be(Y.$$.fragment,U),be(oe.$$.fragment,U),Se=!0}},o(U){Pe(d.$$.fragment,U),Pe(_.$$.fragment,U),Pe(v.$$.fragment,U),fe=fe.filter(Boolean);for(let ee=0;ee<fe.length;ee+=1)Pe(fe[ee]);Pe(Y.$$.fragment,U),Pe(oe.$$.fragment,U),Se=!1},d(U){U&&(j(s),j(P),j(C),j($),j(k)),Ue(d),Ue(_),Ue(v),Wi(fe,U),Ue(Y),Ue(oe)}}}const Cn="(- (+ (- (Circle 7 8 8) (Circle 6 8 8)) (Quad 8 8 6 6 H)) (Quad 8 8 A 1 G))";function vs(p,s,d){let g=Cn,_=[Cn];return[g,_,()=>{oi().then(C=>{d(0,g=C.get_mutated(g)),d(1,_=[..._,g])})},()=>{_.length>1&&(d(0,g=_[_.length-2]),d(1,_=_.slice(0,_.length-1)))},()=>{d(0,g=Cn),d(1,_=[Cn])}]}class gs extends pt{constructor(s){super(),mt(this,s,vs,ms,ht,{})}}function ys(p){let s,d,g='<g fill="none" fill-rule="evenodd"><path d="M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022m-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"/><path fill="currentColor" d="M13.586 2a2 2 0 0 1 1.284.467l.13.119L19.414 7a2 2 0 0 1 .578 1.238l.008.176V20a2 2 0 0 1-1.85 1.995L18 22H6a2 2 0 0 1-1.995-1.85L4 20V4a2 2 0 0 1 1.85-1.995L6 2zM12 4H6v16h12V10h-4.5a1.5 1.5 0 0 1-1.493-1.356L12 8.5zm.988 7.848a6.223 6.223 0 0 0 2.235 3.872c.887.717.076 2.121-.988 1.712a6.223 6.223 0 0 0-4.47 0c-1.065.41-1.876-.995-.989-1.712a6.222 6.222 0 0 0 2.235-3.872c.178-1.127 1.8-1.126 1.977 0m-.99 2.304l-.688 1.196h1.38zM14 4.414V8h3.586z"/></g>',_=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},p[0]],u={};for(let v=0;v<_.length;v+=1)u=Ye(u,_[v]);return{c(){s=Ir("svg"),d=new Dr(!0),this.h()},l(v){s=jr(v,"svg",{viewBox:!0,width:!0,height:!0});var P=re(s);d=Vr(P,!0),P.forEach(j),this.h()},h(){d.a=null,Lt(s,u)},m(v,P){ve(v,s,P),d.m(g,s)},p(v,[P]){Lt(s,u=Nr(_,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},P&1&&v[0]]))},i:Oe,o:Oe,d(v){v&&j(s)}}}function _s(p,s,d){return p.$$set=g=>{d(0,s=Ye(Ye({},s),ft(g)))},s=ft(s),[s]}class _o extends pt{constructor(s){super(),mt(this,s,_s,ys,ht,{})}}function ws(p){let s,d,g='<path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/>',_=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},p[0]],u={};for(let v=0;v<_.length;v+=1)u=Ye(u,_[v]);return{c(){s=Ir("svg"),d=new Dr(!0),this.h()},l(v){s=jr(v,"svg",{viewBox:!0,width:!0,height:!0});var P=re(s);d=Vr(P,!0),P.forEach(j),this.h()},h(){d.a=null,Lt(s,u)},m(v,P){ve(v,s,P),d.m(g,s)},p(v,[P]){Lt(s,u=Nr(_,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},P&1&&v[0]]))},i:Oe,o:Oe,d(v){v&&j(s)}}}function bs(p,s,d){return p.$$set=g=>{d(0,s=Ye(Ye({},s),ft(g)))},s=ft(s),[s]}class wo extends pt{constructor(s){super(),mt(this,s,bs,ws,ht,{})}}function xs(p){let s,d,g='<path fill="currentColor" d="M3.842 0a1 1 0 0 0-.922.608c-.153.369-.044.627.294 1.111l6.919 8.36l-1.023 1.106a1.04 1.04 0 0 0 .003 1.423l1.23 1.313l-5.44 6.444c-.28.3-.453.823-.297 1.199a1.025 1.025 0 0 0 .959.635a.91.91 0 0 0 .689-.34l5.783-6.126l7.49 8.005a.85.85 0 0 0 .684.26a.96.96 0 0 0 .877-.615c.158-.377-.017-.75-.306-1.14L13.73 13.9l1.064-1.13a.963.963 0 0 0 .009-1.316L4.633.464S4.26.01 3.867 0zm0 .272h.017c.218.005.487.272.564.364l.005.006l.005.005l10.17 10.99a.69.69 0 0 1-.008.946l-1.066 1.133l-1.498-1.772l-8.6-10.39c-.328-.472-.352-.619-.26-.841a.73.73 0 0 1 .671-.44Zm14.341 1.57a.88.88 0 0 0-.655.242l-5.696 6.158l1.694 1.832l5.309-6.514c.325-.433.479-.66.325-1.029a1.12 1.12 0 0 0-.977-.689m-7.655 12.282l1.318 1.414l-5.786 6.13a.65.65 0 0 1-.496.26a.75.75 0 0 1-.706-.467c-.112-.269.036-.687.244-.909l.005-.005l.005-.006z"/>',_=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},p[0]],u={};for(let v=0;v<_.length;v+=1)u=Ye(u,_[v]);return{c(){s=Ir("svg"),d=new Dr(!0),this.h()},l(v){s=jr(v,"svg",{viewBox:!0,width:!0,height:!0});var P=re(s);d=Vr(P,!0),P.forEach(j),this.h()},h(){d.a=null,Lt(s,u)},m(v,P){ve(v,s,P),d.m(g,s)},p(v,[P]){Lt(s,u=Nr(_,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},P&1&&v[0]]))},i:Oe,o:Oe,d(v){v&&j(s)}}}function As(p,s,d){return p.$$set=g=>{d(0,s=Ye(Ye({},s),ft(g)))},s=ft(s),[s]}class Ps extends pt{constructor(s){super(),mt(this,s,As,xs,ht,{})}}function Ss(p){let s,d,g;const _=p[2].default,u=Hi(_,p,p[1],null);return{c(){s=q("button"),u&&u.c(),this.h()},l(v){s=Z(v,"BUTTON",{class:!0});var P=re(s);u&&u.l(P),P.forEach(j),this.h()},h(){K(s,"class",d="border-2 hover:text-white hover:bg-black border-solid border-black rounded-md px-4 py-1 "+p[0].class)},m(v,P){ve(v,s,P),u&&u.m(s,null),g=!0},p(v,[P]){u&&u.p&&(!g||P&2)&&Ui(u,_,v,v[1],g?Ji(_,v[1],P,null):Gi(v[1]),null),(!g||P&1&&d!==(d="border-2 hover:text-white hover:bg-black border-solid border-black rounded-md px-4 py-1 "+v[0].class))&&K(s,"class",d)},i(v){g||(be(u,v),g=!0)},o(v){Pe(u,v),g=!1},d(v){v&&j(s),u&&u.d(v)}}}function Cs(p,s,d){let{$$slots:g={},$$scope:_}=s;return p.$$set=u=>{d(0,s=Ye(Ye({},s),ft(u))),"$$scope"in u&&d(1,_=u.$$scope)},s=ft(s),[s,_,g]}class qn extends pt{constructor(s){super(),mt(this,s,Cs,Ss,ht,{})}}function Ts(p){let s,d,g,_;return d=new _o({props:{class:"inline-block mr-1"}}),{c(){s=q("div"),Ne(d.$$.fragment),g=$t(`
								Paper`),this.h()},l(u){s=Z(u,"DIV",{class:!0});var v=re(s);We(d.$$.fragment,v),g=Rt(v,`
								Paper`),v.forEach(j),this.h()},h(){K(s,"class","flex items-center")},m(u,v){ve(u,s,v),He(d,s,null),W(s,g),_=!0},p:Oe,i(u){_||(be(d.$$.fragment,u),_=!0)},o(u){Pe(d.$$.fragment,u),_=!1},d(u){u&&j(s),Ue(d)}}}function Fs(p){let s,d,g,_;return d=new Ps({props:{class:"inline-block mr-1"}}),{c(){s=q("div"),Ne(d.$$.fragment),g=$t(`
								arXiv`),this.h()},l(u){s=Z(u,"DIV",{class:!0});var v=re(s);We(d.$$.fragment,v),g=Rt(v,`
								arXiv`),v.forEach(j),this.h()},h(){K(s,"class","flex items-center")},m(u,v){ve(u,s,v),He(d,s,null),W(s,g),_=!0},p:Oe,i(u){_||(be(d.$$.fragment,u),_=!0)},o(u){Pe(d.$$.fragment,u),_=!1},d(u){u&&j(s),Ue(d)}}}function Es(p){let s,d,g,_,u="Code & Weights",v,P,C="Code",$;return d=new wo({props:{class:"inline-block mr-1"}}),{c(){s=q("div"),Ne(d.$$.fragment),g=ye(),_=q("span"),_.textContent=u,v=ye(),P=q("span"),P.textContent=C,this.h()},l(k){s=Z(k,"DIV",{class:!0});var H=re(s);We(d.$$.fragment,H),g=_e(H),_=Z(H,"SPAN",{class:!0,"data-svelte-h":!0}),Ze(_)!=="svelte-fd5kvt"&&(_.textContent=u),v=_e(H),P=Z(H,"SPAN",{class:!0,"data-svelte-h":!0}),Ze(P)!=="svelte-5aisgs"&&(P.textContent=C),H.forEach(j),this.h()},h(){K(_,"class","hidden md:block"),K(P,"class","md:hidden block"),K(s,"class","flex items-center")},m(k,H){ve(k,s,H),He(d,s,null),W(s,g),W(s,_),W(s,v),W(s,P),$=!0},p:Oe,i(k){$||(be(d.$$.fragment,k),$=!0)},o(k){Pe(d.$$.fragment,k),$=!1},d(k){k&&j(s),Ue(d)}}}function Ms(p){let s,d,g,_='<div class="mx-8 max-w-3xl w-full text-white pb-12 pt-8 md:pt-28"><div class="font-sans uppercase text-xs mb-4 tracking-widest text-gray-300 border-1 border border-solid border-gray-300 inline-block px-2 py-1 rounded-md">JUNE 2024</div> <div class="inline-block text-4xl">Diffusion On Syntax Trees For Program Synthesis</div> <div class="mt-8 text-lg flex underline text-gray-200 flex-col md:flex-row"><div class="hover:text-black hover:bg-white"><a href="https://shreyaskapur.com" target="_blank" rel="noreferrer">Shreyas Kapur</a>,</div> <div class="md:ml-2 hover:text-black hover:bg-white"><a href="https://ejenner.com/" target="_blank" rel="noreferrer">Erik Jenner</a>,</div> <div class="md:ml-2 hover:text-black hover:bg-white"><a href="https://people.eecs.berkeley.edu/~russell/" target="_blank" rel="noreferrer">Stuart Russell</a></div></div> <div class="mt-4 text-gray-300 text-sm">University of California, Berkeley</div></div>',u,v,P,C,$,k,H,G,Y,ie,J,oe,Se,Re,fe,rt=`<strong>TLDR;</strong> We teach neural models to *edit* programs, informed by the execution
					output.`,U,ee,Me,Ce,se=`<div class="mx-8 max-w-3xl w-full"><div class="w-full flex justify-center items-center flex-col"><div class="font-bold text-center text-xl mt-8">Abstract</div> <div class="py-4 mb-8 text-base">Large language models generate code one token at a time. Their autoregressive generation
					process lacks the feedback of observing the program&#39;s output. Training LLMs to suggest
					edits directly can be challenging due to the scarcity of rich edit data. To address these
					problems, we propose neural diffusion models that operate on syntax trees of any
					context-free grammar. Similar to image diffusion models, our method also inverts <q>noise</q>
					applied to syntax trees. Rather than generating code sequentially, we iteratively edit it while
					preserving syntactic validity, which makes it easy to combine this neural model with search.
					We apply our approach to inverse graphics tasks, where our model learns to convert images into
					programs that produce those images. Combined with search, our model is able to write graphics
					programs, see the execution result, and debug them to meet the required specifications. We
					additionally show how our system can write graphics programs for hand-drawn sketches.</div></div></div>`,Ke,Le,Q,Be,nr="What does adding <q>noise</q> mean for programs?",X,Ae,le,Gt,Wr=`What you&#39;re seeing above is our implementation of how we add random mutations to syntax
				trees. We pick random nodes in the syntax tree and replace them with other nodes of the <i>correct type</i> for the node we&#39;re replacing.`,Je,ir,yt,Jt,un="Tree diffusion lets us use search in program space.",Ot,bt,et,Hr,Yt,Kt,Ur=`Above is a video of our model using search to find the best program to generate given some
				target image. We're not showing all the nodes here, but it does take the model just a few
				layers of search to find the correct program.`,Gr,or,xt,zt,Tr="Citation",Fr,vt,At,gr,ur=`@article{kapur2024diffusion,
	title={Diffusion On Syntax Trees For Program Synthesis},
	author={Kapur, Shreyas and Jenner, Erik and Russell, Stuart},
	journal={arXiv preprint arXiv:2405.20519},
	year={2024}
}`,Xt,Bt,Pt,Jr=`We would like to thank Kathy Jang, David Wu, Cam Allen, Sam Toyer, Eli Bronstein, Koushik
				Sen, and Pieter Abbeel for discussions, feedback, and technical support.`,cr,tt,_t,ar,ke,at,pe,Yr,ze,It,yr,Qt,Kr=`This website is licensed under a <a class="underline" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noreferrer">Creative Commons Attribution-ShareAlike 4.0 International License</a>. This means you are free to borrow the source code of this website, we just ask that you
				link back to this page in the footer.`,_r,Er,fr;return H=new qn({props:{class:"mr-4",$$slots:{default:[Ts]},$$scope:{ctx:p}}}),ie=new qn({props:{class:"mr-4",$$slots:{default:[Fs]},$$scope:{ctx:p}}}),Se=new qn({props:{$$slots:{default:[Es]},$$scope:{ctx:p}}}),ee=new va({}),Ae=new gs({}),pe=new _o({props:{class:"inline-block hover:text-black"}}),It=new wo({props:{class:"inline-block hover:text-black"}}),{c(){s=ye(),d=q("div"),g=q("div"),g.innerHTML=_,u=ye(),v=q("div"),P=q("div"),C=q("div"),$=q("div"),k=q("a"),Ne(H.$$.fragment),G=ye(),Y=q("a"),Ne(ie.$$.fragment),J=ye(),oe=q("a"),Ne(Se.$$.fragment),Re=ye(),fe=q("div"),fe.innerHTML=rt,U=ye(),Ne(ee.$$.fragment),Me=ye(),Ce=q("div"),Ce.innerHTML=se,Ke=ye(),Le=q("div"),Q=q("div"),Be=q("h1"),Be.innerHTML=nr,X=ye(),Ne(Ae.$$.fragment),le=ye(),Gt=q("div"),Gt.innerHTML=Wr,Je=ye(),ir=q("div"),yt=q("div"),Jt=q("h1"),Jt.textContent=un,Ot=ye(),bt=q("div"),et=q("video"),Yt=ye(),Kt=q("div"),Kt.textContent=Ur,Gr=ye(),or=q("div"),xt=q("div"),zt=q("h1"),zt.textContent=Tr,Fr=ye(),vt=q("div"),At=q("pre"),gr=$t(""),Xt=$t(ur),Bt=ye(),Pt=q("div"),Pt.textContent=Jr,cr=ye(),tt=q("div"),_t=q("div"),ar=q("div"),ke=q("div"),at=q("a"),Ne(pe.$$.fragment),Yr=ye(),ze=q("a"),Ne(It.$$.fragment),yr=ye(),Qt=q("div"),Qt.innerHTML=Kr,this.h()},l(Te){ha("svelte-1b8uhcf",document.head).forEach(j),s=_e(Te),d=Z(Te,"DIV",{class:!0});var Ge=re(d);g=Z(Ge,"DIV",{class:!0,"data-svelte-h":!0}),Ze(g)!=="svelte-15k1n94"&&(g.innerHTML=_),u=_e(Ge),v=Z(Ge,"DIV",{class:!0});var wr=re(v);P=Z(wr,"DIV",{class:!0});var qt=re(P);C=Z(qt,"DIV",{class:!0});var St=re(C);$=Z(St,"DIV",{class:!0});var dt=re($);k=Z(dt,"A",{href:!0});var zr=re(k);We(H.$$.fragment,zr),zr.forEach(j),G=_e(dt),Y=Z(dt,"A",{href:!0});var Mr=re(Y);We(ie.$$.fragment,Mr),Mr.forEach(j),J=_e(dt),oe=Z(dt,"A",{href:!0});var kr=re(oe);We(Se.$$.fragment,kr),kr.forEach(j),dt.forEach(j),Re=_e(St),fe=Z(St,"DIV",{class:!0,"data-svelte-h":!0}),Ze(fe)!=="svelte-1ega403"&&(fe.innerHTML=rt),U=_e(St),We(ee.$$.fragment,St),St.forEach(j),qt.forEach(j),wr.forEach(j),Me=_e(Ge),Ce=Z(Ge,"DIV",{class:!0,"data-svelte-h":!0}),Ze(Ce)!=="svelte-b8g6nh"&&(Ce.innerHTML=se),Ke=_e(Ge),Le=Z(Ge,"DIV",{class:!0});var $r=re(Le);Q=Z($r,"DIV",{class:!0});var dr=re(Q);Be=Z(dr,"H1",{class:!0,"data-svelte-h":!0}),Ze(Be)!=="svelte-h0vemy"&&(Be.innerHTML=nr),X=_e(dr),We(Ae.$$.fragment,dr),le=_e(dr),Gt=Z(dr,"DIV",{class:!0,"data-svelte-h":!0}),Ze(Gt)!=="svelte-1hk55ma"&&(Gt.innerHTML=Wr),dr.forEach(j),$r.forEach(j),Je=_e(Ge),ir=Z(Ge,"DIV",{class:!0});var Rr=re(ir);yt=Z(Rr,"DIV",{class:!0});var hr=re(yt);Jt=Z(hr,"H1",{class:!0,"data-svelte-h":!0}),Ze(Jt)!=="svelte-ud5ewu"&&(Jt.textContent=un),Ot=_e(hr),bt=Z(hr,"DIV",{class:!0});var cn=re(bt);et=Z(cn,"VIDEO",{src:!0,width:!0}),re(et).forEach(j),cn.forEach(j),Yt=_e(hr),Kt=Z(hr,"DIV",{class:!0,"data-svelte-h":!0}),Ze(Kt)!=="svelte-1i4cn9r"&&(Kt.textContent=Ur),hr.forEach(j),Rr.forEach(j),Gr=_e(Ge),or=Z(Ge,"DIV",{class:!0});var fn=re(or);xt=Z(fn,"DIV",{class:!0});var it=re(xt);zt=Z(it,"H1",{class:!0,id:!0,"data-svelte-h":!0}),Ze(zt)!=="svelte-o4lt1t"&&(zt.textContent=Tr),Fr=_e(it),vt=Z(it,"DIV",{class:!0});var Xr=re(vt);At=Z(Xr,"PRE",{class:!0});var Qr=re(At);gr=Rt(Qr,""),Xt=Rt(Qr,ur),Qr.forEach(j),Xr.forEach(j),Bt=_e(it),Pt=Z(it,"DIV",{class:!0,"data-svelte-h":!0}),Ze(Pt)!=="svelte-u2o9a7"&&(Pt.textContent=Jr),it.forEach(j),fn.forEach(j),cr=_e(Ge),tt=Z(Ge,"DIV",{class:!0});var Xe=re(tt);_t=Z(Xe,"DIV",{class:!0});var br=re(_t);ar=Z(br,"DIV",{class:!0});var qr=re(ar);ke=Z(qr,"DIV",{class:!0});var Zt=re(ke);at=Z(Zt,"A",{href:!0,target:!0,rel:!0,class:!0});var xr=re(at);We(pe.$$.fragment,xr),xr.forEach(j),Yr=_e(Zt),ze=Z(Zt,"A",{href:!0,target:!0,rel:!0});var Ar=re(ze);We(It.$$.fragment,Ar),Ar.forEach(j),Zt.forEach(j),qr.forEach(j),yr=_e(br),Qt=Z(br,"DIV",{class:!0,"data-svelte-h":!0}),Ze(Qt)!=="svelte-ulsz2z"&&(Qt.innerHTML=Kr),br.forEach(j),Xe.forEach(j),Ge.forEach(j),this.h()},h(){document.title="Tree Diffusion",K(g,"class","flex w-full justify-center font-sans items-end bg-black"),K(k,"href","https://arxiv.org/pdf/2405.20519"),K(Y,"href","https://arxiv.org/abs/2405.20519"),K(oe,"href","https://github.com/revalo/tree-diffusion"),K($,"class","flex text-sm md:text-base mb-8 mt-4"),K(fe,"class","pb-4"),K(C,"class","w-full flex justify-center items-center flex-col"),K(P,"class","mx-8 max-w-3xl w-full"),K(v,"class","flex w-full justify-center pt-4 font-sans"),K(Ce,"class","flex w-full justify-center pt-4 mt-16 font-sans bg-gray-100"),K(Be,"class","mb-8 text-3xl font-bold"),K(Gt,"class","mt-4"),K(Q,"class","mx-8 max-w-3xl w-full"),K(Le,"class","flex w-full justify-center pt-4 mt-16 font-sans"),K(Jt,"class","mb-8 text-3xl font-bold"),Fn(et.src,Hr="/videos/search.mp4")||K(et,"src",Hr),et.autoplay=!0,et.loop=!0,et.muted=!0,et.playsInline=!0,K(et,"width","300"),K(bt,"class","w-full flex items-center justify-center"),K(Kt,"class","mt-4"),K(yt,"class","mx-8 max-w-3xl w-full"),K(ir,"class","flex w-full justify-center pt-8 font-sans"),K(zt,"class","mb-4 text-3xl font-bold"),K(zt,"id","citation"),K(At,"class","whitespace-pre-wrap"),K(vt,"class","font-mono text-sm mt-4 bg-gray-100 px-4 py-4 border-2 border-solid border-gray-200 rounded-md w-full"),K(Pt,"class","text-base mt-8"),K(xt,"class","mx-8 max-w-3xl w-full"),K(or,"class","flex w-full justify-center font-sans mt-16"),K(at,"href","https://arxiv.org/abs/2405.20519"),K(at,"target","_blank"),K(at,"rel","noreferrer"),K(at,"class","mr-2"),K(ze,"href","https://github.com/revalo/tree-diffusion"),K(ze,"target","_blank"),K(ze,"rel","noreferrer"),K(ke,"class","text-gray-500 mt-4 text-2xl mb-8"),K(ar,"class","w-full flex justify-start items-center flex-col"),K(Qt,"class","text-sm text-gray-600 mb-24"),K(_t,"class","mx-8 max-w-3xl w-full"),K(tt,"class","flex w-full justify-center pt-4 mt-16 font-sans bg-gray-100"),K(d,"class","text-lg")},m(Te,nt){ve(Te,s,nt),ve(Te,d,nt),W(d,g),W(d,u),W(d,v),W(v,P),W(P,C),W(C,$),W($,k),He(H,k,null),W($,G),W($,Y),He(ie,Y,null),W($,J),W($,oe),He(Se,oe,null),W(C,Re),W(C,fe),W(C,U),He(ee,C,null),W(d,Me),W(d,Ce),W(d,Ke),W(d,Le),W(Le,Q),W(Q,Be),W(Q,X),He(Ae,Q,null),W(Q,le),W(Q,Gt),W(d,Je),W(d,ir),W(ir,yt),W(yt,Jt),W(yt,Ot),W(yt,bt),W(bt,et),isNaN(p[0])||(et.playbackRate=p[0]),W(yt,Yt),W(yt,Kt),W(d,Gr),W(d,or),W(or,xt),W(xt,zt),W(xt,Fr),W(xt,vt),W(vt,At),W(At,gr),W(At,Xt),W(xt,Bt),W(xt,Pt),W(d,cr),W(d,tt),W(tt,_t),W(_t,ar),W(ar,ke),W(ke,at),He(pe,at,null),W(ke,Yr),W(ke,ze),He(It,ze,null),W(_t,yr),W(_t,Qt),_r=!0,Er||(fr=Ln(et,"ratechange",p[1]),Er=!0)},p(Te,[nt]){const Ge={};nt&4&&(Ge.$$scope={dirty:nt,ctx:Te}),H.$set(Ge);const wr={};nt&4&&(wr.$$scope={dirty:nt,ctx:Te}),ie.$set(wr);const qt={};nt&4&&(qt.$$scope={dirty:nt,ctx:Te}),Se.$set(qt),nt&1&&!isNaN(Te[0])&&(et.playbackRate=Te[0])},i(Te){_r||(be(H.$$.fragment,Te),be(ie.$$.fragment,Te),be(Se.$$.fragment,Te),be(ee.$$.fragment,Te),be(Ae.$$.fragment,Te),be(pe.$$.fragment,Te),be(It.$$.fragment,Te),_r=!0)},o(Te){Pe(H.$$.fragment,Te),Pe(ie.$$.fragment,Te),Pe(Se.$$.fragment,Te),Pe(ee.$$.fragment,Te),Pe(Ae.$$.fragment,Te),Pe(pe.$$.fragment,Te),Pe(It.$$.fragment,Te),_r=!1},d(Te){Te&&(j(s),j(d)),Ue(H),Ue(ie),Ue(Se),Ue(ee),Ue(Ae),Ue(pe),Ue(It),Er=!1,fr()}}}function ks(p,s,d){let g=1;setInterval(()=>{d(0,g=1)},200);function _(){g=this.playbackRate,d(0,g)}return[g,_]}class Os extends pt{constructor(s){super(),mt(this,s,ks,Ms,ht,{})}}export{Os as P,La as g};
